2025-10-01 16:15:55.345 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-10-01 16:15:55.512 +00:00 [DBG] Hosting starting
2025-10-01 16:15:55.776 +00:00 [WRN] Using an in-memory repository. Keys will not be persisted to storage.
2025-10-01 16:15:55.776 +00:00 [WRN] Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.
2025-10-01 16:15:55.787 +00:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2025-10-01 16:15:55.787 +00:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2025-10-01 16:15:55.790 +00:00 [INF] Creating key {f068322d-deb3-41d8-b517-02b4d2211eb1} with creation date 2025-10-01 16:15:55Z, activation date 2025-10-01 16:15:55Z, and expiration date 2025-12-30 16:15:55Z.
2025-10-01 16:15:55.880 +00:00 [DBG] Descriptor deserializer type for key {f068322d-deb3-41d8-b517-02b4d2211eb1} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2025-10-01 16:15:55.887 +00:00 [DBG] No key escrow sink found. Not writing key {f068322d-deb3-41d8-b517-02b4d2211eb1} to escrow.
2025-10-01 16:15:55.888 +00:00 [WRN] No XML encryptor configured. Key {f068322d-deb3-41d8-b517-02b4d2211eb1} may be persisted to storage in unencrypted form.
2025-10-01 16:15:55.889 +00:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2025-10-01 16:15:55.890 +00:00 [DBG] Found key {f068322d-deb3-41d8-b517-02b4d2211eb1}.
2025-10-01 16:15:55.902 +00:00 [DBG] Considering key {f068322d-deb3-41d8-b517-02b4d2211eb1} with expiration date 2025-12-30 16:15:55Z as default key.
2025-10-01 16:15:55.908 +00:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-01 16:15:55.911 +00:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-10-01 16:15:55.912 +00:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-10-01 16:15:55.919 +00:00 [DBG] Using key {f068322d-deb3-41d8-b517-02b4d2211eb1} as the default key.
2025-10-01 16:15:55.920 +00:00 [DBG] Key ring with default key {f068322d-deb3-41d8-b517-02b4d2211eb1} was loaded during application startup.
2025-10-01 16:15:56.118 +00:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 2AE5B9E8B7B0EDFD86FD709A56EA7C92E2569E52)
2025-10-01 16:15:56.489 +00:00 [INF] Now listening on: http://[::]:8080
2025-10-01 16:15:56.490 +00:00 [INF] Now listening on: https://[::]:8081
2025-10-01 16:15:56.491 +00:00 [DBG] Loaded hosting startup assembly CarsTradeAPI
2025-10-01 16:15:56.493 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 16:15:56.494 +00:00 [INF] Hosting environment: Development
2025-10-01 16:15:56.494 +00:00 [INF] Content root path: /app
2025-10-01 16:15:56.494 +00:00 [DBG] Hosting started
2025-10-01 16:15:57.559 +00:00 [DBG] Connection id "0HNG10N6VQQ21" accepted.
2025-10-01 16:15:57.560 +00:00 [DBG] Connection id "0HNG10N6VQQ21" started.
2025-10-01 16:15:57.611 +00:00 [DBG] Connection 0HNG10N6VQQ21 established using the following protocol: "Tls13"
2025-10-01 16:15:57.733 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger - null null
2025-10-01 16:15:57.735 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-01 16:15:57.748 +00:00 [DBG] No candidates found for the request path '/swagger'
2025-10-01 16:15:57.749 +00:00 [DBG] Request did not match any endpoints
2025-10-01 16:15:57.912 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:15:57.931 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger - 301 0 null 198.6163ms
2025-10-01 16:15:57.958 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/index.html - null null
2025-10-01 16:15:57.958 +00:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-10-01 16:15:57.959 +00:00 [DBG] Request did not match any endpoints
2025-10-01 16:15:57.960 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:15:58.033 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/index.html - 200 null text/html;charset=utf-8 75.2248ms
2025-10-01 16:15:58.060 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/swagger-ui.css - null null
2025-10-01 16:15:58.081 +00:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2025-10-01 16:15:58.082 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/swagger-ui-standalone-preset.js - null null
2025-10-01 16:15:58.082 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/swagger-ui-bundle.js - null null
2025-10-01 16:15:58.083 +00:00 [DBG] Request did not match any endpoints
2025-10-01 16:15:58.083 +00:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2025-10-01 16:15:58.083 +00:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2025-10-01 16:15:58.085 +00:00 [DBG] Request did not match any endpoints
2025-10-01 16:15:58.086 +00:00 [DBG] Request did not match any endpoints
2025-10-01 16:15:58.086 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:15:58.086 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:15:58.086 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:15:58.172 +00:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-10-01 16:15:58.193 +00:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-10-01 16:15:58.194 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 111.9089ms
2025-10-01 16:15:58.194 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/swagger-ui.css - 200 152034 text/css 134.1853ms
2025-10-01 16:15:58.244 +00:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-10-01 16:15:58.245 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 162.4955ms
2025-10-01 16:15:58.344 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - null null
2025-10-01 16:15:58.365 +00:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-10-01 16:15:58.366 +00:00 [DBG] Request did not match any endpoints
2025-10-01 16:15:58.366 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/favicon-32x32.png - null null
2025-10-01 16:15:58.367 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:15:58.367 +00:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2025-10-01 16:15:58.368 +00:00 [DBG] Request did not match any endpoints
2025-10-01 16:15:58.368 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:15:58.369 +00:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-10-01 16:15:58.370 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/favicon-32x32.png - 200 628 image/png 3.7425ms
2025-10-01 16:15:58.476 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 132.6108ms
2025-10-01 16:16:20.375 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Buyer/GetAllBuyers - null null
2025-10-01 16:16:20.426 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Buyer/GetAllBuyers'
2025-10-01 16:16:20.429 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)' with route pattern 'api/Buyer/GetAllBuyers' is valid for the request path '/api/Buyer/GetAllBuyers'
2025-10-01 16:16:20.430 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-10-01 16:16:20.431 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:16:20.432 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:16:20.434 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-10-01 16:16:20.451 +00:00 [INF] Route matched with {action = "GetAllBuyers", controller = "Buyer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto]]] GetAllBuyers() on controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI).
2025-10-01 16:16:20.452 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:16:20.453 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:16:20.453 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:16:20.454 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:16:20.454 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:16:20.455 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 16:16:20.458 +00:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-01 16:16:20.458 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 16:16:20.461 +00:00 [INF] Получен запрос на получение всех покупателей
2025-10-01 16:16:20.611 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-01 16:16:20.699 +00:00 [INF] Начало обработки запроса GetBuyersQuery
2025-10-01 16:16:20.950 +00:00 [INF] Этап получения всех покупателей в репозитории
2025-10-01 16:16:21.445 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 16:16:21.456 +00:00 [DBG] Compiling query expression: 
'DbSet<Buyer>()'
2025-10-01 16:16:21.557 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Buyer>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Buyer.BuyerId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Buyer.BuyerAddress (string) Required, 1], [Property: Buyer.BuyerEmail (string), 2], [Property: Buyer.BuyerMiddlename (string), 3], [Property: Buyer.BuyerName (string) Required, 4], [Property: Buyer.BuyerSurname (string) Required, 5], [Property: Buyer.CreatedAt (DateTime) Required, 6], [Property: Buyer.PhoneNumber (string) Required, 7] }
        SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
        FROM Buyers AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Buyer>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-10-01 16:16:21.574 +00:00 [DBG] Creating DbConnection.
2025-10-01 16:16:21.578 +00:00 [DBG] Created DbConnection. (2ms).
2025-10-01 16:16:21.580 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:16:21.678 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:16:21.680 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 16:16:21.685 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-10-01 16:16:21.687 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-10-01 16:16:21.691 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
FROM "Buyers" AS b
2025-10-01 16:16:21.716 +00:00 [ERR] Failed executing DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
FROM "Buyers" AS b
2025-10-01 16:16:21.719 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:16:21.725 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (2ms).
2025-10-01 16:16:21.766 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CarsTradeAPI.Data.CarsTradeDbContext'.
Npgsql.PostgresException (0x80004005): 42P01: relation "Buyers" does not exist

POSITION: 144
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "Buyers" does not exist
    Position: 144
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: relation "Buyers" does not exist

POSITION: 144
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "Buyers" does not exist
    Position: 144
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-01 16:16:21.856 +00:00 [ERR] Ошибка при получении всех покупателей
Npgsql.PostgresException (0x80004005): 42P01: relation "Buyers" does not exist

POSITION: 144
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CarsTradeAPI.Features.BuyerOperation.BuyerRepository.ImplementationBuyerRepository.GetAllBuyersAsync() in B:\MyDevelopment\MyRepos\CarsTradeAPI\CarsTradeAPI\Features\BuyerOperation\BuyerRepository\ImplementationBuyerRepository.cs:line 148
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "Buyers" does not exist
    Position: 144
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-01 16:16:21.949 +00:00 [ERR] Ошибка при получении списка покупателей
System.Exception: Ошибка при получении всех покупателей
 ---> Npgsql.PostgresException (0x80004005): 42P01: relation "Buyers" does not exist

POSITION: 144
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CarsTradeAPI.Features.BuyerOperation.BuyerRepository.ImplementationBuyerRepository.GetAllBuyersAsync() in B:\MyDevelopment\MyRepos\CarsTradeAPI\CarsTradeAPI\Features\BuyerOperation\BuyerRepository\ImplementationBuyerRepository.cs:line 148
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "Buyers" does not exist
    Position: 144
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
   --- End of inner exception stack trace ---
   at CarsTradeAPI.Features.BuyerOperation.BuyerRepository.ImplementationBuyerRepository.GetAllBuyersAsync() in B:\MyDevelopment\MyRepos\CarsTradeAPI\CarsTradeAPI\Features\BuyerOperation\BuyerRepository\ImplementationBuyerRepository.cs:line 155
   at CarsTradeAPI.Features.BuyerOperation.GetBuyers.GetBuyersQueryHandler.Handle(GetBuyersQuery request, CancellationToken cancellationToken) in B:\MyDevelopment\MyRepos\CarsTradeAPI\CarsTradeAPI\Features\BuyerOperation\GetBuyers\GetBuyersQueryHandler.cs:line 43
2025-10-01 16:16:21.959 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:16:21.961 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 16:16:21.963 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 16:16:21.963 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:16:21.963 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:16:21.964 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:16:21.965 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:16:21.988 +00:00 [INF] Executed action CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI) in 1530.8108ms
2025-10-01 16:16:21.989 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-10-01 16:16:21.991 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 16:16:21.993 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:16:21.994 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 16:16:21.995 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Buyer/GetAllBuyers - 400 null application/json; charset=utf-8 1619.9726ms
2025-10-01 16:17:43.313 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Buyer/CreateBuyer - application/json 222
2025-10-01 16:17:43.339 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Buyer/CreateBuyer'
2025-10-01 16:17:43.340 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)' with route pattern 'api/Buyer/CreateBuyer' is valid for the request path '/api/Buyer/CreateBuyer'
2025-10-01 16:17:43.340 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:17:43.341 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:17:43.341 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:17:43.342 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:17:43.351 +00:00 [INF] Route matched with {action = "CreateBuyer", controller = "Buyer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto]] CreateBuyer(CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand) on controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI).
2025-10-01 16:17:43.352 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:17:43.352 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:17:43.352 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:17:43.353 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:17:43.353 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:17:43.353 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 16:17:43.354 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 16:17:43.373 +00:00 [DBG] Attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' ...
2025-10-01 16:17:43.376 +00:00 [DBG] Attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' using the name '' in request data ...
2025-10-01 16:17:43.377 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:17:43.384 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000011": started reading request body.
2025-10-01 16:17:43.385 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000011": done reading request body.
2025-10-01 16:17:43.395 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'
2025-10-01 16:17:43.395 +00:00 [DBG] Done attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:17:43.396 +00:00 [DBG] Done attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:17:43.396 +00:00 [DBG] Attempting to validate the bound parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' ...
2025-10-01 16:17:43.404 +00:00 [DBG] Done attempting to validate the bound parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:17:43.406 +00:00 [INF] Получен запрос на создание нового покупателя
2025-10-01 16:17:43.429 +00:00 [INF] Начало обработки команды CreateBuyerCommand
2025-10-01 16:17:43.441 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 16:17:43.453 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .AsNoTracking()
    .FirstOrDefault(r => r.Key == __key_0)'
2025-10-01 16:17:43.506 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdempotencyRequest>(
    asyncEnumerable: new SingleQueryingEnumerable<IdempotencyRequest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdempotencyRequest.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdempotencyRequest.CreatedAt (DateTime) Required, 1], [Property: IdempotencyRequest.Key (string) Required MaxLength(100), 2], [Property: IdempotencyRequest.ResourceId (Guid?), 3], [Property: IdempotencyRequest.ResourceType (string) Required MaxLength(50), 4], [Property: IdempotencyRequest.Responsejson (string), 5], [Property: IdempotencyRequest.Status (string) Required MaxLength(50), 6] }
            SELECT TOP(1) i.Id, i.CreatedAt, i.Key, i.ResourceId, i.ResourceType, i.Responsejson, i.Status
            FROM IdempotencyRequests AS i
            WHERE i.Key == @__key_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdempotencyRequest>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 16:17:43.513 +00:00 [DBG] Creating DbConnection.
2025-10-01 16:17:43.513 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 16:17:43.513 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:17:43.514 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:17:43.515 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 16:17:43.515 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:17:43.519 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-01 16:17:43.520 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 16:17:43.563 +00:00 [ERR] Failed executing DbCommand (44ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 16:17:43.563 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:17:43.563 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:17:43.591 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CarsTradeAPI.Data.CarsTradeDbContext'.
Npgsql.PostgresException (0x80004005): 42P01: relation "IdempotencyRequests" does not exist

POSITION: 108
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "IdempotencyRequests" does not exist
    Position: 108
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: relation "IdempotencyRequests" does not exist

POSITION: 108
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "IdempotencyRequests" does not exist
    Position: 108
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-01 16:17:43.725 +00:00 [INF] Executed action CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI) in 371.8736ms
2025-10-01 16:17:43.726 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:17:43.794 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 16:17:43.794 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:17:43.794 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:17:43.795 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Buyer/CreateBuyer - 500 null application/json 506.2183ms
2025-10-01 16:18:09.430 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Buyer/CreateBuyer - application/json 221
2025-10-01 16:18:09.461 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Buyer/CreateBuyer'
2025-10-01 16:18:09.461 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)' with route pattern 'api/Buyer/CreateBuyer' is valid for the request path '/api/Buyer/CreateBuyer'
2025-10-01 16:18:09.462 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:18:09.462 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:18:09.462 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:18:09.463 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:18:09.463 +00:00 [INF] Route matched with {action = "CreateBuyer", controller = "Buyer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto]] CreateBuyer(CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand) on controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI).
2025-10-01 16:18:09.463 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:18:09.463 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:18:09.464 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:18:09.464 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:18:09.464 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:18:09.464 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 16:18:09.465 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 16:18:09.466 +00:00 [DBG] Attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' ...
2025-10-01 16:18:09.466 +00:00 [DBG] Attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' using the name '' in request data ...
2025-10-01 16:18:09.466 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:18:09.467 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000013": started reading request body.
2025-10-01 16:18:09.467 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000013": done reading request body.
2025-10-01 16:18:09.467 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'
2025-10-01 16:18:09.468 +00:00 [DBG] Done attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:18:09.468 +00:00 [DBG] Done attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:18:09.468 +00:00 [DBG] Attempting to validate the bound parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' ...
2025-10-01 16:18:09.468 +00:00 [DBG] Done attempting to validate the bound parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:18:09.469 +00:00 [INF] Получен запрос на создание нового покупателя
2025-10-01 16:18:09.474 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:18:09.474 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 16:18:09.475 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 16:18:09.475 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:18:09.475 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:18:09.475 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:18:09.476 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:18:09.476 +00:00 [INF] Executed action CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI) in 11.8054ms
2025-10-01 16:18:09.476 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:18:09.508 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Buyer/CreateBuyer - 400 null application/json; charset=utf-8 72.1323ms
2025-10-01 16:18:21.603 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Buyer/CreateBuyer - application/json 222
2025-10-01 16:18:21.604 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Buyer/CreateBuyer'
2025-10-01 16:18:21.604 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)' with route pattern 'api/Buyer/CreateBuyer' is valid for the request path '/api/Buyer/CreateBuyer'
2025-10-01 16:18:21.604 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:18:21.605 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:18:21.605 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:18:21.606 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:18:21.606 +00:00 [INF] Route matched with {action = "CreateBuyer", controller = "Buyer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto]] CreateBuyer(CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand) on controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI).
2025-10-01 16:18:21.607 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:18:21.607 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:18:21.607 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:18:21.607 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:18:21.608 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:18:21.608 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 16:18:21.608 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 16:18:21.609 +00:00 [DBG] Attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' ...
2025-10-01 16:18:21.610 +00:00 [DBG] Attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' using the name '' in request data ...
2025-10-01 16:18:21.612 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:18:21.613 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000015": started reading request body.
2025-10-01 16:18:21.613 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000015": done reading request body.
2025-10-01 16:18:21.614 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'
2025-10-01 16:18:21.614 +00:00 [DBG] Done attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:18:21.615 +00:00 [DBG] Done attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:18:21.615 +00:00 [DBG] Attempting to validate the bound parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' ...
2025-10-01 16:18:21.616 +00:00 [DBG] Done attempting to validate the bound parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:18:21.617 +00:00 [INF] Получен запрос на создание нового покупателя
2025-10-01 16:18:21.619 +00:00 [INF] Начало обработки команды CreateBuyerCommand
2025-10-01 16:18:21.651 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 16:18:21.654 +00:00 [DBG] Creating DbConnection.
2025-10-01 16:18:21.655 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 16:18:21.655 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:18:21.656 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:18:21.656 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 16:18:21.656 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:18:21.657 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:18:21.657 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 16:18:21.722 +00:00 [ERR] Failed executing DbCommand (65ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 16:18:21.723 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:18:21.723 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:18:21.724 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CarsTradeAPI.Data.CarsTradeDbContext'.
Npgsql.PostgresException (0x80004005): 42P01: relation "IdempotencyRequests" does not exist

POSITION: 108
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "IdempotencyRequests" does not exist
    Position: 108
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: relation "IdempotencyRequests" does not exist

POSITION: 108
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "IdempotencyRequests" does not exist
    Position: 108
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-01 16:18:21.859 +00:00 [INF] Executed action CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI) in 250.7656ms
2025-10-01 16:18:21.859 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:18:21.902 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 16:18:21.902 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:18:21.902 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:18:21.903 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Buyer/CreateBuyer - 500 null application/json 299.6248ms
2025-10-01 16:19:09.468 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Buyer/CreateBuyer - application/json 227
2025-10-01 16:19:09.476 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Buyer/CreateBuyer'
2025-10-01 16:19:09.476 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)' with route pattern 'api/Buyer/CreateBuyer' is valid for the request path '/api/Buyer/CreateBuyer'
2025-10-01 16:19:09.476 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:19:09.483 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:19:09.484 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:19:09.484 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:19:09.484 +00:00 [INF] Route matched with {action = "CreateBuyer", controller = "Buyer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto]] CreateBuyer(CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand) on controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI).
2025-10-01 16:19:09.485 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:19:09.485 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:19:09.485 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:19:09.485 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:19:09.486 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:19:09.486 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 16:19:09.486 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 16:19:09.487 +00:00 [DBG] Attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' ...
2025-10-01 16:19:09.487 +00:00 [DBG] Attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' using the name '' in request data ...
2025-10-01 16:19:09.487 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:19:09.488 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000017": started reading request body.
2025-10-01 16:19:09.488 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000017": done reading request body.
2025-10-01 16:19:09.488 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'
2025-10-01 16:19:09.489 +00:00 [DBG] Done attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:19:09.489 +00:00 [DBG] Done attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:19:09.489 +00:00 [DBG] Attempting to validate the bound parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' ...
2025-10-01 16:19:09.490 +00:00 [DBG] Done attempting to validate the bound parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 16:19:09.490 +00:00 [INF] Получен запрос на создание нового покупателя
2025-10-01 16:19:09.493 +00:00 [INF] Начало обработки команды CreateBuyerCommand
2025-10-01 16:19:09.494 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 16:19:09.495 +00:00 [DBG] Creating DbConnection.
2025-10-01 16:19:09.495 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 16:19:09.496 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:19:09.496 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:19:09.496 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 16:19:09.496 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:19:09.497 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:19:09.497 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 16:19:09.544 +00:00 [ERR] Failed executing DbCommand (47ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 16:19:09.545 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:19:09.545 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:19:09.546 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CarsTradeAPI.Data.CarsTradeDbContext'.
Npgsql.PostgresException (0x80004005): 42P01: relation "IdempotencyRequests" does not exist

POSITION: 108
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "IdempotencyRequests" does not exist
    Position: 108
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: relation "IdempotencyRequests" does not exist

POSITION: 108
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "IdempotencyRequests" does not exist
    Position: 108
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-01 16:19:09.673 +00:00 [INF] Executed action CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI) in 186.8392ms
2025-10-01 16:19:09.673 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 16:19:09.719 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 16:19:09.719 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:19:09.719 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:19:09.720 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Buyer/CreateBuyer - 500 null application/json 251.7217ms
2025-10-01 16:20:46.536 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 419
2025-10-01 16:20:46.567 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:20:46.568 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:20:46.568 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:20:46.569 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:20:46.569 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:20:46.569 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:20:46.573 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:20:46.573 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:20:46.573 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:20:46.573 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:20:46.574 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:20:46.574 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:20:46.574 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:20:46.575 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:20:46.575 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:20:46.576 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:20:46.576 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:20:46.586 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000019": started reading request body.
2025-10-01 16:20:46.587 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000019": done reading request body.
2025-10-01 16:20:46.600 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:20:46.600 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:20:46.601 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:20:46.601 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:20:46.608 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:20:46.609 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:20:46.620 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:20:46.620 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:20:46.620 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:20:46.621 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:20:46.621 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:20:46.621 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:20:46.622 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 47.4483ms
2025-10-01 16:20:46.622 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:20:46.623 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 86.6286ms
2025-10-01 16:21:03.734 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 421
2025-10-01 16:21:03.768 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:21:03.769 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:21:03.769 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:21:03.769 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:21:03.770 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:21:03.770 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:21:03.770 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:21:03.770 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:21:03.771 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:21:03.771 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:21:03.771 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:21:03.771 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:21:03.772 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:21:03.772 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:21:03.773 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:21:03.773 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:21:03.773 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:21:03.774 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000001B": started reading request body.
2025-10-01 16:21:03.774 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000001B": done reading request body.
2025-10-01 16:21:03.774 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:21:03.775 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:21:03.775 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:21:03.775 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:21:03.776 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:21:03.776 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:21:03.777 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:21:03.777 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:21:03.777 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:21:03.777 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:21:03.778 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:21:03.778 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:21:03.778 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 6.6217ms
2025-10-01 16:21:03.779 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:21:03.779 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 45.2185ms
2025-10-01 16:21:43.172 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 421
2025-10-01 16:21:43.199 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:21:43.200 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:21:43.200 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:21:43.200 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:21:43.201 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:21:43.201 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:21:43.202 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:21:43.202 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:21:43.202 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:21:43.203 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:21:43.203 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:21:43.203 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:21:43.203 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:21:43.203 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:21:43.204 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:21:43.204 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:21:43.204 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:21:43.205 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000001D": started reading request body.
2025-10-01 16:21:43.205 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000001D": done reading request body.
2025-10-01 16:21:43.210 +00:00 [DBG] JSON input formatter threw an exception: '3' is an invalid start of a property name. Expected a '"'. Path: $.carEngine | LineNumber: 12 | BytePositionInLine: 24.
2025-10-01 16:21:43.210 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:21:43.210 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:21:43.211 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:21:43.212 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:21:43.213 +00:00 [DBG] The request has model state errors, returning an error response.
2025-10-01 16:21:43.215 +00:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-10-01 16:21:43.215 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:21:43.215 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:21:43.216 +00:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-10-01 16:21:43.216 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-10-01 16:21:43.216 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 16:21:43.234 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 30.469ms
2025-10-01 16:21:43.234 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:21:43.235 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/problem+json; charset=utf-8 70.0142ms
2025-10-01 16:21:59.102 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 422
2025-10-01 16:21:59.105 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:21:59.106 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:21:59.106 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:21:59.107 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:21:59.107 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:21:59.107 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:21:59.108 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:21:59.108 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:21:59.108 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:21:59.109 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:21:59.109 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:21:59.109 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:21:59.109 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:21:59.110 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:21:59.110 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:21:59.110 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:21:59.110 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:21:59.111 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000001F": started reading request body.
2025-10-01 16:21:59.111 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000001F": done reading request body.
2025-10-01 16:21:59.112 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:21:59.112 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:21:59.112 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:21:59.113 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:21:59.113 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:21:59.113 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:21:59.115 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:21:59.115 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:21:59.115 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:21:59.115 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:21:59.116 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:21:59.116 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:21:59.116 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 6.924ms
2025-10-01 16:21:59.117 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:21:59.117 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 14.957ms
2025-10-01 16:22:27.306 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 419
2025-10-01 16:22:27.314 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:22:27.323 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:22:27.323 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:22:27.324 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:22:27.324 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:22:27.324 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:22:27.325 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:22:27.325 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:22:27.325 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:22:27.325 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:22:27.326 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:22:27.326 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:22:27.326 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:22:27.327 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:22:27.327 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:22:27.328 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:22:27.328 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:22:27.329 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000021": started reading request body.
2025-10-01 16:22:27.329 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000021": done reading request body.
2025-10-01 16:22:27.329 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:22:27.329 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:22:27.330 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:22:27.330 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:22:27.330 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:22:27.331 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:22:27.331 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:22:27.331 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:22:27.332 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:22:27.332 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:22:27.332 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:22:27.332 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:22:27.333 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 6.4252ms
2025-10-01 16:22:27.334 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:22:27.334 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 28.2319ms
2025-10-01 16:23:23.080 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 417
2025-10-01 16:23:23.102 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:23:23.116 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:23:23.116 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:23:23.117 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:23:23.117 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:23:23.117 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:23:23.118 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:23:23.119 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:23:23.119 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:23:23.119 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:23:23.119 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:23:23.120 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:23:23.120 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:23:23.120 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:23:23.121 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:23:23.121 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:23:23.121 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:23:23.122 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000023": started reading request body.
2025-10-01 16:23:23.122 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000023": done reading request body.
2025-10-01 16:23:23.122 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:23:23.123 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:23:23.123 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:23:23.123 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:23:23.124 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:23:23.124 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:23:23.125 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:23:23.125 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:23:23.125 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:23:23.126 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:23:23.126 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:23:23.127 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:23:23.127 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 6.9833ms
2025-10-01 16:23:23.128 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:23:23.128 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 47.4481ms
2025-10-01 16:23:56.254 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 417
2025-10-01 16:23:56.255 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:23:56.269 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:23:56.269 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:23:56.270 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:23:56.270 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:23:56.270 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:23:56.271 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:23:56.271 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:23:56.271 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:23:56.272 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:23:56.272 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:23:56.272 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:23:56.272 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:23:56.273 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:23:56.273 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:23:56.274 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:23:56.274 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:23:56.275 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000025": started reading request body.
2025-10-01 16:23:56.275 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000025": done reading request body.
2025-10-01 16:23:56.276 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:23:56.276 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:23:56.276 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:23:56.277 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:23:56.277 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:23:56.277 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:23:56.278 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:23:56.278 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:23:56.278 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:23:56.279 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:23:56.280 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:23:56.280 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:23:56.281 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 8.4674ms
2025-10-01 16:23:56.281 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:23:56.282 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 27.9647ms
2025-10-01 16:24:23.225 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 415
2025-10-01 16:24:23.226 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:24:23.226 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:24:23.227 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:24:23.227 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:24:23.227 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:24:23.228 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:24:23.228 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:24:23.228 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:24:23.228 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:24:23.229 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:24:23.229 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:24:23.229 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:24:23.229 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:24:23.230 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:24:23.230 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:24:23.230 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:24:23.231 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:24:23.231 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000027": started reading request body.
2025-10-01 16:24:23.231 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000027": done reading request body.
2025-10-01 16:24:23.232 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:24:23.232 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:24:23.232 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:24:23.233 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:24:23.233 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:24:23.233 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:24:23.234 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:24:23.234 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:24:23.235 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:24:23.235 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:24:23.235 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:24:23.235 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:24:23.236 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 7.1167ms
2025-10-01 16:24:23.237 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:24:23.237 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 18.9653ms
2025-10-01 16:24:40.760 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 409
2025-10-01 16:24:40.760 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:24:40.761 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:24:40.761 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:24:40.761 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:24:40.762 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:24:40.762 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:24:40.762 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:24:40.763 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:24:40.763 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:24:40.763 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:24:40.764 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:24:40.764 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:24:40.764 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:24:40.765 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:24:40.765 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:24:40.765 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:24:40.766 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:24:40.766 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000029": started reading request body.
2025-10-01 16:24:40.766 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000029": done reading request body.
2025-10-01 16:24:40.768 +00:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to CarsTradeAPI.Entities.Enums.FuelType. Path: $.carEngine.fuelType | LineNumber: 13 | BytePositionInLine: 18.
2025-10-01 16:24:40.769 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:24:40.769 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:24:40.769 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:24:40.769 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:24:40.770 +00:00 [DBG] The request has model state errors, returning an error response.
2025-10-01 16:24:40.770 +00:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-10-01 16:24:40.770 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:24:40.771 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:24:40.771 +00:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-10-01 16:24:40.771 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-10-01 16:24:40.771 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 16:24:40.772 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 7.4273ms
2025-10-01 16:24:40.772 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:24:40.773 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/problem+json; charset=utf-8 12.5036ms
2025-10-01 16:25:02.586 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 424
2025-10-01 16:25:02.593 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:25:02.600 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:25:02.600 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:25:02.600 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:25:02.601 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:25:02.601 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:25:02.601 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:25:02.602 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:25:02.602 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:25:02.603 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:25:02.603 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:25:02.603 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:25:02.603 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:25:02.604 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:25:02.604 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:25:02.604 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:25:02.605 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:25:02.605 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000002B": started reading request body.
2025-10-01 16:25:02.605 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000002B": done reading request body.
2025-10-01 16:25:02.607 +00:00 [DBG] JSON input formatter threw an exception: The JSON object contains a trailing comma at the end which is not supported in this mode. Change the reader options. Path: $.carEngine | LineNumber: 15 | BytePositionInLine: 2.
2025-10-01 16:25:02.607 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:25:02.607 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:25:02.607 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:25:02.607 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:25:02.608 +00:00 [DBG] The request has model state errors, returning an error response.
2025-10-01 16:25:02.608 +00:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2025-10-01 16:25:02.609 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:25:02.609 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:25:02.609 +00:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2025-10-01 16:25:02.610 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2025-10-01 16:25:02.610 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-10-01 16:25:02.610 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 7.0213ms
2025-10-01 16:25:02.611 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:25:02.611 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/problem+json; charset=utf-8 25.3687ms
2025-10-01 16:25:04.925 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 423
2025-10-01 16:25:04.926 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:25:04.926 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:25:04.926 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:25:04.927 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:25:04.927 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:25:04.927 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:25:04.928 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:25:04.928 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:25:04.928 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:25:04.929 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:25:04.929 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:25:04.929 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:25:04.930 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:25:04.930 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:25:04.931 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:25:04.931 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:25:04.931 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:25:04.932 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000002D": started reading request body.
2025-10-01 16:25:04.932 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000002D": done reading request body.
2025-10-01 16:25:04.932 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:25:04.932 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:25:04.933 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:25:04.933 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:25:04.933 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:25:04.934 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:25:04.934 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:25:04.934 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:25:04.935 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:25:04.935 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:25:04.936 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:25:04.936 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:25:04.936 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 6.5416ms
2025-10-01 16:25:04.936 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:25:04.937 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 11.5572ms
2025-10-01 16:25:51.641 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 425
2025-10-01 16:25:51.643 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:25:51.684 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:25:51.690 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:25:51.697 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:25:51.697 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:25:51.697 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:25:51.698 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:25:51.698 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:25:51.698 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:25:51.699 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:25:51.699 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:25:51.699 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:25:51.700 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:25:51.700 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:25:51.700 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:25:51.700 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:25:51.701 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:25:51.701 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000002F": started reading request body.
2025-10-01 16:25:51.701 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:0000002F": done reading request body.
2025-10-01 16:25:51.701 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:25:51.702 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:25:51.702 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:25:51.702 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:25:51.702 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:25:51.703 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:25:51.703 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:25:51.704 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:25:51.704 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:25:51.704 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:25:51.704 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:25:51.705 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:25:51.705 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 5.6152ms
2025-10-01 16:25:51.705 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:25:51.706 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 64.689ms
2025-10-01 16:26:01.888 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 423
2025-10-01 16:26:01.889 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:26:01.889 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:26:01.889 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:01.890 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:26:01.890 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:26:01.891 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:01.891 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:26:01.891 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:26:01.892 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:26:01.892 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:26:01.892 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:26:01.893 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:26:01.893 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:26:01.894 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:26:01.894 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:26:01.894 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:26:01.895 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:26:01.897 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000031": started reading request body.
2025-10-01 16:26:01.897 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000031": done reading request body.
2025-10-01 16:26:01.897 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:26:01.898 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:01.898 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:01.898 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:26:01.899 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:01.899 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:26:01.899 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:26:01.900 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:26:01.900 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:26:01.900 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:26:01.900 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:26:01.901 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:26:01.901 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 7.7313ms
2025-10-01 16:26:01.901 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:01.902 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 13.7401ms
2025-10-01 16:26:06.896 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 424
2025-10-01 16:26:06.897 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:26:06.897 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:26:06.897 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:06.898 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:26:06.898 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:26:06.899 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:06.899 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:26:06.899 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:26:06.900 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:26:06.900 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:26:06.900 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:26:06.901 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:26:06.901 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:26:06.901 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:26:06.902 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:26:06.902 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:26:06.902 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:26:06.902 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000033": started reading request body.
2025-10-01 16:26:06.903 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000033": done reading request body.
2025-10-01 16:26:06.903 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:26:06.903 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:06.904 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:06.904 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:26:06.905 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:06.905 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:26:06.905 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:26:06.906 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:26:06.906 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:26:06.906 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:26:06.906 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:26:06.907 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:26:06.907 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 6.401ms
2025-10-01 16:26:06.908 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:06.909 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 12.2302ms
2025-10-01 16:26:11.957 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 426
2025-10-01 16:26:11.958 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:26:11.958 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:26:11.959 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:11.959 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:26:11.959 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:26:11.960 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:11.960 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:26:11.960 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:26:11.961 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:26:11.961 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:26:11.961 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:26:11.961 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:26:11.962 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:26:11.962 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:26:11.962 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:26:11.963 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:26:11.963 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:26:11.963 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000035": started reading request body.
2025-10-01 16:26:11.963 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000035": done reading request body.
2025-10-01 16:26:11.964 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:26:11.964 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:11.964 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:11.965 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:26:11.965 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:11.965 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:26:11.966 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:26:11.966 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:26:11.966 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:26:11.967 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:26:11.967 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:26:11.967 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:26:11.968 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 5.831ms
2025-10-01 16:26:11.968 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:11.968 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 11.1493ms
2025-10-01 16:26:22.540 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 423
2025-10-01 16:26:22.541 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:26:22.542 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:26:22.542 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:22.542 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:26:22.543 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:26:22.543 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:22.544 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:26:22.544 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:26:22.544 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:26:22.545 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:26:22.545 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:26:22.545 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:26:22.546 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:26:22.546 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:26:22.546 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:26:22.547 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:26:22.547 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:26:22.547 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000037": started reading request body.
2025-10-01 16:26:22.547 +00:00 [DBG] Connection id "0HNG10N6VQQ21", Request id "0HNG10N6VQQ21:00000037": done reading request body.
2025-10-01 16:26:22.548 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:26:22.548 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:22.548 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:22.549 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:26:22.549 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:26:22.550 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:26:22.550 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:26:22.551 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:26:22.551 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:26:22.551 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:26:22.551 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:26:22.552 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:26:22.552 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 6.4935ms
2025-10-01 16:26:22.552 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:26:22.553 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 400 null application/json; charset=utf-8 12.3268ms
2025-10-01 16:26:33.035 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - null null
2025-10-01 16:26:33.036 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 16:26:33.036 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/GetCarModels/All' is valid for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 16:26:33.037 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 16:26:33.044 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:26:33.051 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:26:33.051 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 16:26:33.054 +00:00 [INF] Route matched with {action = "GetCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto]]] GetCarModel() on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:26:33.054 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:26:33.055 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:26:33.055 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:26:33.055 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:26:33.055 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:26:33.056 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:26:33.056 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:26:33.057 +00:00 [INF] Начало обработки запроса GetCarModel для получения всех моделей
2025-10-01 16:26:33.061 +00:00 [INF] Начало обработки команды GetCarModelQuery
2025-10-01 16:26:33.129 +00:00 [INF] Этап получения всех CarModels в репозитории
2025-10-01 16:26:33.130 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 16:26:33.131 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()'
2025-10-01 16:26:33.135 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CarModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
        SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
        FROM CarModels AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-10-01 16:26:33.136 +00:00 [DBG] Creating DbConnection.
2025-10-01 16:26:33.136 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 16:26:33.136 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:26:33.168 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:26:33.169 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 16:26:33.169 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:26:33.169 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:26:33.170 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 16:26:33.173 +00:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 16:26:33.173 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:26:33.173 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:26:33.175 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CarsTradeAPI.Data.CarsTradeDbContext'.
Npgsql.PostgresException (0x80004005): 42P01: relation "CarModels" does not exist

POSITION: 159
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "CarModels" does not exist
    Position: 159
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: relation "CarModels" does not exist

POSITION: 159
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "CarModels" does not exist
    Position: 159
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-01 16:26:33.214 +00:00 [ERR] Ошибка при попытке получить все модели машин
Npgsql.PostgresException (0x80004005): 42P01: relation "CarModels" does not exist

POSITION: 159
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CarsTradeAPI.Features.CarModelOperation.CarModelRepository.ImplementationCarModelRepository.GetCarModelsAsync() in B:\MyDevelopment\MyRepos\CarsTradeAPI\CarsTradeAPI\Features\CarModelOperation\CarModelRepository\ImplementationCarModelRepository.cs:line 114
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "CarModels" does not exist
    Position: 159
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-01 16:26:33.275 +00:00 [ERR] Ошибка при получении моделей автомобилей
System.Exception: Ошибка при попытке получить все модели машин
 ---> Npgsql.PostgresException (0x80004005): 42P01: relation "CarModels" does not exist

POSITION: 159
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CarsTradeAPI.Features.CarModelOperation.CarModelRepository.ImplementationCarModelRepository.GetCarModelsAsync() in B:\MyDevelopment\MyRepos\CarsTradeAPI\CarsTradeAPI\Features\CarModelOperation\CarModelRepository\ImplementationCarModelRepository.cs:line 114
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "CarModels" does not exist
    Position: 159
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
   --- End of inner exception stack trace ---
   at CarsTradeAPI.Features.CarModelOperation.CarModelRepository.ImplementationCarModelRepository.GetCarModelsAsync() in B:\MyDevelopment\MyRepos\CarsTradeAPI\CarsTradeAPI\Features\CarModelOperation\CarModelRepository\ImplementationCarModelRepository.cs:line 121
   at CarsTradeAPI.Features.CarModelOperation.GetCarModel.GetCarModelQueryHandler.Handle(GetCarModelQuery request, CancellationToken cancellationToken) in B:\MyDevelopment\MyRepos\CarsTradeAPI\CarsTradeAPI\Features\CarModelOperation\GetCarModel\GetCarModelQueryHandler.cs:line 46
2025-10-01 16:26:33.278 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:26:33.279 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 16:26:33.279 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 16:26:33.279 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:26:33.279 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:26:33.280 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:26:33.280 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 16:26:33.280 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI) in 224.2036ms
2025-10-01 16:26:33.281 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 16:26:33.281 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 16:26:33.281 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:26:33.282 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:26:33.283 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - 400 null application/json; charset=utf-8 248.1356ms
2025-10-01 16:30:13.101 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-10-01 16:30:13.204 +00:00 [DBG] Hosting starting
2025-10-01 16:30:13.254 +00:00 [WRN] Using an in-memory repository. Keys will not be persisted to storage.
2025-10-01 16:30:13.255 +00:00 [WRN] Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.
2025-10-01 16:30:13.264 +00:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2025-10-01 16:30:13.264 +00:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2025-10-01 16:30:13.267 +00:00 [INF] Creating key {0a2540cb-2957-4516-934b-cf30760eedff} with creation date 2025-10-01 16:30:13Z, activation date 2025-10-01 16:30:13Z, and expiration date 2025-12-30 16:30:13Z.
2025-10-01 16:30:13.292 +00:00 [DBG] Descriptor deserializer type for key {0a2540cb-2957-4516-934b-cf30760eedff} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2025-10-01 16:30:13.295 +00:00 [DBG] No key escrow sink found. Not writing key {0a2540cb-2957-4516-934b-cf30760eedff} to escrow.
2025-10-01 16:30:13.295 +00:00 [WRN] No XML encryptor configured. Key {0a2540cb-2957-4516-934b-cf30760eedff} may be persisted to storage in unencrypted form.
2025-10-01 16:30:13.296 +00:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2025-10-01 16:30:13.297 +00:00 [DBG] Found key {0a2540cb-2957-4516-934b-cf30760eedff}.
2025-10-01 16:30:13.303 +00:00 [DBG] Considering key {0a2540cb-2957-4516-934b-cf30760eedff} with expiration date 2025-12-30 16:30:13Z as default key.
2025-10-01 16:30:13.307 +00:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-01 16:30:13.309 +00:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-10-01 16:30:13.310 +00:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-10-01 16:30:13.313 +00:00 [DBG] Using key {0a2540cb-2957-4516-934b-cf30760eedff} as the default key.
2025-10-01 16:30:13.313 +00:00 [DBG] Key ring with default key {0a2540cb-2957-4516-934b-cf30760eedff} was loaded during application startup.
2025-10-01 16:30:13.557 +00:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 2AE5B9E8B7B0EDFD86FD709A56EA7C92E2569E52)
2025-10-01 16:30:13.838 +00:00 [INF] Now listening on: http://[::]:8080
2025-10-01 16:30:13.839 +00:00 [INF] Now listening on: https://[::]:8081
2025-10-01 16:30:13.839 +00:00 [DBG] Loaded hosting startup assembly CarsTradeAPI
2025-10-01 16:30:13.839 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 16:30:13.840 +00:00 [INF] Hosting environment: Development
2025-10-01 16:30:13.840 +00:00 [INF] Content root path: /app
2025-10-01 16:30:13.840 +00:00 [DBG] Hosting started
2025-10-01 16:30:13.998 +00:00 [DBG] Connection id "0HNG10V67FAFS" accepted.
2025-10-01 16:30:13.999 +00:00 [DBG] Connection id "0HNG10V67FAFS" started.
2025-10-01 16:30:14.023 +00:00 [DBG] Connection 0HNG10V67FAFS established using the following protocol: "Tls13"
2025-10-01 16:30:14.083 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/index.html - null null
2025-10-01 16:30:14.085 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-01 16:30:14.097 +00:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-10-01 16:30:14.098 +00:00 [DBG] Request did not match any endpoints
2025-10-01 16:30:14.214 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:30:14.302 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/index.html - 200 null text/html;charset=utf-8 219.8523ms
2025-10-01 16:30:14.440 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - null null
2025-10-01 16:30:14.440 +00:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-10-01 16:30:14.441 +00:00 [DBG] Request did not match any endpoints
2025-10-01 16:30:14.442 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:30:14.547 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 107.0235ms
2025-10-01 16:31:42.005 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 418
2025-10-01 16:31:42.041 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:31:42.044 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:31:42.044 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:31:42.047 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:31:42.049 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:31:42.050 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:31:42.070 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:31:42.071 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:31:42.071 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:31:42.073 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:31:42.073 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:31:42.073 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:31:42.075 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:31:42.078 +00:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-01 16:31:42.079 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:31:42.093 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:31:42.095 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:31:42.096 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:31:42.117 +00:00 [DBG] Connection id "0HNG10V67FAFS", Request id "0HNG10V67FAFS:00000005": started reading request body.
2025-10-01 16:31:42.117 +00:00 [DBG] Connection id "0HNG10V67FAFS", Request id "0HNG10V67FAFS:00000005": done reading request body.
2025-10-01 16:31:42.136 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:31:42.137 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:31:42.137 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:31:42.137 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:31:42.146 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:31:42.148 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:31:42.369 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-01 16:31:42.384 +00:00 [INF] Начало обработки команды CreateCarModelCommand
2025-10-01 16:31:42.831 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 16:31:42.875 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .AsNoTracking()
    .FirstOrDefault(r => r.Key == __key_0)'
2025-10-01 16:31:43.002 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdempotencyRequest>(
    asyncEnumerable: new SingleQueryingEnumerable<IdempotencyRequest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdempotencyRequest.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdempotencyRequest.CreatedAt (DateTime) Required, 1], [Property: IdempotencyRequest.Key (string) Required MaxLength(100), 2], [Property: IdempotencyRequest.ResourceId (Guid?), 3], [Property: IdempotencyRequest.ResourceType (string) Required MaxLength(50), 4], [Property: IdempotencyRequest.Responsejson (string), 5], [Property: IdempotencyRequest.Status (string) Required MaxLength(50), 6] }
            SELECT TOP(1) i.Id, i.CreatedAt, i.Key, i.ResourceId, i.ResourceType, i.Responsejson, i.Status
            FROM IdempotencyRequests AS i
            WHERE i.Key == @__key_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdempotencyRequest>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 16:31:43.024 +00:00 [DBG] Creating DbConnection.
2025-10-01 16:31:43.028 +00:00 [DBG] Created DbConnection. (2ms).
2025-10-01 16:31:43.030 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:31:43.180 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:31:43.183 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 16:31:43.187 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-10-01 16:31:43.191 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-10-01 16:31:43.195 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 16:31:43.250 +00:00 [ERR] Failed executing DbCommand (55ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 16:31:43.253 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:31:43.257 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (2ms).
2025-10-01 16:31:43.292 +00:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CarsTradeAPI.Data.CarsTradeDbContext'.
Npgsql.PostgresException (0x80004005): 42P01: relation "IdempotencyRequests" does not exist

POSITION: 108
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "IdempotencyRequests" does not exist
    Position: 108
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: relation "IdempotencyRequests" does not exist

POSITION: 108
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "IdempotencyRequests" does not exist
    Position: 108
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-01 16:31:43.494 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 1418.1561ms
2025-10-01 16:31:43.495 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:31:43.574 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 16:31:43.577 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:31:43.579 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 16:31:43.579 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 500 null application/json 1574.1916ms
2025-10-01 16:42:35.820 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-01 16:42:36.378 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 16:42:36.388 +00:00 [DBG] Creating DbConnection.
2025-10-01 16:42:36.391 +00:00 [DBG] Created DbConnection. (2ms).
2025-10-01 16:42:36.402 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.436 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 16:42:36.438 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.441 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:36.511 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-10-01 16:42:36.533 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.536 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.543 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (6ms).
2025-10-01 16:42:36.548 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 16:42:36.549 +00:00 [DBG] Creating DbConnection.
2025-10-01 16:42:36.549 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 16:42:36.564 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (13ms).
2025-10-01 16:42:36.565 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (16ms).
2025-10-01 16:42:36.565 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.657 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.661 +00:00 [DBG] Hosting starting
2025-10-01 16:42:36.662 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 16:42:36.698 +00:00 [WRN] Using an in-memory repository. Keys will not be persisted to storage.
2025-10-01 16:42:36.698 +00:00 [WRN] Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.
2025-10-01 16:42:36.708 +00:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2025-10-01 16:42:36.709 +00:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2025-10-01 16:42:36.712 +00:00 [INF] Creating key {db314bfb-5471-428c-b066-d2e3660179f2} with creation date 2025-10-01 16:42:36Z, activation date 2025-10-01 16:42:36Z, and expiration date 2025-12-30 16:42:36Z.
2025-10-01 16:42:36.717 +00:00 [DBG] Descriptor deserializer type for key {db314bfb-5471-428c-b066-d2e3660179f2} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2025-10-01 16:42:36.720 +00:00 [DBG] No key escrow sink found. Not writing key {db314bfb-5471-428c-b066-d2e3660179f2} to escrow.
2025-10-01 16:42:36.721 +00:00 [WRN] No XML encryptor configured. Key {db314bfb-5471-428c-b066-d2e3660179f2} may be persisted to storage in unencrypted form.
2025-10-01 16:42:36.722 +00:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2025-10-01 16:42:36.723 +00:00 [DBG] Found key {db314bfb-5471-428c-b066-d2e3660179f2}.
2025-10-01 16:42:36.740 +00:00 [DBG] Considering key {db314bfb-5471-428c-b066-d2e3660179f2} with expiration date 2025-12-30 16:42:36Z as default key.
2025-10-01 16:42:36.744 +00:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-01 16:42:36.747 +00:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-10-01 16:42:36.747 +00:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-10-01 16:42:36.749 +00:00 [DBG] Using key {db314bfb-5471-428c-b066-d2e3660179f2} as the default key.
2025-10-01 16:42:36.750 +00:00 [DBG] Key ring with default key {db314bfb-5471-428c-b066-d2e3660179f2} was loaded during application startup.
2025-10-01 16:42:36.771 +00:00 [INF] Executed DbCommand (107ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 16:42:36.783 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.795 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (12ms).
2025-10-01 16:42:36.797 +00:00 [DBG] Migrating using database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.798 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.806 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.806 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.806 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:36.817 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 16:42:36.818 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 16:42:36.818 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 16:42:36.818 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.819 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.819 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 16:42:36.833 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 16:42:36.833 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.833 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:36.834 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.842 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.842 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.843 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:36.882 +00:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 2AE5B9E8B7B0EDFD86FD709A56EA7C92E2569E52)
2025-10-01 16:42:36.903 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:36.909 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (6ms).
2025-10-01 16:42:36.909 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (6ms).
2025-10-01 16:42:36.909 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.910 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.910 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-10-01 16:42:36.934 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-10-01 16:42:36.934 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.934 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:36.935 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.943 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.943 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.944 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:36.944 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 16:42:36.944 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 16:42:36.945 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 16:42:36.945 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.945 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.945 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 16:42:36.948 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 16:42:36.948 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.949 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:36.952 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.952 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.952 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 16:42:36.953 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:42:36.953 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:42:36.953 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 16:42:36.976 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 16:42:36.979 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.981 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 3ms reading results.
2025-10-01 16:42:36.981 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:36.981 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:36.989 +00:00 [INF] Applying migration '20250730002947_InitialCreate'.
2025-10-01 16:42:37.019 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.020 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.023 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-01 16:42:37.026 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-10-01 16:42:37.027 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.027 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.028 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.028 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Buyers" (
    buyer_id uuid NOT NULL,
    buyer_name text NOT NULL,
    buyer_surname text NOT NULL,
    buyer_middlename text,
    buyer_email text,
    buyer_created_date timestamp with time zone NOT NULL,
    phone_number text NOT NULL,
    buyer_login text NOT NULL,
    buyer_password character varying(260) NOT NULL,
    buyer_adress text NOT NULL,
    CONSTRAINT "PK_Buyers" PRIMARY KEY (buyer_id)
);
2025-10-01 16:42:37.032 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Buyers" (
    buyer_id uuid NOT NULL,
    buyer_name text NOT NULL,
    buyer_surname text NOT NULL,
    buyer_middlename text,
    buyer_email text,
    buyer_created_date timestamp with time zone NOT NULL,
    phone_number text NOT NULL,
    buyer_login text NOT NULL,
    buyer_password character varying(260) NOT NULL,
    buyer_adress text NOT NULL,
    CONSTRAINT "PK_Buyers" PRIMARY KEY (buyer_id)
);
2025-10-01 16:42:37.032 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.033 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.033 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.033 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CarModels" (
    car_id uuid NOT NULL,
    car_manufacturer text NOT NULL,
    car_model text NOT NULL,
    car_configuration jsonb NOT NULL,
    car_country text NOT NULL,
    "car_productionDateTime" timestamp with time zone NOT NULL,
    car_engine jsonb,
    car_color text NOT NULL,
    car_price numeric NOT NULL,
    CONSTRAINT "PK_CarModels" PRIMARY KEY (car_id)
);
2025-10-01 16:42:37.056 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CarModels" (
    car_id uuid NOT NULL,
    car_manufacturer text NOT NULL,
    car_model text NOT NULL,
    car_configuration jsonb NOT NULL,
    car_country text NOT NULL,
    "car_productionDateTime" timestamp with time zone NOT NULL,
    car_engine jsonb,
    car_color text NOT NULL,
    car_price numeric NOT NULL,
    CONSTRAINT "PK_CarModels" PRIMARY KEY (car_id)
);
2025-10-01 16:42:37.056 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.057 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.057 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.058 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Employees" (
    employee_id uuid NOT NULL,
    employee_name text NOT NULL,
    employee_surname text NOT NULL,
    employee_middlename text,
    employee_age bigint NOT NULL,
    employee_sellcounter bigint,
    employee_login text NOT NULL,
    employee_password character varying(260) NOT NULL,
    CONSTRAINT "PK_Employees" PRIMARY KEY (employee_id)
);
2025-10-01 16:42:37.061 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Employees" (
    employee_id uuid NOT NULL,
    employee_name text NOT NULL,
    employee_surname text NOT NULL,
    employee_middlename text,
    employee_age bigint NOT NULL,
    employee_sellcounter bigint,
    employee_login text NOT NULL,
    employee_password character varying(260) NOT NULL,
    CONSTRAINT "PK_Employees" PRIMARY KEY (employee_id)
);
2025-10-01 16:42:37.061 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.061 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.062 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.063 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CarInventories" (
    inventory_id uuid NOT NULL,
    car_model_id uuid NOT NULL,
    quantity bigint NOT NULL,
    location text NOT NULL,
    last_updated timestamp with time zone NOT NULL,
    CONSTRAINT "PK_CarInventories" PRIMARY KEY (inventory_id),
    CONSTRAINT "FK_CarInventories_CarModels_car_model_id" FOREIGN KEY (car_model_id) REFERENCES "CarModels" (car_id) ON DELETE CASCADE
);
2025-10-01 16:42:37.068 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "CarInventories" (
    inventory_id uuid NOT NULL,
    car_model_id uuid NOT NULL,
    quantity bigint NOT NULL,
    location text NOT NULL,
    last_updated timestamp with time zone NOT NULL,
    CONSTRAINT "PK_CarInventories" PRIMARY KEY (inventory_id),
    CONSTRAINT "FK_CarInventories_CarModels_car_model_id" FOREIGN KEY (car_model_id) REFERENCES "CarModels" (car_id) ON DELETE CASCADE
);
2025-10-01 16:42:37.068 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.069 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.069 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.069 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    order_id uuid NOT NULL,
    order_create_date timestamp with time zone NOT NULL,
    order_completion_date timestamp with time zone,
    order_price numeric NOT NULL,
    order_delivery_address jsonb NOT NULL,
    "BuyerId" uuid NOT NULL,
    "EmployeeId" uuid NOT NULL,
    CONSTRAINT "PK_Orders" PRIMARY KEY (order_id),
    CONSTRAINT "FK_Orders_Buyers_BuyerId" FOREIGN KEY ("BuyerId") REFERENCES "Buyers" (buyer_id) ON DELETE RESTRICT,
    CONSTRAINT "FK_Orders_Employees_EmployeeId" FOREIGN KEY ("EmployeeId") REFERENCES "Employees" (employee_id) ON DELETE RESTRICT
);
2025-10-01 16:42:37.092 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Orders" (
    order_id uuid NOT NULL,
    order_create_date timestamp with time zone NOT NULL,
    order_completion_date timestamp with time zone,
    order_price numeric NOT NULL,
    order_delivery_address jsonb NOT NULL,
    "BuyerId" uuid NOT NULL,
    "EmployeeId" uuid NOT NULL,
    CONSTRAINT "PK_Orders" PRIMARY KEY (order_id),
    CONSTRAINT "FK_Orders_Buyers_BuyerId" FOREIGN KEY ("BuyerId") REFERENCES "Buyers" (buyer_id) ON DELETE RESTRICT,
    CONSTRAINT "FK_Orders_Employees_EmployeeId" FOREIGN KEY ("EmployeeId") REFERENCES "Employees" (employee_id) ON DELETE RESTRICT
);
2025-10-01 16:42:37.092 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.092 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.093 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.093 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OrderItems" (
    orderitem_id uuid NOT NULL,
    order_quantity bigint NOT NULL,
    unit_price numeric NOT NULL,
    comments text,
    "OrderId" uuid NOT NULL,
    "CarModelId" uuid NOT NULL,
    "CarId" uuid NOT NULL,
    CONSTRAINT "PK_OrderItems" PRIMARY KEY (orderitem_id),
    CONSTRAINT "FK_OrderItems_CarModels_CarModelId" FOREIGN KEY ("CarModelId") REFERENCES "CarModels" (car_id) ON DELETE RESTRICT,
    CONSTRAINT "FK_OrderItems_Orders_OrderId" FOREIGN KEY ("OrderId") REFERENCES "Orders" (order_id) ON DELETE CASCADE
);
2025-10-01 16:42:37.097 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OrderItems" (
    orderitem_id uuid NOT NULL,
    order_quantity bigint NOT NULL,
    unit_price numeric NOT NULL,
    comments text,
    "OrderId" uuid NOT NULL,
    "CarModelId" uuid NOT NULL,
    "CarId" uuid NOT NULL,
    CONSTRAINT "PK_OrderItems" PRIMARY KEY (orderitem_id),
    CONSTRAINT "FK_OrderItems_CarModels_CarModelId" FOREIGN KEY ("CarModelId") REFERENCES "CarModels" (car_id) ON DELETE RESTRICT,
    CONSTRAINT "FK_OrderItems_Orders_OrderId" FOREIGN KEY ("OrderId") REFERENCES "Orders" (order_id) ON DELETE CASCADE
);
2025-10-01 16:42:37.097 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.098 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.098 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.098 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Buyer_Login" ON "Buyers" (buyer_login);
2025-10-01 16:42:37.100 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Buyer_Login" ON "Buyers" (buyer_login);
2025-10-01 16:42:37.100 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.101 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.101 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.101 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CarInventory_CarModelId" ON "CarInventories" (car_model_id);
2025-10-01 16:42:37.103 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CarInventory_CarModelId" ON "CarInventories" (car_model_id);
2025-10-01 16:42:37.104 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.104 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.104 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.105 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CarModel_Manufacturer_ModelName" ON "CarModels" (car_manufacturer, car_model);
2025-10-01 16:42:37.106 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_CarModel_Manufacturer_ModelName" ON "CarModels" (car_manufacturer, car_model);
2025-10-01 16:42:37.107 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.107 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.107 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.107 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Employee_Login" ON "Employees" (employee_login);
2025-10-01 16:42:37.109 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Employee_Login" ON "Employees" (employee_login);
2025-10-01 16:42:37.110 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.110 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.110 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.110 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OrderItems_CarModelId" ON "OrderItems" ("CarModelId");
2025-10-01 16:42:37.113 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OrderItems_CarModelId" ON "OrderItems" ("CarModelId");
2025-10-01 16:42:37.113 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.113 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.113 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.114 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OrderItems_OrderId" ON "OrderItems" ("OrderId");
2025-10-01 16:42:37.116 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_OrderItems_OrderId" ON "OrderItems" ("OrderId");
2025-10-01 16:42:37.116 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.116 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.116 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.117 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_BuyerId" ON "Orders" ("BuyerId");
2025-10-01 16:42:37.119 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_BuyerId" ON "Orders" ("BuyerId");
2025-10-01 16:42:37.119 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.119 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.119 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.120 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_EmployeeId" ON "Orders" ("EmployeeId");
2025-10-01 16:42:37.142 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Orders_EmployeeId" ON "Orders" ("EmployeeId");
2025-10-01 16:42:37.142 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.143 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.143 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.143 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250730002947_InitialCreate', '8.0.7');
2025-10-01 16:42:37.146 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250730002947_InitialCreate', '8.0.7');
2025-10-01 16:42:37.148 +00:00 [DBG] Committing transaction.
2025-10-01 16:42:37.153 +00:00 [DBG] Committed transaction.
2025-10-01 16:42:37.155 +00:00 [INF] Now listening on: http://[::]:8080
2025-10-01 16:42:37.155 +00:00 [INF] Now listening on: https://[::]:8081
2025-10-01 16:42:37.155 +00:00 [DBG] Loaded hosting startup assembly CarsTradeAPI
2025-10-01 16:42:37.156 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 16:42:37.156 +00:00 [INF] Hosting environment: Development
2025-10-01 16:42:37.157 +00:00 [INF] Content root path: /app
2025-10-01 16:42:37.157 +00:00 [DBG] Hosting started
2025-10-01 16:42:37.157 +00:00 [DBG] Disposing transaction.
2025-10-01 16:42:37.158 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.158 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:37.158 +00:00 [INF] Applying migration '20250907181028_AddEmployeeRole'.
2025-10-01 16:42:37.168 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.168 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.168 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-01 16:42:37.169 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-10-01 16:42:37.169 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.170 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.170 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.170 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Employees" ADD employee_role text NOT NULL DEFAULT '';
2025-10-01 16:42:37.175 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Employees" ADD employee_role text NOT NULL DEFAULT '';
2025-10-01 16:42:37.175 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.175 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.176 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.176 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250907181028_AddEmployeeRole', '8.0.7');
2025-10-01 16:42:37.178 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250907181028_AddEmployeeRole', '8.0.7');
2025-10-01 16:42:37.178 +00:00 [DBG] Committing transaction.
2025-10-01 16:42:37.180 +00:00 [DBG] Committed transaction.
2025-10-01 16:42:37.180 +00:00 [DBG] Disposing transaction.
2025-10-01 16:42:37.181 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.181 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:37.181 +00:00 [INF] Applying migration '20250909191852_RemoveBuyerLoginPasswordFromBuyer'.
2025-10-01 16:42:37.191 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.191 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.192 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-01 16:42:37.192 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-10-01 16:42:37.192 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.193 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.193 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.193 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_Buyer_Login";
2025-10-01 16:42:37.198 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX "IX_Buyer_Login";
2025-10-01 16:42:37.198 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.198 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.198 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.199 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Buyers" DROP COLUMN buyer_login;
2025-10-01 16:42:37.200 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Buyers" DROP COLUMN buyer_login;
2025-10-01 16:42:37.201 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.201 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.201 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.202 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Buyers" DROP COLUMN buyer_password;
2025-10-01 16:42:37.204 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "Buyers" DROP COLUMN buyer_password;
2025-10-01 16:42:37.204 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.204 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.205 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.205 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250909191852_RemoveBuyerLoginPasswordFromBuyer', '8.0.7');
2025-10-01 16:42:37.207 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250909191852_RemoveBuyerLoginPasswordFromBuyer', '8.0.7');
2025-10-01 16:42:37.207 +00:00 [DBG] Committing transaction.
2025-10-01 16:42:37.210 +00:00 [DBG] Committed transaction.
2025-10-01 16:42:37.210 +00:00 [DBG] Disposing transaction.
2025-10-01 16:42:37.210 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.210 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:37.211 +00:00 [INF] Applying migration '20250918042502_FixOrderItemCarModelForeignKey'.
2025-10-01 16:42:37.220 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.220 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.220 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-01 16:42:37.221 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-10-01 16:42:37.221 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.221 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.221 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.222 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "OrderItems" DROP COLUMN "CarId";
2025-10-01 16:42:37.224 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "OrderItems" DROP COLUMN "CarId";
2025-10-01 16:42:37.225 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.225 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.225 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.225 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250918042502_FixOrderItemCarModelForeignKey', '8.0.7');
2025-10-01 16:42:37.227 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250918042502_FixOrderItemCarModelForeignKey', '8.0.7');
2025-10-01 16:42:37.228 +00:00 [DBG] Committing transaction.
2025-10-01 16:42:37.229 +00:00 [DBG] Committed transaction.
2025-10-01 16:42:37.229 +00:00 [DBG] Disposing transaction.
2025-10-01 16:42:37.230 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.230 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:37.230 +00:00 [INF] Applying migration '20250918060409_FixOrderItemQuantityType'.
2025-10-01 16:42:37.238 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.238 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.238 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-01 16:42:37.239 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-10-01 16:42:37.239 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.239 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.240 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.240 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250918060409_FixOrderItemQuantityType', '8.0.7');
2025-10-01 16:42:37.243 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250918060409_FixOrderItemQuantityType', '8.0.7');
2025-10-01 16:42:37.243 +00:00 [DBG] Committing transaction.
2025-10-01 16:42:37.244 +00:00 [DBG] Committed transaction.
2025-10-01 16:42:37.245 +00:00 [DBG] Disposing transaction.
2025-10-01 16:42:37.245 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.245 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:37.245 +00:00 [INF] Applying migration '20250928095809_DeleteCarInventoryLocation'.
2025-10-01 16:42:37.253 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.254 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.254 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-01 16:42:37.254 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-10-01 16:42:37.254 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.255 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.255 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.255 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "CarInventories" DROP COLUMN location;
2025-10-01 16:42:37.258 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE "CarInventories" DROP COLUMN location;
2025-10-01 16:42:37.258 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.258 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.258 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.259 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250928095809_DeleteCarInventoryLocation', '8.0.7');
2025-10-01 16:42:37.261 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250928095809_DeleteCarInventoryLocation', '8.0.7');
2025-10-01 16:42:37.261 +00:00 [DBG] Committing transaction.
2025-10-01 16:42:37.262 +00:00 [DBG] Committed transaction.
2025-10-01 16:42:37.263 +00:00 [DBG] Disposing transaction.
2025-10-01 16:42:37.263 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.263 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:37.264 +00:00 [INF] Applying migration '20250928105635_AddIdempotencyTable'.
2025-10-01 16:42:37.273 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.273 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.273 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-01 16:42:37.273 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-10-01 16:42:37.274 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.274 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.275 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.275 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "IdempotencyRequests" (
    "Id" uuid NOT NULL,
    "Key" character varying(100) NOT NULL,
    "Status" character varying(50) NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "ResourceType" character varying(50) NOT NULL,
    "ResourceId" uuid,
    "Responsejson" text,
    CONSTRAINT "PK_IdempotencyRequests" PRIMARY KEY ("Id")
);
2025-10-01 16:42:37.278 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "IdempotencyRequests" (
    "Id" uuid NOT NULL,
    "Key" character varying(100) NOT NULL,
    "Status" character varying(50) NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "ResourceType" character varying(50) NOT NULL,
    "ResourceId" uuid,
    "Responsejson" text,
    CONSTRAINT "PK_IdempotencyRequests" PRIMARY KEY ("Id")
);
2025-10-01 16:42:37.278 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2025-10-01 16:42:37.278 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.278 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2025-10-01 16:42:37.279 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250928105635_AddIdempotencyTable', '8.0.7');
2025-10-01 16:42:37.281 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20250928105635_AddIdempotencyTable', '8.0.7');
2025-10-01 16:42:37.281 +00:00 [DBG] Committing transaction.
2025-10-01 16:42:37.283 +00:00 [DBG] Committed transaction.
2025-10-01 16:42:37.284 +00:00 [DBG] Disposing transaction.
2025-10-01 16:42:37.285 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:42:37.285 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:42:37.340 +00:00 [DBG] Connection id "0HNG1163OH9HU" accepted.
2025-10-01 16:42:37.341 +00:00 [DBG] Connection id "0HNG1163OH9HU" started.
2025-10-01 16:42:37.363 +00:00 [DBG] Connection 0HNG1163OH9HU established using the following protocol: "Tls13"
2025-10-01 16:42:37.409 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/index.html - null null
2025-10-01 16:42:37.410 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-01 16:42:37.424 +00:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-10-01 16:42:37.424 +00:00 [DBG] Request did not match any endpoints
2025-10-01 16:42:37.532 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:42:37.614 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/index.html - 200 null text/html;charset=utf-8 206.4249ms
2025-10-01 16:42:37.694 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - null null
2025-10-01 16:42:37.694 +00:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-10-01 16:42:37.694 +00:00 [DBG] Request did not match any endpoints
2025-10-01 16:42:37.696 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:42:37.856 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 162.3095ms
2025-10-01 16:44:07.642 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 420
2025-10-01 16:44:07.660 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:44:07.663 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 16:44:07.664 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:44:07.667 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 16:44:07.668 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 16:44:07.670 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:44:07.690 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 16:44:07.692 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 16:44:07.692 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 16:44:07.693 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 16:44:07.694 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 16:44:07.694 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 16:44:07.695 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:44:07.698 +00:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-01 16:44:07.698 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 16:44:07.715 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:44:07.718 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 16:44:07.719 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 16:44:07.740 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:00000005": started reading request body.
2025-10-01 16:44:07.740 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:00000005": done reading request body.
2025-10-01 16:44:07.759 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 16:44:07.760 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:44:07.760 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:44:07.761 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 16:44:07.772 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 16:44:07.775 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 16:44:07.875 +00:00 [INF] Начало обработки команды CreateCarModelCommand
2025-10-01 16:44:07.901 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 16:44:07.951 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .AsNoTracking()
    .FirstOrDefault(r => r.Key == __key_0)'
2025-10-01 16:44:08.069 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdempotencyRequest>(
    asyncEnumerable: new SingleQueryingEnumerable<IdempotencyRequest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdempotencyRequest.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdempotencyRequest.CreatedAt (DateTime) Required, 1], [Property: IdempotencyRequest.Key (string) Required MaxLength(100), 2], [Property: IdempotencyRequest.ResourceId (Guid?), 3], [Property: IdempotencyRequest.ResourceType (string) Required MaxLength(50), 4], [Property: IdempotencyRequest.Responsejson (string), 5], [Property: IdempotencyRequest.Status (string) Required MaxLength(50), 6] }
            SELECT TOP(1) i.Id, i.CreatedAt, i.Key, i.ResourceId, i.ResourceType, i.Responsejson, i.Status
            FROM IdempotencyRequests AS i
            WHERE i.Key == @__key_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdempotencyRequest>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 16:44:08.087 +00:00 [DBG] Creating DbConnection.
2025-10-01 16:44:08.087 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 16:44:08.087 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.087 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.088 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 16:44:08.088 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:44:08.091 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-10-01 16:44:08.093 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 16:44:08.124 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 16:44:08.128 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.128 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 3ms reading results.
2025-10-01 16:44:08.128 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.129 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:44:08.140 +00:00 [INF] Этап создания CarModel в репозитории
2025-10-01 16:44:08.161 +00:00 [DBG] 'CarsTradeDbContext' generated a value for the property 'CarModel.CarModelId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 16:44:08.202 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 16:44:08.205 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 16:44:08.206 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 16:44:08.218 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 16:44:08.259 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.259 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.261 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 16:44:08.261 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:44:08.261 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:44:08.262 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = Object), @p3='?', @p4='?' (DbType = Object), @p5='?', @p6='?', @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CarModels" (car_id, car_color, car_configuration, car_country, car_engine, car_manufacturer, car_model, car_price, "car_productionDateTime")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-10-01 16:44:08.286 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = Object), @p3='?', @p4='?' (DbType = Object), @p5='?', @p6='?', @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CarModels" (car_id, car_color, car_configuration, car_country, car_engine, car_manufacturer, car_model, car_price, "car_productionDateTime")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-10-01 16:44:08.289 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.289 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-10-01 16:44:08.290 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.290 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:44:08.297 +00:00 [DBG] An entity of type 'CarModel' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 16:44:08.298 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 16:44:08.299 +00:00 [INF] Модель машины успешно создана с ID: "66877a87-04ec-44b2-86d7-47815f3f7641"
2025-10-01 16:44:08.299 +00:00 [INF] Объект CarModel успешно создан с ID: CarsTradeAPI.Entities.CarModel
2025-10-01 16:44:08.310 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .Any(r => r.Key == __key_0)'
2025-10-01 16:44:08.315 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM IdempotencyRequests AS i
                WHERE i.Key == @__key_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 16:44:08.319 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.320 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.320 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 16:44:08.320 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:44:08.320 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:44:08.321 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 16:44:08.323 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 16:44:08.328 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.329 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 5ms reading results.
2025-10-01 16:44:08.329 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.329 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:44:08.344 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 16:44:08.344 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 16:44:08.345 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 16:44:08.351 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 16:44:08.353 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.353 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.353 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 16:44:08.353 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:44:08.354 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 16:44:08.354 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 16:44:08.357 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 16:44:08.398 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.399 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 16:44:08.399 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.399 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:44:08.401 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 16:44:08.401 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 16:44:08.604 +00:00 [INF] Объект CarModel успешно преобразован в ShowCarModelDto с ID: "66877a87-04ec-44b2-86d7-47815f3f7641"
2025-10-01 16:44:08.608 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 16:44:08.610 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 16:44:08.610 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 16:44:08.610 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 16:44:08.611 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 16:44:08.612 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto'.
2025-10-01 16:44:08.619 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 923.3456ms
2025-10-01 16:44:08.620 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 16:44:08.621 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 16:44:08.624 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 16:44:08.624 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 16:44:08.625 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 200 null application/json; charset=utf-8 982.626ms
2025-10-01 17:32:21.971 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 420
2025-10-01 17:32:22.027 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 17:32:22.030 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 17:32:22.031 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:32:22.032 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:32:22.032 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:32:22.033 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:32:22.034 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 17:32:22.035 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:32:22.035 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:32:22.036 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:32:22.036 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:32:22.036 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:32:22.037 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:32:22.038 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:32:22.039 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 17:32:22.040 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 17:32:22.040 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 17:32:22.040 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:00000007": started reading request body.
2025-10-01 17:32:22.041 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:00000007": done reading request body.
2025-10-01 17:32:22.042 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 17:32:22.043 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:32:22.043 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:32:22.043 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 17:32:22.044 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:32:22.051 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 17:32:22.056 +00:00 [INF] Начало обработки команды CreateCarModelCommand
2025-10-01 17:32:22.098 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:32:22.102 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:32:22.102 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 17:32:22.103 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:22.210 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:22.210 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:32:22.210 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:32:22.211 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:32:22.211 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:32:22.214 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:32:22.218 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:22.218 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 3ms reading results.
2025-10-01 17:32:22.219 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:22.219 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:32:22.221 +00:00 [INF] Этап получения CarModel с ID: "66877a87-04ec-44b2-86d7-47815f3f7641" в репозитории
2025-10-01 17:32:22.222 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .FirstOrDefault(id => id.CarModelId == __CarModelId_0)'
2025-10-01 17:32:22.229 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CarModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
            SELECT TOP(1) c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
            FROM CarModels AS c
            WHERE c.car_id == @__CarModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 17:32:22.230 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:22.231 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:22.232 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:32:22.232 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:32:22.232 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:32:22.233 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 17:32:22.257 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 17:32:22.268 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:32:22.269 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:22.270 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 11ms reading results.
2025-10-01 17:32:22.270 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:22.271 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:32:22.272 +00:00 [INF] Модель машины с ID: "66877a87-04ec-44b2-86d7-47815f3f7641" успешно получена
2025-10-01 17:32:22.273 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 17:32:22.273 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 17:32:22.274 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 17:32:22.274 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 17:32:22.274 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 17:32:22.275 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto'.
2025-10-01 17:32:22.276 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 239.1324ms
2025-10-01 17:32:22.276 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:32:22.277 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:32:22.277 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:22.278 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:32:22.278 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 200 null application/json; charset=utf-8 348.4999ms
2025-10-01 17:32:31.961 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - null null
2025-10-01 17:32:31.982 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 17:32:31.982 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/GetCarModels/All' is valid for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 17:32:31.983 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:32:31.983 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:32:31.984 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:32:31.984 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:32:31.988 +00:00 [INF] Route matched with {action = "GetCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto]]] GetCarModel() on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 17:32:31.988 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:32:31.988 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:32:31.988 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:32:31.989 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:32:31.989 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:32:31.989 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:32:31.990 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:32:31.991 +00:00 [INF] Начало обработки запроса GetCarModel для получения всех моделей
2025-10-01 17:32:31.994 +00:00 [INF] Начало обработки команды GetCarModelQuery
2025-10-01 17:32:32.006 +00:00 [INF] Этап получения всех CarModels в репозитории
2025-10-01 17:32:32.009 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:32:32.010 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()'
2025-10-01 17:32:32.012 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CarModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
        SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
        FROM CarModels AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-10-01 17:32:32.013 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:32:32.014 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 17:32:32.014 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:32.014 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:32.015 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:32:32.015 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:32:32.015 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:32:32.015 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 17:32:32.016 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 17:32:32.017 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:32:32.018 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:32.018 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 17:32:32.018 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:32.018 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:32:32.019 +00:00 [INF] Все модели машин успешно получены
2025-10-01 17:32:32.039 +00:00 [INF] Успешное получение 1 моделей автомобилей
2025-10-01 17:32:32.040 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 17:32:32.041 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 17:32:32.042 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 17:32:32.042 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 17:32:32.042 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 17:32:32.043 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 17:32:32.043 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 17:32:32.044 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI) in 54.4461ms
2025-10-01 17:32:32.044 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:32:32.044 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:32:32.045 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:32:32.045 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:32:32.045 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - 200 null application/json; charset=utf-8 84.477ms
2025-10-01 17:33:37.164 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - null null
2025-10-01 17:33:37.216 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 17:33:37.216 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/GetCarModels/All' is valid for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 17:33:37.217 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:33:37.217 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:33:37.217 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:33:37.218 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:33:37.218 +00:00 [INF] Route matched with {action = "GetCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto]]] GetCarModel() on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 17:33:37.218 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:33:37.219 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:33:37.219 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:33:37.219 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:33:37.220 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:33:37.220 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:33:37.220 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:33:37.221 +00:00 [INF] Начало обработки запроса GetCarModel для получения всех моделей
2025-10-01 17:33:37.222 +00:00 [INF] Начало обработки команды GetCarModelQuery
2025-10-01 17:33:37.251 +00:00 [INF] Получение 1 моделей автомобилей из кэша
2025-10-01 17:33:37.252 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 17:33:37.252 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 17:33:37.253 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 17:33:37.253 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 17:33:37.253 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 17:33:37.254 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 17:33:37.254 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 17:33:37.255 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI) in 34.7139ms
2025-10-01 17:33:37.255 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:33:37.255 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - 200 null application/json; charset=utf-8 91.1325ms
2025-10-01 17:37:41.490 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 419
2025-10-01 17:37:41.515 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 17:37:41.515 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 17:37:41.516 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:37:41.517 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:37:41.518 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:37:41.518 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:37:41.519 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 17:37:41.519 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:37:41.519 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:37:41.520 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:37:41.520 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:37:41.520 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:37:41.521 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:37:41.521 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:37:41.522 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 17:37:41.522 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 17:37:41.523 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 17:37:41.523 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:0000000D": started reading request body.
2025-10-01 17:37:41.523 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:0000000D": done reading request body.
2025-10-01 17:37:41.524 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 17:37:41.524 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:37:41.524 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:37:41.525 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 17:37:41.526 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:37:41.526 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 17:37:41.532 +00:00 [INF] Начало обработки команды CreateCarModelCommand
2025-10-01 17:37:41.534 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:37:41.535 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:37:41.535 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 17:37:41.535 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:41.678 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:41.679 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:37:41.679 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:37:41.679 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:37:41.682 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:37:41.686 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:37:41.688 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:41.689 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-10-01 17:37:41.689 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:41.690 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:37:41.690 +00:00 [INF] Этап получения CarModel с ID: "66877a87-04ec-44b2-86d7-47815f3f7641" в репозитории
2025-10-01 17:37:41.691 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:41.692 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:41.692 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:37:41.692 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:37:41.692 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:37:41.693 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 17:37:41.696 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 17:37:41.698 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:37:41.698 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:41.698 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 17:37:41.699 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:41.699 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:37:41.699 +00:00 [INF] Модель машины с ID: "66877a87-04ec-44b2-86d7-47815f3f7641" успешно получена
2025-10-01 17:37:41.700 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 17:37:41.700 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 17:37:41.700 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 17:37:41.701 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 17:37:41.701 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 17:37:41.702 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto'.
2025-10-01 17:37:41.702 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 181.81ms
2025-10-01 17:37:41.704 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:37:41.705 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:37:41.705 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:41.705 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:37:41.706 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 200 null application/json; charset=utf-8 259.9653ms
2025-10-01 17:37:53.095 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 419
2025-10-01 17:37:53.096 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 17:37:53.096 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 17:37:53.097 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:37:53.098 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:37:53.103 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:37:53.108 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:37:53.111 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 17:37:53.112 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:37:53.116 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:37:53.122 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:37:53.123 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:37:53.124 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:37:53.125 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:37:53.126 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:37:53.133 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 17:37:53.134 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 17:37:53.134 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 17:37:53.135 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:0000000F": started reading request body.
2025-10-01 17:37:53.136 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:0000000F": done reading request body.
2025-10-01 17:37:53.136 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 17:37:53.137 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:37:53.137 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:37:53.137 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 17:37:53.138 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:37:53.139 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 17:37:53.141 +00:00 [INF] Начало обработки команды CreateCarModelCommand
2025-10-01 17:37:53.142 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:37:53.144 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:37:53.144 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 17:37:53.144 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:53.145 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:53.145 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:37:53.146 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:37:53.146 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-01 17:37:53.147 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:37:53.172 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:37:53.217 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:53.240 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 66ms reading results.
2025-10-01 17:37:53.240 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:53.240 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:37:53.241 +00:00 [INF] Этап получения CarModel с ID: "66877a87-04ec-44b2-86d7-47815f3f7641" в репозитории
2025-10-01 17:37:53.242 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:53.242 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:53.242 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:37:53.242 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:37:53.243 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:37:53.243 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 17:37:53.267 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 17:37:53.268 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:37:53.269 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:53.269 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 17:37:53.270 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:53.270 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:37:53.270 +00:00 [INF] Модель машины с ID: "66877a87-04ec-44b2-86d7-47815f3f7641" успешно получена
2025-10-01 17:37:53.271 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 17:37:53.272 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 17:37:53.272 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 17:37:53.272 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 17:37:53.272 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 17:37:53.273 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto'.
2025-10-01 17:37:53.274 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 148.5245ms
2025-10-01 17:37:53.274 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:37:53.274 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:37:53.275 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:53.275 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:37:53.275 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 200 null application/json; charset=utf-8 180.4337ms
2025-10-01 17:37:58.698 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - null null
2025-10-01 17:37:58.698 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 17:37:58.698 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/GetCarModels/All' is valid for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 17:37:58.699 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:37:58.699 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:37:58.700 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:37:58.700 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:37:58.701 +00:00 [INF] Route matched with {action = "GetCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto]]] GetCarModel() on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 17:37:58.701 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:37:58.701 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:37:58.702 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:37:58.702 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:37:58.702 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:37:58.703 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:37:58.703 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:37:58.703 +00:00 [INF] Начало обработки запроса GetCarModel для получения всех моделей
2025-10-01 17:37:58.704 +00:00 [INF] Начало обработки команды GetCarModelQuery
2025-10-01 17:37:58.747 +00:00 [INF] Этап получения всех CarModels в репозитории
2025-10-01 17:37:58.792 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:37:58.792 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:37:58.792 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 17:37:58.793 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:58.793 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:58.793 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:37:58.794 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:37:58.795 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-01 17:37:58.795 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 17:37:58.797 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 17:37:58.799 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:37:58.800 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:58.801 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-10-01 17:37:58.801 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:58.801 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:37:58.801 +00:00 [INF] Все модели машин успешно получены
2025-10-01 17:37:58.802 +00:00 [INF] Успешное получение 1 моделей автомобилей
2025-10-01 17:37:58.803 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 17:37:58.803 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 17:37:58.803 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 17:37:58.803 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 17:37:58.804 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 17:37:58.804 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 17:37:58.804 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 17:37:58.805 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI) in 102.0555ms
2025-10-01 17:37:58.805 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:37:58.805 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:37:58.806 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:37:58.806 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:37:58.807 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - 200 null application/json; charset=utf-8 108.8929ms
2025-10-01 17:38:12.510 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - null null
2025-10-01 17:38:12.511 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 17:38:12.511 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/GetCarModels/All' is valid for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 17:38:12.512 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:38:12.512 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:38:12.513 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:38:12.513 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:38:12.513 +00:00 [INF] Route matched with {action = "GetCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto]]] GetCarModel() on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 17:38:12.514 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:38:12.514 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:38:12.514 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:38:12.515 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:38:12.515 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:38:12.515 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:38:12.516 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:38:12.517 +00:00 [INF] Начало обработки запроса GetCarModel для получения всех моделей
2025-10-01 17:38:12.517 +00:00 [INF] Начало обработки команды GetCarModelQuery
2025-10-01 17:38:12.519 +00:00 [INF] Получение 1 моделей автомобилей из кэша
2025-10-01 17:38:12.519 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 17:38:12.520 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 17:38:12.520 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 17:38:12.521 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 17:38:12.521 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 17:38:12.521 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 17:38:12.521 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 17:38:12.522 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI) in 6.4451ms
2025-10-01 17:38:12.522 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:38:12.523 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - 200 null application/json; charset=utf-8 13.7381ms
2025-10-01 17:38:41.091 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 419
2025-10-01 17:38:41.105 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 17:38:41.105 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 17:38:41.106 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:38:41.107 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:38:41.107 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:38:41.108 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:38:41.108 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 17:38:41.109 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:38:41.109 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:38:41.109 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:38:41.109 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:38:41.110 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:38:41.110 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:38:41.110 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:38:41.111 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 17:38:41.111 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 17:38:41.112 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 17:38:41.112 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:00000015": started reading request body.
2025-10-01 17:38:41.113 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:00000015": done reading request body.
2025-10-01 17:38:41.113 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 17:38:41.114 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:38:41.114 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:38:41.114 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 17:38:41.115 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:38:41.115 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 17:38:41.117 +00:00 [INF] Начало обработки команды CreateCarModelCommand
2025-10-01 17:38:41.118 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:38:41.119 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:38:41.120 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 17:38:41.120 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:38:41.121 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:38:41.121 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:38:41.121 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:38:41.122 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:38:41.122 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:38:41.172 +00:00 [INF] Executed DbCommand (10ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:38:41.198 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:38:41.199 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 17:38:41.199 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:38:41.201 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 17:38:41.222 +00:00 [INF] Этап получения CarModel с ID: "66877a87-04ec-44b2-86d7-47815f3f7641" в репозитории
2025-10-01 17:38:41.244 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:38:41.244 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:38:41.245 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:38:41.245 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:38:41.245 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:38:41.246 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 17:38:41.249 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 17:38:41.250 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:38:41.252 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:38:41.252 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-10-01 17:38:41.253 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:38:41.253 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:38:41.253 +00:00 [INF] Модель машины с ID: "66877a87-04ec-44b2-86d7-47815f3f7641" успешно получена
2025-10-01 17:38:41.254 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 17:38:41.254 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 17:38:41.254 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 17:38:41.255 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 17:38:41.255 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 17:38:41.255 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto'.
2025-10-01 17:38:41.256 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 145.9049ms
2025-10-01 17:38:41.256 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:38:41.257 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:38:41.257 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:38:41.258 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:38:41.259 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 200 null application/json; charset=utf-8 188.9365ms
2025-10-01 17:39:21.065 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 419
2025-10-01 17:39:21.073 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 17:39:21.080 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 17:39:21.088 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:39:21.088 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:39:21.088 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:39:21.089 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:39:21.089 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 17:39:21.089 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:39:21.090 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:39:21.090 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:39:21.091 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:39:21.091 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:39:21.091 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:39:21.092 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:39:21.092 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 17:39:21.093 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 17:39:21.093 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 17:39:21.094 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:00000017": started reading request body.
2025-10-01 17:39:21.094 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:00000017": done reading request body.
2025-10-01 17:39:21.094 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 17:39:21.094 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:39:21.095 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:39:21.095 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 17:39:21.095 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 17:39:21.096 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 17:39:21.097 +00:00 [INF] Начало обработки команды CreateCarModelCommand
2025-10-01 17:39:21.098 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:39:21.098 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:39:21.099 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 17:39:21.099 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.099 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.100 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:39:21.100 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:39:21.100 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:39:21.101 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:39:21.124 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:39:21.125 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.126 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 17:39:21.177 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.178 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (6ms).
2025-10-01 17:39:21.199 +00:00 [INF] Этап создания CarModel в репозитории
2025-10-01 17:39:21.243 +00:00 [DBG] 'CarsTradeDbContext' generated a value for the property 'CarModel.CarModelId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:39:21.243 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:39:21.244 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 17:39:21.244 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 17:39:21.245 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 17:39:21.247 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.248 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.248 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:39:21.248 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:39:21.249 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:39:21.249 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = Object), @p3='?', @p4='?' (DbType = Object), @p5='?', @p6='?', @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CarModels" (car_id, car_color, car_configuration, car_country, car_engine, car_manufacturer, car_model, car_price, "car_productionDateTime")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-10-01 17:39:21.253 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = Object), @p3='?', @p4='?' (DbType = Object), @p5='?', @p6='?', @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CarModels" (car_id, car_color, car_configuration, car_country, car_engine, car_manufacturer, car_model, car_price, "car_productionDateTime")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-10-01 17:39:21.254 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.254 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 17:39:21.254 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.254 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:39:21.255 +00:00 [DBG] An entity of type 'CarModel' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:39:21.255 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 17:39:21.255 +00:00 [INF] Модель машины успешно создана с ID: "764c23a4-4add-44ca-968b-ab1813dccc49"
2025-10-01 17:39:21.256 +00:00 [INF] Объект CarModel успешно создан с ID: CarsTradeAPI.Entities.CarModel
2025-10-01 17:39:21.257 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.257 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.257 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:39:21.257 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:39:21.258 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:39:21.258 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 17:39:21.260 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 17:39:21.261 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.261 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 17:39:21.261 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.262 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:39:21.263 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:39:21.263 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 17:39:21.263 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 17:39:21.264 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 17:39:21.264 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.265 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.265 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:39:21.265 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:39:21.266 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:39:21.266 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 17:39:21.289 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 17:39:21.311 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.312 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 17:39:21.312 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.312 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:39:21.313 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:39:21.313 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 17:39:21.315 +00:00 [INF] Объект CarModel успешно преобразован в ShowCarModelDto с ID: "764c23a4-4add-44ca-968b-ab1813dccc49"
2025-10-01 17:39:21.316 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 17:39:21.316 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 17:39:21.316 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 17:39:21.316 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 17:39:21.317 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 17:39:21.317 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto'.
2025-10-01 17:39:21.317 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 226.0183ms
2025-10-01 17:39:21.318 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 17:39:21.318 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:39:21.318 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:21.318 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:39:21.319 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 200 null application/json; charset=utf-8 273.8699ms
2025-10-01 17:39:26.492 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - null null
2025-10-01 17:39:26.492 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 17:39:26.493 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/GetCarModels/All' is valid for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 17:39:26.493 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:39:26.493 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:39:26.494 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:39:26.495 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:39:26.495 +00:00 [INF] Route matched with {action = "GetCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto]]] GetCarModel() on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 17:39:26.496 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:39:26.496 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:39:26.497 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:39:26.497 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:39:26.497 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:39:26.498 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:39:26.498 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 17:39:26.499 +00:00 [INF] Начало обработки запроса GetCarModel для получения всех моделей
2025-10-01 17:39:26.499 +00:00 [INF] Начало обработки команды GetCarModelQuery
2025-10-01 17:39:26.502 +00:00 [INF] Этап получения всех CarModels в репозитории
2025-10-01 17:39:26.526 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:39:26.526 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:39:26.527 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 17:39:26.527 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:26.527 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:26.527 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:39:26.528 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:39:26.528 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:39:26.529 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 17:39:26.552 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 17:39:26.573 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:39:26.574 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 17:39:26.574 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:26.575 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 22ms reading results.
2025-10-01 17:39:26.575 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:26.575 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:39:26.575 +00:00 [INF] Все модели машин успешно получены
2025-10-01 17:39:26.576 +00:00 [INF] Успешное получение 2 моделей автомобилей
2025-10-01 17:39:26.577 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 17:39:26.577 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 17:39:26.577 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 17:39:26.577 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 17:39:26.578 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 17:39:26.578 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 17:39:26.578 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 17:39:26.579 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI) in 81.1778ms
2025-10-01 17:39:26.579 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 17:39:26.580 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:39:26.580 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:39:26.580 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:39:26.581 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - 200 null application/json; charset=utf-8 88.928ms
2025-10-01 17:46:18.172 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - application/json 258
2025-10-01 17:46:18.173 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Employee/CreateEmployee'
2025-10-01 17:46:18.173 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)' with route pattern 'api/Employee/CreateEmployee' is valid for the request path '/api/Employee/CreateEmployee'
2025-10-01 17:46:18.174 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 17:46:18.175 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:46:18.175 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:46:18.176 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 17:46:18.184 +00:00 [INF] Route matched with {action = "CreateEmployee", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto]] CreateEmployee(CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand) on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI).
2025-10-01 17:46:18.185 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:46:18.185 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:46:18.185 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:46:18.186 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:46:18.186 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:46:18.186 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 17:46:18.187 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 17:46:18.188 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 17:46:18.188 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' using the name '' in request data ...
2025-10-01 17:46:18.189 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 17:46:18.194 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:0000001B": started reading request body.
2025-10-01 17:46:18.194 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:0000001B": done reading request body.
2025-10-01 17:46:18.198 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'
2025-10-01 17:46:18.198 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 17:46:18.199 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 17:46:18.199 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 17:46:18.203 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 17:46:18.204 +00:00 [INF] Начало обработки запроса CreateEmployee
2025-10-01 17:46:18.225 +00:00 [INF] Начало обработки команды CreateEmployeeCommand
2025-10-01 17:46:18.226 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:46:18.228 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:46:18.228 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 17:46:18.228 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:18.390 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:18.391 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:46:18.391 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:46:18.391 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-01 17:46:18.392 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:46:18.415 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:46:18.415 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:18.416 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 17:46:18.416 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:18.417 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:46:18.419 +00:00 [INF] Этап получения сотрудника по ID "66877a87-04ec-44b2-86d7-47815f3f7641" в репозитории
2025-10-01 17:46:18.421 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()
    .FirstOrDefault(x => x.EmployeeId == __Id_0)'
2025-10-01 17:46:18.427 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Employee>(
    asyncEnumerable: new SingleQueryingEnumerable<Employee>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Employee.EmployeeId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Employee.EmployeeAge (uint) Required, 1], [Property: Employee.EmployeeLogin (string) Required Index, 2], [Property: Employee.EmployeeMiddlename (string), 3], [Property: Employee.EmployeeName (string) Required, 4], [Property: Employee.EmployeePassword (string) Required MaxLength(260), 5], [Property: Employee.EmployeeRole (string) Required, 6], [Property: Employee.EmployeeSellCounter (uint?), 7], [Property: Employee.EmployeeSurname (string) Required, 8] }
            SELECT TOP(1) e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
            FROM Employees AS e
            WHERE e.employee_id == @__Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Employee>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 17:46:18.429 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:18.430 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:18.430 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:46:18.430 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:46:18.431 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:46:18.431 +00:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_id = @__Id_0
LIMIT 1
2025-10-01 17:46:18.435 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_id = @__Id_0
LIMIT 1
2025-10-01 17:46:18.436 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:18.436 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 17:46:18.436 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:18.437 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:46:18.437 +00:00 [WRN] Попытка получить несуществующего пользователя с ID: "66877a87-04ec-44b2-86d7-47815f3f7641"
2025-10-01 17:46:18.522 +00:00 [ERR] Ошибка при получении сотрудника с ID: "66877a87-04ec-44b2-86d7-47815f3f7641"
System.Exception: Пользователь с ID: 66877a87-04ec-44b2-86d7-47815f3f7641 не найден
   at CarsTradeAPI.Features.EmployeeOperation.EmployeeRepository.ImplementationEmployeeRepository.GetEmployeeById(Guid Id) in B:\MyDevelopment\MyRepos\CarsTradeAPI\CarsTradeAPI\Features\EmployeeOperation\EmployeeRepository\ImplementationEmployeeRepository.cs:line 145
2025-10-01 17:46:18.700 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI) in 513.372ms
2025-10-01 17:46:18.700 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 17:46:18.770 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:46:18.770 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:18.770 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:46:18.771 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - 500 null application/json 643.9101ms
2025-10-01 17:46:38.979 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - application/json 260
2025-10-01 17:46:38.995 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Employee/CreateEmployee'
2025-10-01 17:46:38.995 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)' with route pattern 'api/Employee/CreateEmployee' is valid for the request path '/api/Employee/CreateEmployee'
2025-10-01 17:46:38.995 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 17:46:38.996 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:46:38.996 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:46:38.997 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 17:46:38.997 +00:00 [INF] Route matched with {action = "CreateEmployee", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto]] CreateEmployee(CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand) on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI).
2025-10-01 17:46:38.999 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:46:38.999 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:46:39.000 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:46:39.000 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:46:39.000 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:46:39.001 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 17:46:39.001 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 17:46:39.002 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 17:46:39.003 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' using the name '' in request data ...
2025-10-01 17:46:39.003 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 17:46:39.004 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:0000001D": started reading request body.
2025-10-01 17:46:39.004 +00:00 [DBG] Connection id "0HNG1163OH9HU", Request id "0HNG1163OH9HU:0000001D": done reading request body.
2025-10-01 17:46:39.005 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'
2025-10-01 17:46:39.005 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 17:46:39.005 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 17:46:39.006 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 17:46:39.006 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 17:46:39.007 +00:00 [INF] Начало обработки запроса CreateEmployee
2025-10-01 17:46:39.009 +00:00 [INF] Начало обработки команды CreateEmployeeCommand
2025-10-01 17:46:39.011 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:46:39.011 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:46:39.013 +00:00 [DBG] Created DbConnection. (1ms).
2025-10-01 17:46:39.013 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:39.013 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:39.013 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:46:39.015 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-01 17:46:39.016 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-01 17:46:39.016 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:46:39.060 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:46:39.123 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:39.145 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 22ms reading results.
2025-10-01 17:46:39.149 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:39.149 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:46:39.149 +00:00 [INF] Этап получения сотрудника по ID "66877a87-04ec-44b2-86d7-47815f3f7641" в репозитории
2025-10-01 17:46:39.150 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:39.150 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:39.150 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:46:39.151 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:46:39.151 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:46:39.151 +00:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_id = @__Id_0
LIMIT 1
2025-10-01 17:46:39.153 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_id = @__Id_0
LIMIT 1
2025-10-01 17:46:39.155 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:39.155 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 17:46:39.155 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:39.156 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:46:39.156 +00:00 [WRN] Попытка получить несуществующего пользователя с ID: "66877a87-04ec-44b2-86d7-47815f3f7641"
2025-10-01 17:46:39.179 +00:00 [ERR] Ошибка при получении сотрудника с ID: "66877a87-04ec-44b2-86d7-47815f3f7641"
System.Exception: Пользователь с ID: 66877a87-04ec-44b2-86d7-47815f3f7641 не найден
   at CarsTradeAPI.Features.EmployeeOperation.EmployeeRepository.ImplementationEmployeeRepository.GetEmployeeById(Guid Id) in B:\MyDevelopment\MyRepos\CarsTradeAPI\CarsTradeAPI\Features\EmployeeOperation\EmployeeRepository\ImplementationEmployeeRepository.cs:line 145
2025-10-01 17:46:39.268 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI) in 266.8824ms
2025-10-01 17:46:39.268 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 17:46:39.306 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:46:39.306 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:46:39.306 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:46:39.306 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - 500 null application/json 326.982ms
2025-10-01 17:54:12.396 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-01 17:54:12.953 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:54:12.965 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:54:12.969 +00:00 [DBG] Created DbConnection. (2ms).
2025-10-01 17:54:12.979 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.018 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:54:13.019 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.023 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:54:13.097 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-10-01 17:54:13.125 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.128 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.135 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (7ms).
2025-10-01 17:54:13.150 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 17:54:13.151 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:54:13.151 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 17:54:13.157 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (13ms).
2025-10-01 17:54:13.158 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (17ms).
2025-10-01 17:54:13.158 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.208 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.210 +00:00 [DBG] Hosting starting
2025-10-01 17:54:13.213 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:54:13.249 +00:00 [WRN] Using an in-memory repository. Keys will not be persisted to storage.
2025-10-01 17:54:13.249 +00:00 [WRN] Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.
2025-10-01 17:54:13.262 +00:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2025-10-01 17:54:13.262 +00:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2025-10-01 17:54:13.265 +00:00 [INF] Creating key {b11e11b1-63ab-4c7f-9a28-e7daf8f8d793} with creation date 2025-10-01 17:54:13Z, activation date 2025-10-01 17:54:13Z, and expiration date 2025-12-30 17:54:13Z.
2025-10-01 17:54:13.271 +00:00 [DBG] Descriptor deserializer type for key {b11e11b1-63ab-4c7f-9a28-e7daf8f8d793} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2025-10-01 17:54:13.284 +00:00 [DBG] No key escrow sink found. Not writing key {b11e11b1-63ab-4c7f-9a28-e7daf8f8d793} to escrow.
2025-10-01 17:54:13.285 +00:00 [WRN] No XML encryptor configured. Key {b11e11b1-63ab-4c7f-9a28-e7daf8f8d793} may be persisted to storage in unencrypted form.
2025-10-01 17:54:13.285 +00:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2025-10-01 17:54:13.287 +00:00 [DBG] Found key {b11e11b1-63ab-4c7f-9a28-e7daf8f8d793}.
2025-10-01 17:54:13.294 +00:00 [DBG] Considering key {b11e11b1-63ab-4c7f-9a28-e7daf8f8d793} with expiration date 2025-12-30 17:54:13Z as default key.
2025-10-01 17:54:13.299 +00:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-01 17:54:13.301 +00:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-10-01 17:54:13.302 +00:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-10-01 17:54:13.305 +00:00 [DBG] Using key {b11e11b1-63ab-4c7f-9a28-e7daf8f8d793} as the default key.
2025-10-01 17:54:13.305 +00:00 [DBG] Key ring with default key {b11e11b1-63ab-4c7f-9a28-e7daf8f8d793} was loaded during application startup.
2025-10-01 17:54:13.308 +00:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:54:13.321 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.323 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (2ms).
2025-10-01 17:54:13.382 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.383 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.384 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:54:13.385 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:54:13.386 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-01 17:54:13.387 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 17:54:13.418 +00:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 17:54:13.440 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.443 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 22ms reading results.
2025-10-01 17:54:13.444 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.444 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:54:13.448 +00:00 [DBG] Migrating using database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.449 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.462 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.500 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.501 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 17:54:13.502 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 17:54:13.503 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 17:54:13.504 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (1ms).
2025-10-01 17:54:13.504 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.504 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.505 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:54:13.550 +00:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:54:13.550 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.551 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:54:13.553 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.611 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.613 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.613 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:54:13.614 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 17:54:13.615 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 17:54:13.615 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 17:54:13.616 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.617 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.617 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:54:13.625 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 17:54:13.626 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.626 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:54:13.627 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.627 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.628 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:54:13.628 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:54:13.628 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:54:13.630 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 17:54:13.669 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 17:54:13.670 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.670 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 17:54:13.671 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:54:13.673 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 17:54:13.693 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-10-01 17:54:13.708 +00:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 2AE5B9E8B7B0EDFD86FD709A56EA7C92E2569E52)
2025-10-01 17:54:14.060 +00:00 [INF] Now listening on: http://[::]:8080
2025-10-01 17:54:14.060 +00:00 [INF] Now listening on: https://[::]:8081
2025-10-01 17:54:14.060 +00:00 [DBG] Loaded hosting startup assembly CarsTradeAPI
2025-10-01 17:54:14.061 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 17:54:14.061 +00:00 [INF] Hosting environment: Development
2025-10-01 17:54:14.062 +00:00 [INF] Content root path: /app
2025-10-01 17:54:14.062 +00:00 [DBG] Hosting started
2025-10-01 17:54:14.798 +00:00 [DBG] Connection id "0HNG12E4G9EI5" accepted.
2025-10-01 17:54:14.800 +00:00 [DBG] Connection id "0HNG12E4G9EI5" started.
2025-10-01 17:54:14.828 +00:00 [DBG] Connection 0HNG12E4G9EI5 established using the following protocol: "Tls13"
2025-10-01 17:54:14.890 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/index.html - null null
2025-10-01 17:54:14.892 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-01 17:54:14.907 +00:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-10-01 17:54:14.907 +00:00 [DBG] Request did not match any endpoints
2025-10-01 17:54:15.026 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:54:15.133 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/index.html - 200 null text/html;charset=utf-8 243.4417ms
2025-10-01 17:54:15.249 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - null null
2025-10-01 17:54:15.250 +00:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-10-01 17:54:15.251 +00:00 [DBG] Request did not match any endpoints
2025-10-01 17:54:15.253 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:54:15.391 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 142.8238ms
2025-10-01 17:55:25.776 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - application/json 271
2025-10-01 17:55:25.836 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Employee/CreateEmployee'
2025-10-01 17:55:25.839 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)' with route pattern 'api/Employee/CreateEmployee' is valid for the request path '/api/Employee/CreateEmployee'
2025-10-01 17:55:25.840 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 17:55:25.843 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 17:55:25.845 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 17:55:25.847 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 17:55:25.873 +00:00 [INF] Route matched with {action = "CreateEmployee", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto]] CreateEmployee(CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand) on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI).
2025-10-01 17:55:25.875 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 17:55:25.875 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 17:55:25.877 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 17:55:25.877 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 17:55:25.878 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 17:55:25.879 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 17:55:25.883 +00:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-01 17:55:25.884 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 17:55:25.902 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 17:55:25.904 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' using the name '' in request data ...
2025-10-01 17:55:25.905 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 17:55:25.919 +00:00 [DBG] Connection id "0HNG12E4G9EI5", Request id "0HNG12E4G9EI5:00000005": started reading request body.
2025-10-01 17:55:25.919 +00:00 [DBG] Connection id "0HNG12E4G9EI5", Request id "0HNG12E4G9EI5:00000005": done reading request body.
2025-10-01 17:55:25.931 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'
2025-10-01 17:55:25.932 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 17:55:25.932 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 17:55:25.933 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 17:55:25.940 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 17:55:25.943 +00:00 [INF] Начало обработки запроса CreateEmployee
2025-10-01 17:55:26.050 +00:00 [INF] Начало обработки команды CreateEmployeeCommand
2025-10-01 17:55:38.111 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 17:55:38.159 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .AsNoTracking()
    .FirstOrDefault(r => r.Key == __key_0)'
2025-10-01 17:55:38.278 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdempotencyRequest>(
    asyncEnumerable: new SingleQueryingEnumerable<IdempotencyRequest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdempotencyRequest.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdempotencyRequest.CreatedAt (DateTime) Required, 1], [Property: IdempotencyRequest.Key (string) Required MaxLength(100), 2], [Property: IdempotencyRequest.ResourceId (Guid?), 3], [Property: IdempotencyRequest.ResourceType (string) Required MaxLength(50), 4], [Property: IdempotencyRequest.Responsejson (string), 5], [Property: IdempotencyRequest.Status (string) Required MaxLength(50), 6] }
            SELECT TOP(1) i.Id, i.CreatedAt, i.Key, i.ResourceId, i.ResourceType, i.Responsejson, i.Status
            FROM IdempotencyRequests AS i
            WHERE i.Key == @__key_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdempotencyRequest>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 17:55:38.302 +00:00 [DBG] Creating DbConnection.
2025-10-01 17:55:38.302 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 17:55:38.302 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:55:38.303 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:55:38.303 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:55:38.303 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:55:38.307 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-01 17:55:38.310 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:55:38.320 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 17:55:38.364 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:55:38.364 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 44ms reading results.
2025-10-01 17:55:38.365 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:55:38.365 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:56:15.611 +00:00 [INF] Этап получения сотрудника по ID "66877a87-04ec-44b2-86d7-47815f3f7641" в репозитории
2025-10-01 17:56:16.063 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()
    .FirstOrDefault(x => x.EmployeeId == __Id_0)'
2025-10-01 17:56:16.068 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Employee>(
    asyncEnumerable: new SingleQueryingEnumerable<Employee>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Employee.EmployeeId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Employee.EmployeeAge (uint) Required, 1], [Property: Employee.EmployeeLogin (string) Required Index, 2], [Property: Employee.EmployeeMiddlename (string), 3], [Property: Employee.EmployeeName (string) Required, 4], [Property: Employee.EmployeePassword (string) Required MaxLength(260), 5], [Property: Employee.EmployeeRole (string) Required, 6], [Property: Employee.EmployeeSellCounter (uint?), 7], [Property: Employee.EmployeeSurname (string) Required, 8] }
            SELECT TOP(1) e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
            FROM Employees AS e
            WHERE e.employee_id == @__Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Employee>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 17:56:16.070 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:56:16.070 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:56:16.070 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 17:56:16.071 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:56:16.071 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 17:56:16.071 +00:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_id = @__Id_0
LIMIT 1
2025-10-01 17:56:16.095 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_id = @__Id_0
LIMIT 1
2025-10-01 17:56:16.117 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:56:16.118 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 21ms reading results.
2025-10-01 17:56:16.118 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:56:16.118 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:56:16.890 +00:00 [WRN] Попытка получить несуществующего пользователя с ID: "66877a87-04ec-44b2-86d7-47815f3f7641"
2025-10-01 17:56:21.959 +00:00 [ERR] Ошибка при получении сотрудника с ID: "66877a87-04ec-44b2-86d7-47815f3f7641"
System.Exception: Пользователь с ID: 66877a87-04ec-44b2-86d7-47815f3f7641 не найден
   at CarsTradeAPI.Features.EmployeeOperation.EmployeeRepository.ImplementationEmployeeRepository.GetEmployeeById(Guid Id) in B:\MyDevelopment\MyRepos\CarsTradeAPI\CarsTradeAPI\Features\EmployeeOperation\EmployeeRepository\ImplementationEmployeeRepository.cs:line 145
2025-10-01 17:56:24.928 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI) in 59049.4414ms
2025-10-01 17:56:24.929 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 17:56:42.474 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 17:56:42.476 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 17:56:42.477 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 17:56:42.477 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - 500 null application/json 76703.7537ms
2025-10-01 18:09:42.332 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-01 18:09:43.032 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:09:43.046 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:09:43.050 +00:00 [DBG] Created DbConnection. (2ms).
2025-10-01 18:09:43.062 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.100 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:09:43.102 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.106 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 18:09:43.191 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-10-01 18:09:43.243 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.246 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.255 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (9ms).
2025-10-01 18:09:43.261 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 18:09:43.273 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:09:43.273 +00:00 [DBG] Created DbConnection. (12ms).
2025-10-01 18:09:43.280 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (16ms).
2025-10-01 18:09:43.282 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (20ms).
2025-10-01 18:09:43.282 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.384 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.387 +00:00 [DBG] Hosting starting
2025-10-01 18:09:43.390 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:09:43.428 +00:00 [WRN] Using an in-memory repository. Keys will not be persisted to storage.
2025-10-01 18:09:43.429 +00:00 [WRN] Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.
2025-10-01 18:09:43.443 +00:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2025-10-01 18:09:43.443 +00:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2025-10-01 18:09:43.447 +00:00 [INF] Creating key {a9ac0a41-ed5b-477a-b126-99105a32d905} with creation date 2025-10-01 18:09:43Z, activation date 2025-10-01 18:09:43Z, and expiration date 2025-12-30 18:09:43Z.
2025-10-01 18:09:43.464 +00:00 [DBG] Descriptor deserializer type for key {a9ac0a41-ed5b-477a-b126-99105a32d905} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2025-10-01 18:09:43.468 +00:00 [DBG] No key escrow sink found. Not writing key {a9ac0a41-ed5b-477a-b126-99105a32d905} to escrow.
2025-10-01 18:09:43.468 +00:00 [WRN] No XML encryptor configured. Key {a9ac0a41-ed5b-477a-b126-99105a32d905} may be persisted to storage in unencrypted form.
2025-10-01 18:09:43.469 +00:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2025-10-01 18:09:43.471 +00:00 [DBG] Found key {a9ac0a41-ed5b-477a-b126-99105a32d905}.
2025-10-01 18:09:43.477 +00:00 [DBG] Considering key {a9ac0a41-ed5b-477a-b126-99105a32d905} with expiration date 2025-12-30 18:09:43Z as default key.
2025-10-01 18:09:43.482 +00:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-01 18:09:43.484 +00:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-10-01 18:09:43.484 +00:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-10-01 18:09:43.487 +00:00 [DBG] Using key {a9ac0a41-ed5b-477a-b126-99105a32d905} as the default key.
2025-10-01 18:09:43.488 +00:00 [DBG] Key ring with default key {a9ac0a41-ed5b-477a-b126-99105a32d905} was loaded during application startup.
2025-10-01 18:09:43.490 +00:00 [INF] Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:09:43.492 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.504 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (12ms).
2025-10-01 18:09:43.535 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.536 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.536 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:09:43.537 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:09:43.537 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:09:43.538 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 18:09:43.555 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 18:09:43.569 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.570 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 13ms reading results.
2025-10-01 18:09:43.570 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.570 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:09:43.573 +00:00 [DBG] Migrating using database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.574 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.590 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.591 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.591 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:09:43.594 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 18:09:43.594 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 18:09:43.594 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 18:09:43.595 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.595 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.595 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:09:43.599 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:09:43.599 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.600 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:09:43.600 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.608 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.610 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.610 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:09:43.610 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 18:09:43.611 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 18:09:43.611 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 18:09:43.611 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.612 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.612 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:09:43.615 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:09:43.615 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.615 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:09:43.616 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.616 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.616 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:09:43.616 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:09:43.617 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:09:43.617 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 18:09:43.619 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 18:09:43.620 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.620 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:09:43.620 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:09:43.621 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:09:43.629 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-10-01 18:09:43.633 +00:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 2AE5B9E8B7B0EDFD86FD709A56EA7C92E2569E52)
2025-10-01 18:09:43.833 +00:00 [INF] Now listening on: http://[::]:8080
2025-10-01 18:09:43.833 +00:00 [INF] Now listening on: https://[::]:8081
2025-10-01 18:09:43.834 +00:00 [DBG] Loaded hosting startup assembly CarsTradeAPI
2025-10-01 18:09:43.834 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 18:09:43.834 +00:00 [INF] Hosting environment: Development
2025-10-01 18:09:43.835 +00:00 [INF] Content root path: /app
2025-10-01 18:09:43.835 +00:00 [DBG] Hosting started
2025-10-01 18:09:44.287 +00:00 [DBG] Connection id "0HNG12MPGIS5O" accepted.
2025-10-01 18:09:44.288 +00:00 [DBG] Connection id "0HNG12MPGIS5O" started.
2025-10-01 18:09:44.310 +00:00 [DBG] Connection 0HNG12MPGIS5O established using the following protocol: "Tls13"
2025-10-01 18:09:44.361 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/index.html - null null
2025-10-01 18:09:44.363 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-01 18:09:44.376 +00:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-10-01 18:09:44.377 +00:00 [DBG] Request did not match any endpoints
2025-10-01 18:09:44.483 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:09:44.560 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/index.html - 200 null text/html;charset=utf-8 200.1506ms
2025-10-01 18:09:44.649 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - null null
2025-10-01 18:09:44.650 +00:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-10-01 18:09:44.650 +00:00 [DBG] Request did not match any endpoints
2025-10-01 18:09:44.651 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:09:44.762 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 112.7826ms
2025-10-01 18:10:17.392 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Employee/GetAllEmployee/All - null null
2025-10-01 18:10:17.428 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Employee/GetAllEmployee/All'
2025-10-01 18:10:17.431 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)' with route pattern 'api/Employee/GetAllEmployee/All' is valid for the request path '/api/Employee/GetAllEmployee/All'
2025-10-01 18:10:17.432 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-10-01 18:10:17.435 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:10:17.436 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:10:17.438 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-10-01 18:10:17.454 +00:00 [INF] Route matched with {action = "GetAllEmployee", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto]]] GetAllEmployee() on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI).
2025-10-01 18:10:17.456 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:10:17.456 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:10:17.457 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:10:17.457 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:10:17.458 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:10:17.459 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:10:17.462 +00:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-01 18:10:17.463 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:10:17.465 +00:00 [INF] Начало обработки запроса GetAllEmployee
2025-10-01 18:10:17.543 +00:00 [INF] Начало обработки команды GetAllEmployeeQuery
2025-10-01 18:10:17.769 +00:00 [INF] Этап получения всех сотрудников в репозитории
2025-10-01 18:10:17.781 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:10:17.793 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()'
2025-10-01 18:10:17.897 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Employee>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Employee.EmployeeId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Employee.EmployeeAge (uint) Required, 1], [Property: Employee.EmployeeLogin (string) Required Index, 2], [Property: Employee.EmployeeMiddlename (string), 3], [Property: Employee.EmployeeName (string) Required, 4], [Property: Employee.EmployeePassword (string) Required MaxLength(260), 5], [Property: Employee.EmployeeRole (string) Required, 6], [Property: Employee.EmployeeSellCounter (uint?), 7], [Property: Employee.EmployeeSurname (string) Required, 8] }
        SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
        FROM Employees AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Employee>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-10-01 18:10:17.912 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:10:17.912 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:10:17.913 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:10:17.913 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:10:17.914 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:10:17.914 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:10:17.914 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:10:17.915 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
2025-10-01 18:10:17.938 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
2025-10-01 18:10:17.942 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:10:17.943 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 4ms reading results.
2025-10-01 18:10:17.943 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:10:17.943 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:10:17.944 +00:00 [INF] Все сотрудники успешно получены. Количество: 0
2025-10-01 18:10:17.975 +00:00 [INF] Успешное получение всех сотрудников. Количество: 0
2025-10-01 18:10:17.979 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:10:17.981 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:10:17.982 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:10:17.983 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:10:17.983 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:10:17.984 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:10:17.984 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 18:10:17.993 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI) in 532.312ms
2025-10-01 18:10:17.994 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-10-01 18:10:17.995 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:10:17.996 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:10:17.997 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:10:17.997 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Employee/GetAllEmployee/All - 200 null application/json; charset=utf-8 604.7576ms
2025-10-01 18:11:23.058 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - application/json 259
2025-10-01 18:11:23.132 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Employee/CreateEmployee'
2025-10-01 18:11:23.133 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)' with route pattern 'api/Employee/CreateEmployee' is valid for the request path '/api/Employee/CreateEmployee'
2025-10-01 18:11:23.134 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 18:11:23.134 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:11:23.135 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:11:23.135 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 18:11:23.144 +00:00 [INF] Route matched with {action = "CreateEmployee", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto]] CreateEmployee(CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand) on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI).
2025-10-01 18:11:23.145 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:11:23.145 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:11:23.145 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:11:23.146 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:11:23.146 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:11:23.147 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:11:23.147 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:11:23.166 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 18:11:23.169 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' using the name '' in request data ...
2025-10-01 18:11:23.171 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 18:11:23.177 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:00000007": started reading request body.
2025-10-01 18:11:23.177 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:00000007": done reading request body.
2025-10-01 18:11:23.191 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'
2025-10-01 18:11:23.192 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 18:11:23.192 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 18:11:23.193 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 18:11:23.202 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 18:11:23.205 +00:00 [INF] Начало обработки запроса CreateEmployee
2025-10-01 18:11:23.234 +00:00 [INF] Начало обработки команды CreateEmployeeCommand
2025-10-01 18:11:23.266 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:11:23.286 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .AsNoTracking()
    .FirstOrDefault(r => r.Key == __key_0)'
2025-10-01 18:11:23.358 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdempotencyRequest>(
    asyncEnumerable: new SingleQueryingEnumerable<IdempotencyRequest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdempotencyRequest.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdempotencyRequest.CreatedAt (DateTime) Required, 1], [Property: IdempotencyRequest.Key (string) Required MaxLength(100), 2], [Property: IdempotencyRequest.ResourceId (Guid?), 3], [Property: IdempotencyRequest.ResourceType (string) Required MaxLength(50), 4], [Property: IdempotencyRequest.Responsejson (string), 5], [Property: IdempotencyRequest.Status (string) Required MaxLength(50), 6] }
            SELECT TOP(1) i.Id, i.CreatedAt, i.Key, i.ResourceId, i.ResourceType, i.Responsejson, i.Status
            FROM IdempotencyRequests AS i
            WHERE i.Key == @__key_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdempotencyRequest>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:11:23.366 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:11:23.367 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:11:23.367 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:11:23.369 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:11:23.369 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:11:23.370 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:11:23.374 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-10-01 18:11:23.376 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:11:23.407 +00:00 [INF] Executed DbCommand (12ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:11:23.442 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:11:23.443 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 35ms reading results.
2025-10-01 18:11:23.443 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:11:23.444 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:11:23.446 +00:00 [INF] Этап получения сотрудника по ID "66877a87-04ec-44b2-86d7-47815f3f7641" в репозитории
2025-10-01 18:11:23.447 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()
    .FirstOrDefault(x => x.EmployeeId == __Id_0)'
2025-10-01 18:11:23.451 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Employee>(
    asyncEnumerable: new SingleQueryingEnumerable<Employee>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Employee.EmployeeId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Employee.EmployeeAge (uint) Required, 1], [Property: Employee.EmployeeLogin (string) Required Index, 2], [Property: Employee.EmployeeMiddlename (string), 3], [Property: Employee.EmployeeName (string) Required, 4], [Property: Employee.EmployeePassword (string) Required MaxLength(260), 5], [Property: Employee.EmployeeRole (string) Required, 6], [Property: Employee.EmployeeSellCounter (uint?), 7], [Property: Employee.EmployeeSurname (string) Required, 8] }
            SELECT TOP(1) e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
            FROM Employees AS e
            WHERE e.employee_id == @__Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Employee>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:11:23.451 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:11:23.452 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:11:23.452 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:11:23.452 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:11:23.453 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:11:23.454 +00:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_id = @__Id_0
LIMIT 1
2025-10-01 18:11:23.458 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_id = @__Id_0
LIMIT 1
2025-10-01 18:11:23.460 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:11:23.460 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:11:23.461 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:11:23.461 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:11:23.462 +00:00 [WRN] Попытка получить несуществующего пользователя с ID: "66877a87-04ec-44b2-86d7-47815f3f7641"
2025-10-01 18:11:23.465 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:11:23.465 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:11:23.465 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter' and content type 'text/plain' to write the response.
2025-10-01 18:11:23.466 +00:00 [INF] Executing OkObjectResult, writing value of type 'null'.
2025-10-01 18:11:23.466 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI) in 319.7862ms
2025-10-01 18:11:23.467 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 18:11:23.467 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:11:23.467 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:11:23.468 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:11:23.468 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - 204 null null 410.2536ms
2025-10-01 18:12:56.924 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - application/json 419
2025-10-01 18:12:56.932 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/CreateCarModel'
2025-10-01 18:12:56.932 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/CreateCarModel' is valid for the request path '/api/CarModel/CreateCarModel'
2025-10-01 18:12:56.933 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 18:12:56.933 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:12:56.934 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:12:56.934 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 18:12:56.937 +00:00 [INF] Route matched with {action = "CreateCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] CreateCarModel(CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand) on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 18:12:56.938 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:12:56.938 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:12:56.938 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:12:56.938 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:12:56.939 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:12:56.939 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 18:12:56.940 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 18:12:56.940 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 18:12:56.941 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' using the name '' in request data ...
2025-10-01 18:12:56.941 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 18:12:56.954 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:00000009": started reading request body.
2025-10-01 18:12:56.954 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:00000009": done reading request body.
2025-10-01 18:12:56.969 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'
2025-10-01 18:12:56.969 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 18:12:56.969 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 18:12:56.970 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand' ...
2025-10-01 18:12:56.976 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarModelOperation.CreateCarModel.CreateCarModelCommand'.
2025-10-01 18:12:56.977 +00:00 [INF] Начало обработки запроса CreateCarModel
2025-10-01 18:12:56.989 +00:00 [INF] Начало обработки команды CreateCarModelCommand
2025-10-01 18:12:56.990 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:12:56.993 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:12:56.993 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:12:56.994 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:56.994 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:56.994 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:12:56.995 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:12:56.995 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:12:56.996 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:12:57.020 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:12:57.053 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.053 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 25ms reading results.
2025-10-01 18:12:57.054 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.055 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:12:57.124 +00:00 [INF] Этап создания CarModel в репозитории
2025-10-01 18:12:57.152 +00:00 [DBG] 'CarsTradeDbContext' generated a value for the property 'CarModel.CarModelId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:12:57.202 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:12:57.206 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:12:57.208 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:12:57.220 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:12:57.261 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.261 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.263 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:12:57.263 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:12:57.264 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:12:57.264 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = Object), @p3='?', @p4='?' (DbType = Object), @p5='?', @p6='?', @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CarModels" (car_id, car_color, car_configuration, car_country, car_engine, car_manufacturer, car_model, car_price, "car_productionDateTime")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-10-01 18:12:57.283 +00:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = Object), @p3='?', @p4='?' (DbType = Object), @p5='?', @p6='?', @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CarModels" (car_id, car_color, car_configuration, car_country, car_engine, car_manufacturer, car_model, car_price, "car_productionDateTime")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-10-01 18:12:57.285 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.286 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-10-01 18:12:57.287 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.287 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:12:57.293 +00:00 [DBG] An entity of type 'CarModel' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:12:57.295 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:12:57.295 +00:00 [INF] Модель машины успешно создана с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a"
2025-10-01 18:12:57.296 +00:00 [INF] Объект CarModel успешно создан с ID: CarsTradeAPI.Entities.CarModel
2025-10-01 18:12:57.304 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .Any(r => r.Key == __key_0)'
2025-10-01 18:12:57.312 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM IdempotencyRequests AS i
                WHERE i.Key == @__key_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:12:57.316 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.316 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.317 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:12:57.317 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:12:57.317 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:12:57.318 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:12:57.320 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:12:57.338 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.338 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 18ms reading results.
2025-10-01 18:12:57.339 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.339 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:12:57.353 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:12:57.353 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:12:57.354 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:12:57.360 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:12:57.361 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.362 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.362 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:12:57.362 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:12:57.363 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:12:57.363 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:12:57.366 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:12:57.388 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.388 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:12:57.388 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.389 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:12:57.390 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:12:57.390 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:12:57.394 +00:00 [INF] Объект CarModel успешно преобразован в ShowCarModelDto с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a"
2025-10-01 18:12:57.395 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:12:57.395 +00:00 [DBG] No information found on request to perform content negotiation.
2025-10-01 18:12:57.396 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:12:57.396 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:12:57.396 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:12:57.397 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto'.
2025-10-01 18:12:57.399 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI) in 459.6114ms
2025-10-01 18:12:57.399 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.CreateCarModel (CarsTradeAPI)'
2025-10-01 18:12:57.399 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:12:57.399 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:12:57.400 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:12:57.400 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarModel/CreateCarModel - 200 null application/json; charset=utf-8 476.1347ms
2025-10-01 18:16:22.831 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - application/json 261
2025-10-01 18:16:22.866 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Employee/CreateEmployee'
2025-10-01 18:16:22.867 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)' with route pattern 'api/Employee/CreateEmployee' is valid for the request path '/api/Employee/CreateEmployee'
2025-10-01 18:16:22.867 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 18:16:22.869 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:16:22.869 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:16:22.869 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 18:16:22.870 +00:00 [INF] Route matched with {action = "CreateEmployee", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto]] CreateEmployee(CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand) on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI).
2025-10-01 18:16:22.871 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:16:22.871 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:16:22.871 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:16:22.872 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:16:22.872 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:16:22.872 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:16:22.873 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:16:22.873 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 18:16:22.874 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' using the name '' in request data ...
2025-10-01 18:16:22.874 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 18:16:22.875 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:0000000B": started reading request body.
2025-10-01 18:16:22.875 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:0000000B": done reading request body.
2025-10-01 18:16:22.875 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'
2025-10-01 18:16:22.876 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 18:16:22.876 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 18:16:22.876 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 18:16:22.877 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 18:16:22.878 +00:00 [INF] Начало обработки запроса CreateEmployee
2025-10-01 18:16:22.880 +00:00 [INF] Начало обработки команды CreateEmployeeCommand
2025-10-01 18:16:22.881 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:16:22.882 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:16:22.883 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:16:22.883 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:22.970 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:22.970 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:16:22.971 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:16:22.971 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-01 18:16:22.972 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:16:22.975 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:16:22.976 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:22.976 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:16:22.977 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:22.977 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:16:22.981 +00:00 [INF] Этап проверки уникальности логина RostislavLogin в репозитории
2025-10-01 18:16:22.982 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()
    .Any(x => x.EmployeeLogin == __employeeLogin_0)'
2025-10-01 18:16:22.986 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Employees AS e
                WHERE e.employee_login == @__employeeLogin_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:16:22.988 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:22.992 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:22.992 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:16:22.992 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:16:22.992 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:16:22.993 +00:00 [DBG] Executing DbCommand [Parameters=[@__employeeLogin_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Employees" AS e
    WHERE e.employee_login = @__employeeLogin_0)
2025-10-01 18:16:23.019 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__employeeLogin_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Employees" AS e
    WHERE e.employee_login = @__employeeLogin_0)
2025-10-01 18:16:23.021 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.022 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 18:16:23.022 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.025 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (3ms).
2025-10-01 18:16:23.027 +00:00 [INF] Проверка уникальности логина RostislavLogin завершена. Результат: false
2025-10-01 18:16:23.107 +00:00 [INF] Этап создания работника с ID "51991a83-f3de-474f-b55e-a133f6564ad9" в репозитории
2025-10-01 18:16:23.109 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()
    .FirstOrDefault(x => x.EmployeeLogin == __employee_EmployeeLogin_0)'
2025-10-01 18:16:23.113 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Employee>(
    asyncEnumerable: new SingleQueryingEnumerable<Employee>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Employee.EmployeeId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Employee.EmployeeAge (uint) Required, 1], [Property: Employee.EmployeeLogin (string) Required Index, 2], [Property: Employee.EmployeeMiddlename (string), 3], [Property: Employee.EmployeeName (string) Required, 4], [Property: Employee.EmployeePassword (string) Required MaxLength(260), 5], [Property: Employee.EmployeeRole (string) Required, 6], [Property: Employee.EmployeeSellCounter (uint?), 7], [Property: Employee.EmployeeSurname (string) Required, 8] }
            SELECT TOP(1) e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
            FROM Employees AS e
            WHERE e.employee_login == @__employee_EmployeeLogin_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Employee>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:16:23.114 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.114 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.115 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:16:23.115 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:16:23.115 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:16:23.115 +00:00 [DBG] Executing DbCommand [Parameters=[@__employee_EmployeeLogin_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_login = @__employee_EmployeeLogin_0
LIMIT 1
2025-10-01 18:16:23.139 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__employee_EmployeeLogin_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_login = @__employee_EmployeeLogin_0
LIMIT 1
2025-10-01 18:16:23.140 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.142 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 18:16:23.143 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.143 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:16:23.159 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:16:23.159 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:16:23.160 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:16:23.165 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:16:23.167 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.167 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.167 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:16:23.168 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:16:23.170 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-01 18:16:23.171 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int64), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?' (DbType = Int64), @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Employees" (employee_id, employee_age, employee_login, employee_middlename, employee_name, employee_password, employee_role, employee_sellcounter, employee_surname)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-10-01 18:16:23.177 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int64), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?', @p7='?' (DbType = Int64), @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Employees" (employee_id, employee_age, employee_login, employee_middlename, employee_name, employee_password, employee_role, employee_sellcounter, employee_surname)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-10-01 18:16:23.178 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.178 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:16:23.179 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.180 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:16:23.180 +00:00 [DBG] An entity of type 'Employee' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:16:23.181 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:16:23.181 +00:00 [INF] Работник успешно создан с ID: "51991a83-f3de-474f-b55e-a133f6564ad9"
2025-10-01 18:16:23.187 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.187 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.188 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:16:23.188 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:16:23.188 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:16:23.189 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:16:23.213 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:16:23.214 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.214 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:16:23.214 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.215 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:16:23.215 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:16:23.216 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:16:23.216 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:16:23.216 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:16:23.217 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.217 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.217 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:16:23.218 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:16:23.218 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:16:23.219 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:16:23.223 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:16:23.223 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.224 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:16:23.224 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.225 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:16:23.225 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:16:23.225 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:16:23.227 +00:00 [INF] Пользователь успешно создан с ID: "51991a83-f3de-474f-b55e-a133f6564ad9"
2025-10-01 18:16:23.227 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:16:23.227 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:16:23.228 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:16:23.228 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:16:23.229 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:16:23.229 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:16:23.229 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto'.
2025-10-01 18:16:23.230 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI) in 357.5186ms
2025-10-01 18:16:23.230 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 18:16:23.231 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:16:23.231 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:16:23.231 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:16:23.232 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - 200 null application/json; charset=utf-8 401.2407ms
2025-10-01 18:18:10.337 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - application/json 261
2025-10-01 18:18:10.382 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Employee/CreateEmployee'
2025-10-01 18:18:10.382 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)' with route pattern 'api/Employee/CreateEmployee' is valid for the request path '/api/Employee/CreateEmployee'
2025-10-01 18:18:10.389 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 18:18:10.396 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:18:10.397 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:18:10.397 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 18:18:10.398 +00:00 [INF] Route matched with {action = "CreateEmployee", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto]] CreateEmployee(CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand) on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI).
2025-10-01 18:18:10.398 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:18:10.398 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:18:10.399 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:18:10.399 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:18:10.399 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:18:10.399 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:18:10.400 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:18:10.400 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 18:18:10.400 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' using the name '' in request data ...
2025-10-01 18:18:10.401 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 18:18:10.401 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:0000000D": started reading request body.
2025-10-01 18:18:10.401 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:0000000D": done reading request body.
2025-10-01 18:18:10.402 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'
2025-10-01 18:18:10.402 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 18:18:10.403 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 18:18:10.403 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand' ...
2025-10-01 18:18:10.403 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.CreateEmployee.CreateEmployeeCommand'.
2025-10-01 18:18:10.404 +00:00 [INF] Начало обработки запроса CreateEmployee
2025-10-01 18:18:10.408 +00:00 [INF] Начало обработки команды CreateEmployeeCommand
2025-10-01 18:18:10.409 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:18:10.409 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:18:10.409 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:18:10.410 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:18:10.410 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:18:10.410 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:18:10.410 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:18:10.411 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:18:10.411 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:18:10.435 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:18:10.478 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:18:10.500 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 64ms reading results.
2025-10-01 18:18:10.501 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:18:10.501 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:18:10.502 +00:00 [INF] Этап получения сотрудника по ID "51991a83-f3de-474f-b55e-a133f6564ad9" в репозитории
2025-10-01 18:18:10.503 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:18:10.503 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:18:10.504 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:18:10.504 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:18:10.504 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:18:10.505 +00:00 [DBG] Executing DbCommand [Parameters=[@__Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_id = @__Id_0
LIMIT 1
2025-10-01 18:18:10.508 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__Id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_id = @__Id_0
LIMIT 1
2025-10-01 18:18:10.512 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:18:10.513 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:18:10.514 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 4ms reading results.
2025-10-01 18:18:10.514 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:18:10.515 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:18:10.515 +00:00 [INF] Сотрудник успешно получен с ID: "51991a83-f3de-474f-b55e-a133f6564ad9"
2025-10-01 18:18:10.516 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:18:10.516 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:18:10.517 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:18:10.517 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:18:10.517 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:18:10.518 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:18:10.519 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto'.
2025-10-01 18:18:10.519 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI) in 119.5963ms
2025-10-01 18:18:10.520 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.CreateEmployee (CarsTradeAPI)'
2025-10-01 18:18:10.520 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:18:10.521 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:18:10.521 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:18:10.522 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Employee/CreateEmployee - 200 null application/json; charset=utf-8 184.399ms
2025-10-01 18:22:08.690 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Employee/GetAllEmployee/All - null null
2025-10-01 18:22:08.691 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Employee/GetAllEmployee/All'
2025-10-01 18:22:08.698 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)' with route pattern 'api/Employee/GetAllEmployee/All' is valid for the request path '/api/Employee/GetAllEmployee/All'
2025-10-01 18:22:08.705 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-10-01 18:22:08.705 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:22:08.706 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:22:08.706 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-10-01 18:22:08.706 +00:00 [INF] Route matched with {action = "GetAllEmployee", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto]]] GetAllEmployee() on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI).
2025-10-01 18:22:08.707 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:22:08.707 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:22:08.707 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:22:08.708 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:22:08.708 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:22:08.708 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:22:08.708 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:22:08.709 +00:00 [INF] Начало обработки запроса GetAllEmployee
2025-10-01 18:22:08.710 +00:00 [INF] Начало обработки команды GetAllEmployeeQuery
2025-10-01 18:22:08.753 +00:00 [INF] Этап получения всех сотрудников в репозитории
2025-10-01 18:22:08.798 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:22:08.799 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:22:08.799 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:22:08.799 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:22:08.822 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:22:08.822 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:22:08.822 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:22:08.823 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:22:08.823 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
2025-10-01 18:22:08.825 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
2025-10-01 18:22:08.826 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:22:08.827 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:22:08.827 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 18:22:08.827 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:22:08.828 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:22:08.828 +00:00 [INF] Все сотрудники успешно получены. Количество: 1
2025-10-01 18:22:08.830 +00:00 [INF] Успешное получение всех сотрудников. Количество: 1
2025-10-01 18:22:08.830 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:22:08.830 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:22:08.831 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:22:08.831 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:22:08.831 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:22:08.831 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:22:08.832 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 18:22:08.832 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI) in 124.4209ms
2025-10-01 18:22:08.833 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-10-01 18:22:08.833 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:22:08.833 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:22:08.833 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:22:08.834 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Employee/GetAllEmployee/All - 200 null application/json; charset=utf-8 144.0483ms
2025-10-01 18:22:38.788 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Buyer/GetAllBuyers - null null
2025-10-01 18:22:38.790 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Buyer/GetAllBuyers'
2025-10-01 18:22:38.790 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)' with route pattern 'api/Buyer/GetAllBuyers' is valid for the request path '/api/Buyer/GetAllBuyers'
2025-10-01 18:22:38.804 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-10-01 18:22:38.805 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:22:38.806 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:22:38.806 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-10-01 18:22:38.809 +00:00 [INF] Route matched with {action = "GetAllBuyers", controller = "Buyer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto]]] GetAllBuyers() on controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI).
2025-10-01 18:22:38.809 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:22:38.809 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:22:38.809 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:22:38.810 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:22:38.810 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:22:38.810 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 18:22:38.811 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 18:22:38.812 +00:00 [INF] Получен запрос на получение всех покупателей
2025-10-01 18:22:38.814 +00:00 [INF] Начало обработки запроса GetBuyersQuery
2025-10-01 18:22:38.859 +00:00 [INF] Этап получения всех покупателей в репозитории
2025-10-01 18:22:38.861 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:22:38.861 +00:00 [DBG] Compiling query expression: 
'DbSet<Buyer>()'
2025-10-01 18:22:38.864 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Buyer>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Buyer.BuyerId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Buyer.BuyerAddress (string) Required, 1], [Property: Buyer.BuyerEmail (string), 2], [Property: Buyer.BuyerMiddlename (string), 3], [Property: Buyer.BuyerName (string) Required, 4], [Property: Buyer.BuyerSurname (string) Required, 5], [Property: Buyer.CreatedAt (DateTime) Required, 6], [Property: Buyer.PhoneNumber (string) Required, 7] }
        SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
        FROM Buyers AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Buyer>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-10-01 18:22:38.864 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:22:38.865 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:22:38.865 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:22:38.865 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:22:38.865 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:22:38.866 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:22:38.866 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:22:38.866 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
FROM "Buyers" AS b
2025-10-01 18:22:38.869 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
FROM "Buyers" AS b
2025-10-01 18:22:38.934 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:22:38.941 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 72ms reading results.
2025-10-01 18:22:38.941 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:22:38.942 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:22:38.942 +00:00 [INF] Все покупатели успешно получены. Количество: 0
2025-10-01 18:22:38.942 +00:00 [INF] Успешное получение 0 покупателей
2025-10-01 18:22:38.947 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:22:38.947 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:22:38.947 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:22:38.947 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:22:38.948 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:22:38.948 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:22:38.949 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 18:22:38.949 +00:00 [INF] Executed action CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI) in 139.1695ms
2025-10-01 18:22:38.950 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-10-01 18:22:38.950 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:22:38.950 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:22:38.951 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:22:38.951 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Buyer/GetAllBuyers - 200 null application/json; charset=utf-8 162.6183ms
2025-10-01 18:23:49.556 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Buyer/CreateBuyer - application/json 229
2025-10-01 18:23:49.565 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Buyer/CreateBuyer'
2025-10-01 18:23:49.565 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)' with route pattern 'api/Buyer/CreateBuyer' is valid for the request path '/api/Buyer/CreateBuyer'
2025-10-01 18:23:49.565 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 18:23:49.565 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:23:49.566 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:23:49.566 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 18:23:49.569 +00:00 [INF] Route matched with {action = "CreateBuyer", controller = "Buyer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto]] CreateBuyer(CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand) on controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI).
2025-10-01 18:23:49.569 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:23:49.569 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:23:49.569 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:23:49.570 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:23:49.570 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:23:49.571 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 18:23:49.573 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 18:23:49.574 +00:00 [DBG] Attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' ...
2025-10-01 18:23:49.574 +00:00 [DBG] Attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' using the name '' in request data ...
2025-10-01 18:23:49.574 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 18:23:49.575 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:00000013": started reading request body.
2025-10-01 18:23:49.576 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:00000013": done reading request body.
2025-10-01 18:23:49.577 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'
2025-10-01 18:23:49.577 +00:00 [DBG] Done attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 18:23:49.578 +00:00 [DBG] Done attempting to bind parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 18:23:49.578 +00:00 [DBG] Attempting to validate the bound parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand' ...
2025-10-01 18:23:49.580 +00:00 [DBG] Done attempting to validate the bound parameter 'createBuyerCommand' of type 'CarsTradeAPI.Features.BuyerOperation.CreateBuyer.CreateBuyerCommand'.
2025-10-01 18:23:49.581 +00:00 [INF] Получен запрос на создание нового покупателя
2025-10-01 18:23:49.587 +00:00 [INF] Начало обработки команды CreateBuyerCommand
2025-10-01 18:23:49.588 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:23:49.588 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:23:49.589 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:23:49.589 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.589 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.590 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:23:49.590 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.590 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.590 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:23:49.668 +00:00 [INF] Executed DbCommand (28ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:23:49.676 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.677 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 18:23:49.678 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.678 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:23:49.679 +00:00 [INF] Проверка уникальности номера телефона: 89210513938
2025-10-01 18:23:49.680 +00:00 [INF] Этап проверки уникальности номера телефона: 89210513938 в репозитории
2025-10-01 18:23:49.680 +00:00 [DBG] Compiling query expression: 
'DbSet<Buyer>()
    .Any(x => x.PhoneNumber == __buyerPhoneNumber_0)'
2025-10-01 18:23:49.682 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Buyers AS b
                WHERE b.phone_number == @__buyerPhoneNumber_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:23:49.683 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.683 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.683 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:23:49.683 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.684 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.684 +00:00 [DBG] Executing DbCommand [Parameters=[@__buyerPhoneNumber_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Buyers" AS b
    WHERE b.phone_number = @__buyerPhoneNumber_0)
2025-10-01 18:23:49.686 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__buyerPhoneNumber_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Buyers" AS b
    WHERE b.phone_number = @__buyerPhoneNumber_0)
2025-10-01 18:23:49.687 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.688 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:23:49.688 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.688 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:23:49.689 +00:00 [INF] Проверка уникальности номера телефона 89210513938 завершена. Результат: false
2025-10-01 18:23:49.689 +00:00 [INF] Проверка уникальности email: TestBuyer@Mail.ru
2025-10-01 18:23:49.690 +00:00 [INF] Этап проверки уникальности Email: TestBuyer@Mail.ru в репозитории
2025-10-01 18:23:49.691 +00:00 [DBG] Compiling query expression: 
'DbSet<Buyer>()
    .Any(x => x.BuyerEmail == __buyerEmail_0)'
2025-10-01 18:23:49.692 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Buyers AS b
                WHERE b.buyer_email == @__buyerEmail_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:23:49.696 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.696 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.696 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:23:49.696 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.697 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.697 +00:00 [DBG] Executing DbCommand [Parameters=[@__buyerEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Buyers" AS b
    WHERE b.buyer_email = @__buyerEmail_0)
2025-10-01 18:23:49.699 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__buyerEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Buyers" AS b
    WHERE b.buyer_email = @__buyerEmail_0)
2025-10-01 18:23:49.700 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.701 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:23:49.701 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.701 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:23:49.702 +00:00 [INF] Проверка уникальности Email TestBuyer@Mail.ru завершена. Результат: false
2025-10-01 18:23:49.704 +00:00 [INF] Этап создания покупателя с ID: "fff39040-5257-421f-8e13-f2af3fd91055" в репозитории
2025-10-01 18:23:49.714 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Buyer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:23:49.714 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:23:49.715 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:23:49.717 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:23:49.719 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.719 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.719 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:23:49.719 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.719 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.720 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Buyers" (buyer_id, buyer_adress, buyer_email, buyer_middlename, buyer_name, buyer_surname, buyer_created_date, phone_number)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-10-01 18:23:49.723 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Buyers" (buyer_id, buyer_adress, buyer_email, buyer_middlename, buyer_name, buyer_surname, buyer_created_date, phone_number)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-10-01 18:23:49.724 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.724 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:23:49.724 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.725 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:23:49.725 +00:00 [DBG] An entity of type 'Buyer' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:23:49.725 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:23:49.726 +00:00 [INF] Покупатель успешно создан с ID: "fff39040-5257-421f-8e13-f2af3fd91055"
2025-10-01 18:23:49.726 +00:00 [INF] Пользователь успешно создан с ID: "fff39040-5257-421f-8e13-f2af3fd91055"
2025-10-01 18:23:49.729 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.730 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.730 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:23:49.730 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.730 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.731 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:23:49.733 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:23:49.735 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.735 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:23:49.735 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.736 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:23:49.736 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:23:49.736 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:23:49.736 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:23:49.737 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:23:49.737 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.737 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.738 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:23:49.738 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.738 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:23:49.739 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:23:49.742 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:23:49.743 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.743 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:23:49.743 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.744 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:23:49.744 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:23:49.744 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:23:49.746 +00:00 [INF] Завершение обработки команды CreateBuyerCommand
2025-10-01 18:23:49.746 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:23:49.746 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:23:49.747 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:23:49.747 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:23:49.747 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:23:49.747 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:23:49.748 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto'.
2025-10-01 18:23:49.748 +00:00 [INF] Executed action CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI) in 177.5404ms
2025-10-01 18:23:49.748 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.CreateBuyer (CarsTradeAPI)'
2025-10-01 18:23:49.748 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:23:49.749 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:23:49.749 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:23:49.749 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Buyer/CreateBuyer - 200 null application/json; charset=utf-8 192.8163ms
2025-10-01 18:24:00.031 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Buyer/GetAllBuyers - null null
2025-10-01 18:24:00.031 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Buyer/GetAllBuyers'
2025-10-01 18:24:00.031 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)' with route pattern 'api/Buyer/GetAllBuyers' is valid for the request path '/api/Buyer/GetAllBuyers'
2025-10-01 18:24:00.032 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-10-01 18:24:00.032 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:24:00.033 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:24:00.033 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-10-01 18:24:00.034 +00:00 [INF] Route matched with {action = "GetAllBuyers", controller = "Buyer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto]]] GetAllBuyers() on controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI).
2025-10-01 18:24:00.034 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:24:00.034 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:24:00.035 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:24:00.035 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:24:00.035 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:24:00.036 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 18:24:00.036 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-10-01 18:24:00.036 +00:00 [INF] Получен запрос на получение всех покупателей
2025-10-01 18:24:00.037 +00:00 [INF] Начало обработки запроса GetBuyersQuery
2025-10-01 18:24:00.060 +00:00 [INF] Этап получения всех покупателей в репозитории
2025-10-01 18:24:00.124 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:24:00.125 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:24:00.125 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:24:00.125 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:00.126 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:00.126 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:24:00.127 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:00.127 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:00.127 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
FROM "Buyers" AS b
2025-10-01 18:24:00.130 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
FROM "Buyers" AS b
2025-10-01 18:24:00.131 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Buyer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:24:00.131 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:00.131 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:24:00.132 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:00.132 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:24:00.132 +00:00 [INF] Все покупатели успешно получены. Количество: 1
2025-10-01 18:24:00.132 +00:00 [INF] Успешное получение 1 покупателей
2025-10-01 18:24:00.134 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:24:00.134 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:24:00.134 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:24:00.134 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:24:00.134 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:24:00.135 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:24:00.135 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 18:24:00.135 +00:00 [INF] Executed action CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI) in 99.6015ms
2025-10-01 18:24:00.136 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-10-01 18:24:00.136 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:24:00.136 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:00.136 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:24:00.137 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Buyer/GetAllBuyers - 200 null application/json; charset=utf-8 106.6562ms
2025-10-01 18:24:18.418 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - null null
2025-10-01 18:24:18.419 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 18:24:18.419 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/GetCarModels/All' is valid for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 18:24:18.420 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 18:24:18.420 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:24:18.421 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:24:18.421 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 18:24:18.424 +00:00 [INF] Route matched with {action = "GetCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto]]] GetCarModel() on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 18:24:18.424 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:24:18.425 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:24:18.425 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:24:18.425 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:24:18.425 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:24:18.426 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 18:24:18.426 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 18:24:18.427 +00:00 [INF] Начало обработки запроса GetCarModel для получения всех моделей
2025-10-01 18:24:18.430 +00:00 [INF] Начало обработки команды GetCarModelQuery
2025-10-01 18:24:18.433 +00:00 [INF] Этап получения всех CarModels в репозитории
2025-10-01 18:24:18.477 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:24:18.478 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()'
2025-10-01 18:24:18.481 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CarModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
        SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
        FROM CarModels AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-10-01 18:24:18.482 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:24:18.482 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:24:18.483 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:18.483 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:18.483 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:24:18.484 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:18.484 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:18.484 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 18:24:18.527 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 18:24:18.568 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:24:18.569 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:24:18.569 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:24:18.571 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:18.571 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 11ms reading results.
2025-10-01 18:24:18.572 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:18.572 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:24:18.574 +00:00 [INF] Все модели машин успешно получены
2025-10-01 18:24:18.578 +00:00 [INF] Успешное получение 3 моделей автомобилей
2025-10-01 18:24:18.579 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:24:18.580 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:24:18.580 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:24:18.580 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:24:18.580 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:24:18.580 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:24:18.581 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 18:24:18.581 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI) in 155.9031ms
2025-10-01 18:24:18.582 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 18:24:18.582 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:24:18.582 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:18.583 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:24:18.583 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - 200 null application/json; charset=utf-8 165.9017ms
2025-10-01 18:24:43.132 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarInventory/CreateCarInventory - application/json 105
2025-10-01 18:24:43.134 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarInventory/CreateCarInventory'
2025-10-01 18:24:43.154 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.CreateCarInventory (CarsTradeAPI)' with route pattern 'api/CarInventory/CreateCarInventory' is valid for the request path '/api/CarInventory/CreateCarInventory'
2025-10-01 18:24:43.169 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.CreateCarInventory (CarsTradeAPI)'
2025-10-01 18:24:43.169 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:24:43.169 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:24:43.170 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.CreateCarInventory (CarsTradeAPI)'
2025-10-01 18:24:43.173 +00:00 [INF] Route matched with {action = "CreateCarInventory", controller = "CarInventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto]] CreateCarInventory(CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand) on controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI).
2025-10-01 18:24:43.173 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:24:43.173 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:24:43.173 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:24:43.174 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:24:43.174 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:24:43.174 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-10-01 18:24:43.174 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-10-01 18:24:43.175 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand' ...
2025-10-01 18:24:43.175 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand' using the name '' in request data ...
2025-10-01 18:24:43.175 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 18:24:43.176 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:00000019": started reading request body.
2025-10-01 18:24:43.177 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:00000019": done reading request body.
2025-10-01 18:24:43.179 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand'
2025-10-01 18:24:43.179 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand'.
2025-10-01 18:24:43.179 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand'.
2025-10-01 18:24:43.180 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand' ...
2025-10-01 18:24:43.180 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand'.
2025-10-01 18:24:43.181 +00:00 [INF] Получен запрос на создание нового CarInventory
2025-10-01 18:24:43.192 +00:00 [INF] Начало обработки команды CreateCarInventoryCommand
2025-10-01 18:24:43.192 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:24:43.193 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:24:43.193 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:24:43.193 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.194 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.194 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:24:43.194 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.194 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.195 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:24:43.198 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:24:43.243 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.251 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 32ms reading results.
2025-10-01 18:24:43.253 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.254 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 18:24:43.276 +00:00 [INF] Этап получения CarModel с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" в репозитории
2025-10-01 18:24:43.277 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .FirstOrDefault(id => id.CarModelId == __CarModelId_0)'
2025-10-01 18:24:43.281 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CarModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
            SELECT TOP(1) c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
            FROM CarModels AS c
            WHERE c.car_id == @__CarModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:24:43.281 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.282 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.282 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:24:43.282 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.282 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.283 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 18:24:43.286 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 18:24:43.307 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:24:43.308 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.308 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 18:24:43.308 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.308 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:24:43.309 +00:00 [INF] Модель машины с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" успешно получена
2025-10-01 18:24:43.311 +00:00 [INF] Этап создания CarInventory с ID: "af3e18d8-92a2-45ad-ba44-3388db513248" в репозитории
2025-10-01 18:24:43.313 +00:00 [DBG] Compiling query expression: 
'DbSet<CarInventory>()
    .FirstOrDefault(c => c.InventoryId == __inventory_InventoryId_0)'
2025-10-01 18:24:43.315 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarInventory>(
    asyncEnumerable: new SingleQueryingEnumerable<CarInventory>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarInventory.InventoryId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarInventory.CarModelId (Guid) Required FK Index, 1], [Property: CarInventory.LastUpdated (DateTime) Required, 2], [Property: CarInventory.Quantity (uint) Required, 3] }
            SELECT TOP(1) c.inventory_id, c.car_model_id, c.last_updated, c.quantity
            FROM CarInventories AS c
            WHERE c.inventory_id == @__inventory_InventoryId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarInventory>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:24:43.316 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.316 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.317 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:24:43.317 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.317 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.317 +00:00 [DBG] Executing DbCommand [Parameters=[@__inventory_InventoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.inventory_id = @__inventory_InventoryId_0
LIMIT 1
2025-10-01 18:24:43.321 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inventory_InventoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.inventory_id = @__inventory_InventoryId_0
LIMIT 1
2025-10-01 18:24:43.322 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.322 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:24:43.322 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.323 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:24:43.332 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:24:43.338 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:24:43.339 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:24:43.339 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:24:43.341 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:24:43.343 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.343 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.344 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:24:43.344 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.344 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.345 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CarInventories" (inventory_id, car_model_id, last_updated, quantity)
VALUES (@p0, @p1, @p2, @p3);
2025-10-01 18:24:43.352 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CarInventories" (inventory_id, car_model_id, last_updated, quantity)
VALUES (@p0, @p1, @p2, @p3);
2025-10-01 18:24:43.352 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.352 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:24:43.353 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.353 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:24:43.354 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:24:43.354 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:24:43.354 +00:00 [INF] Объект CarInventory успешно создан с ID: "af3e18d8-92a2-45ad-ba44-3388db513248"
2025-10-01 18:24:43.354 +00:00 [INF] Объект CarInventory успешно создан с ID: "af3e18d8-92a2-45ad-ba44-3388db513248"
2025-10-01 18:24:43.359 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.359 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.360 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:24:43.360 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.360 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.360 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:24:43.363 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:24:43.364 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.364 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:24:43.364 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.365 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:24:43.365 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:24:43.365 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:24:43.366 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:24:43.366 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:24:43.367 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.367 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.367 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:24:43.368 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.368 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:24:43.368 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:24:43.371 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:24:43.372 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.372 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:24:43.373 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.373 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:24:43.373 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:24:43.373 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:24:43.374 +00:00 [INF] Объект CarInventory с ID: "af3e18d8-92a2-45ad-ba44-3388db513248" успешно создан
2025-10-01 18:24:43.375 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:24:43.375 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:24:43.375 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:24:43.376 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:24:43.376 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:24:43.376 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:24:43.376 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto'.
2025-10-01 18:24:43.377 +00:00 [INF] Executed action CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.CreateCarInventory (CarsTradeAPI) in 203.1491ms
2025-10-01 18:24:43.377 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.CreateCarInventory (CarsTradeAPI)'
2025-10-01 18:24:43.378 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:24:43.378 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:24:43.378 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:24:43.379 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarInventory/CreateCarInventory - 200 null application/json; charset=utf-8 246.2978ms
2025-10-01 18:33:47.711 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Employee/GetAllEmployee/All - null null
2025-10-01 18:33:47.712 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Employee/GetAllEmployee/All'
2025-10-01 18:33:47.720 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)' with route pattern 'api/Employee/GetAllEmployee/All' is valid for the request path '/api/Employee/GetAllEmployee/All'
2025-10-01 18:33:47.728 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-10-01 18:33:47.729 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:33:47.729 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:33:47.730 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-10-01 18:33:47.730 +00:00 [INF] Route matched with {action = "GetAllEmployee", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto]]] GetAllEmployee() on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI).
2025-10-01 18:33:47.731 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:33:47.731 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:33:47.731 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:33:47.731 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:33:47.732 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:33:47.732 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:33:47.732 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-10-01 18:33:47.733 +00:00 [INF] Начало обработки запроса GetAllEmployee
2025-10-01 18:33:47.735 +00:00 [INF] Начало обработки команды GetAllEmployeeQuery
2025-10-01 18:33:47.779 +00:00 [INF] Этап получения всех сотрудников в репозитории
2025-10-01 18:33:47.844 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:33:47.845 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:33:47.845 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:33:47.845 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:33:47.918 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:33:47.918 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:33:47.918 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:33:47.919 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:33:47.919 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
2025-10-01 18:33:47.921 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
2025-10-01 18:33:47.922 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:33:47.923 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:33:47.923 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 18:33:47.923 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:33:47.924 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:33:47.924 +00:00 [INF] Все сотрудники успешно получены. Количество: 1
2025-10-01 18:33:47.926 +00:00 [INF] Успешное получение всех сотрудников. Количество: 1
2025-10-01 18:33:47.926 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:33:47.926 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:33:47.927 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:33:47.927 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:33:47.927 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:33:47.927 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:33:47.927 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 18:33:47.928 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI) in 196.0882ms
2025-10-01 18:33:47.928 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-10-01 18:33:47.929 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:33:47.929 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:33:47.929 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:33:47.930 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Employee/GetAllEmployee/All - 200 null application/json; charset=utf-8 239.33ms
2025-10-01 18:34:47.888 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Orders/CreateOrder - application/json 494
2025-10-01 18:34:47.914 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Orders/CreateOrder'
2025-10-01 18:34:47.920 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)' with route pattern 'api/Orders/CreateOrder' is valid for the request path '/api/Orders/CreateOrder'
2025-10-01 18:34:47.920 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)'
2025-10-01 18:34:47.921 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:34:47.921 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:34:47.922 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)'
2025-10-01 18:34:47.925 +00:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto]] CreateOrder(CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand) on controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI).
2025-10-01 18:34:47.925 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:34:47.925 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:34:47.926 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:34:47.926 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:34:47.926 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:34:47.927 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-10-01 18:34:47.927 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-10-01 18:34:47.928 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' ...
2025-10-01 18:34:47.928 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' using the name '' in request data ...
2025-10-01 18:34:47.928 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 18:34:47.933 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:0000001D": started reading request body.
2025-10-01 18:34:47.933 +00:00 [DBG] Connection id "0HNG12MPGIS5O", Request id "0HNG12MPGIS5O:0000001D": done reading request body.
2025-10-01 18:34:47.938 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'
2025-10-01 18:34:47.938 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-10-01 18:34:47.939 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-10-01 18:34:47.939 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' ...
2025-10-01 18:34:47.945 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-10-01 18:34:47.946 +00:00 [INF] Получен запрос на создание нового заказа
2025-10-01 18:34:47.963 +00:00 [INF] Начало обработки команды CreateOrderCommand
2025-10-01 18:34:47.963 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:34:47.964 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:34:47.964 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:34:47.964 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:47.965 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:47.965 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:34:47.965 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:47.965 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:47.966 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:34:47.990 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:34:47.991 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:47.992 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 18:34:47.992 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:47.993 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:34:48.039 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .Any(cm => (Guid?)cm.CarModelId == __carModelId_0)'
2025-10-01 18:34:48.041 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM CarModels AS c
                WHERE c.car_id == @__carModelId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:34:48.043 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.043 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.043 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:34:48.043 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.044 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.044 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CarModels" AS c
    WHERE c.car_id = @__carModelId_0)
2025-10-01 18:34:48.047 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CarModels" AS c
    WHERE c.car_id = @__carModelId_0)
2025-10-01 18:34:48.048 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.048 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:34:48.049 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.049 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:34:48.051 +00:00 [DBG] Compiling query expression: 
'DbSet<CarInventory>()
    .FirstOrDefault(ci => ci.CarModelId == __carModelId_0)'
2025-10-01 18:34:48.056 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarInventory>(
    asyncEnumerable: new SingleQueryingEnumerable<CarInventory>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarInventory.InventoryId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarInventory.CarModelId (Guid) Required FK Index, 1], [Property: CarInventory.LastUpdated (DateTime) Required, 2], [Property: CarInventory.Quantity (uint) Required, 3] }
            SELECT TOP(1) c.inventory_id, c.car_model_id, c.last_updated, c.quantity
            FROM CarInventories AS c
            WHERE c.car_model_id == @__carModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarInventory>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:34:48.059 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.060 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.060 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:34:48.061 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.061 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.063 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-10-01 18:34:48.067 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-10-01 18:34:48.109 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.110 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.110 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 21ms reading results.
2025-10-01 18:34:48.110 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.111 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:34:48.113 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.114 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.114 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:34:48.115 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.115 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.115 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-10-01 18:34:48.126 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-10-01 18:34:48.135 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.135 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 7ms reading results.
2025-10-01 18:34:48.136 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.136 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:34:48.137 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.138 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:34:48.138 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:34:48.138 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:34:48.142 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.143 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.143 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:34:48.143 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.144 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.144 +00:00 [DBG] Executing DbCommand [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CarInventories" SET car_model_id = @p0, last_updated = @p1, quantity = @p2
WHERE inventory_id = @p3;
2025-10-01 18:34:48.148 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CarInventories" SET car_model_id = @p0, last_updated = @p1, quantity = @p2
WHERE inventory_id = @p3;
2025-10-01 18:34:48.149 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.149 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:34:48.149 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.150 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:34:48.150 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.150 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:34:48.152 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .FirstOrDefault(cm => (Guid?)cm.CarModelId == __carModelId_0)'
2025-10-01 18:34:48.155 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CarModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
            SELECT TOP(1) c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
            FROM CarModels AS c
            WHERE c.car_id == @__carModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:34:48.156 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.156 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.157 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:34:48.157 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.158 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-01 18:34:48.159 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__carModelId_0
LIMIT 1
2025-10-01 18:34:48.184 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__carModelId_0
LIMIT 1
2025-10-01 18:34:48.188 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.188 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.189 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.189 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 4ms reading results.
2025-10-01 18:34:48.190 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.190 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:34:48.208 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.216 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.218 +00:00 [DBG] The navigation 'OrderItem.Order' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.219 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.220 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:34:48.220 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:34:48.226 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:34:48.232 +00:00 [DBG] Executing 2 update commands as a batch.
2025-10-01 18:34:48.233 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.234 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.235 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-01 18:34:48.238 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-10-01 18:34:48.239 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:34:48.240 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.240 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.241 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = Object), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?', @p11='?' (DbType = Int64), @p12='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Orders" (order_id, "BuyerId", "EmployeeId", order_delivery_address, order_completion_date, order_create_date, order_price)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO "OrderItems" (orderitem_id, "CarModelId", "OrderId", comments, order_quantity, unit_price)
VALUES (@p7, @p8, @p9, @p10, @p11, @p12);
2025-10-01 18:34:48.248 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = Object), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?', @p11='?' (DbType = Int64), @p12='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Orders" (order_id, "BuyerId", "EmployeeId", order_delivery_address, order_completion_date, order_create_date, order_price)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO "OrderItems" (orderitem_id, "CarModelId", "OrderId", comments, order_quantity, unit_price)
VALUES (@p7, @p8, @p9, @p10, @p11, @p12);
2025-10-01 18:34:48.248 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.248 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:34:48.251 +00:00 [DBG] Committing transaction.
2025-10-01 18:34:48.257 +00:00 [DBG] Committed transaction.
2025-10-01 18:34:48.258 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.259 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:34:48.260 +00:00 [DBG] Disposing transaction.
2025-10-01 18:34:48.262 +00:00 [DBG] An entity of type 'Order' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.262 +00:00 [DBG] An entity of type 'OrderItem' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.262 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 2 entities written to the database.
2025-10-01 18:34:48.269 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.270 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.270 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:34:48.270 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.270 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.271 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:34:48.274 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:34:48.275 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.275 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:34:48.275 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.275 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:34:48.276 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.276 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:34:48.276 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:34:48.277 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:34:48.277 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.277 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.278 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:34:48.278 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.278 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:34:48.278 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:34:48.281 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:34:48.282 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.283 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:34:48.283 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:34:48.283 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:34:48.283 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:34:48.284 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:37:42.367 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-10-01 18:37:42.916 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:37:42.927 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:37:42.930 +00:00 [DBG] Created DbConnection. (2ms).
2025-10-01 18:37:42.940 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:42.975 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:37:42.977 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:42.980 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:37:43.048 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-10-01 18:37:43.074 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.076 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.083 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (6ms).
2025-10-01 18:37:43.099 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 18:37:43.100 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:37:43.100 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:37:43.105 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (14ms).
2025-10-01 18:37:43.106 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (17ms).
2025-10-01 18:37:43.107 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.178 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.180 +00:00 [DBG] Hosting starting
2025-10-01 18:37:43.184 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:37:43.217 +00:00 [WRN] Using an in-memory repository. Keys will not be persisted to storage.
2025-10-01 18:37:43.218 +00:00 [WRN] Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.
2025-10-01 18:37:43.231 +00:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2025-10-01 18:37:43.231 +00:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2025-10-01 18:37:43.234 +00:00 [INF] Creating key {4aaa0edb-c0a0-4644-9f5b-36c2f81064c4} with creation date 2025-10-01 18:37:43Z, activation date 2025-10-01 18:37:43Z, and expiration date 2025-12-30 18:37:43Z.
2025-10-01 18:37:43.239 +00:00 [DBG] Descriptor deserializer type for key {4aaa0edb-c0a0-4644-9f5b-36c2f81064c4} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2025-10-01 18:37:43.251 +00:00 [DBG] No key escrow sink found. Not writing key {4aaa0edb-c0a0-4644-9f5b-36c2f81064c4} to escrow.
2025-10-01 18:37:43.252 +00:00 [WRN] No XML encryptor configured. Key {4aaa0edb-c0a0-4644-9f5b-36c2f81064c4} may be persisted to storage in unencrypted form.
2025-10-01 18:37:43.253 +00:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2025-10-01 18:37:43.254 +00:00 [DBG] Found key {4aaa0edb-c0a0-4644-9f5b-36c2f81064c4}.
2025-10-01 18:37:43.260 +00:00 [DBG] Considering key {4aaa0edb-c0a0-4644-9f5b-36c2f81064c4} with expiration date 2025-12-30 18:37:43Z as default key.
2025-10-01 18:37:43.265 +00:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-10-01 18:37:43.268 +00:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-10-01 18:37:43.268 +00:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-10-01 18:37:43.271 +00:00 [DBG] Using key {4aaa0edb-c0a0-4644-9f5b-36c2f81064c4} as the default key.
2025-10-01 18:37:43.272 +00:00 [DBG] Key ring with default key {4aaa0edb-c0a0-4644-9f5b-36c2f81064c4} was loaded during application startup.
2025-10-01 18:37:43.289 +00:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:37:43.291 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.293 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 18:37:43.334 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.334 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.335 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:37:43.335 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:37:43.335 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:37:43.336 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 18:37:43.349 +00:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 18:37:43.355 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.367 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 5ms reading results.
2025-10-01 18:37:43.368 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.368 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:37:43.370 +00:00 [DBG] Migrating using database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.371 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.389 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.390 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.390 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:37:43.391 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 18:37:43.391 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 18:37:43.391 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 18:37:43.392 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.392 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.393 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:37:43.396 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:37:43.396 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.396 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:37:43.397 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.405 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.405 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.406 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:37:43.406 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-10-01 18:37:43.406 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 18:37:43.407 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-10-01 18:37:43.407 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.407 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.408 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:37:43.410 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-10-01 18:37:43.410 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.410 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:37:43.411 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.411 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.411 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:37:43.412 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:37:43.412 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:37:43.412 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 18:37:43.415 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-10-01 18:37:43.415 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.416 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:37:43.416 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:43.417 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:37:43.424 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-10-01 18:37:43.428 +00:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 2AE5B9E8B7B0EDFD86FD709A56EA7C92E2569E52)
2025-10-01 18:37:43.615 +00:00 [INF] Now listening on: http://[::]:8080
2025-10-01 18:37:43.615 +00:00 [INF] Now listening on: https://[::]:8081
2025-10-01 18:37:43.615 +00:00 [DBG] Loaded hosting startup assembly CarsTradeAPI
2025-10-01 18:37:43.616 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-01 18:37:43.616 +00:00 [INF] Hosting environment: Development
2025-10-01 18:37:43.617 +00:00 [INF] Content root path: /app
2025-10-01 18:37:43.617 +00:00 [DBG] Hosting started
2025-10-01 18:37:44.108 +00:00 [DBG] Connection id "0HNG136E4JFM4" accepted.
2025-10-01 18:37:44.110 +00:00 [DBG] Connection id "0HNG136E4JFM4" started.
2025-10-01 18:37:44.139 +00:00 [DBG] Connection 0HNG136E4JFM4 established using the following protocol: "Tls13"
2025-10-01 18:37:44.191 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/index.html - null null
2025-10-01 18:37:44.193 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-10-01 18:37:44.208 +00:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-10-01 18:37:44.209 +00:00 [DBG] Request did not match any endpoints
2025-10-01 18:37:44.322 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:37:44.409 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/index.html - 200 null text/html;charset=utf-8 218.6737ms
2025-10-01 18:37:44.501 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - null null
2025-10-01 18:37:44.502 +00:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-10-01 18:37:44.502 +00:00 [DBG] Request did not match any endpoints
2025-10-01 18:37:44.504 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:37:44.612 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 110.8658ms
2025-10-01 18:37:55.022 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Orders/CreateOrder - application/json 494
2025-10-01 18:37:55.030 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Orders/CreateOrder'
2025-10-01 18:37:55.034 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)' with route pattern 'api/Orders/CreateOrder' is valid for the request path '/api/Orders/CreateOrder'
2025-10-01 18:37:55.036 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)'
2025-10-01 18:37:55.039 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:37:55.040 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:37:55.042 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)'
2025-10-01 18:37:55.068 +00:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto]] CreateOrder(CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand) on controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI).
2025-10-01 18:37:55.070 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:37:55.070 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:37:55.072 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:37:55.072 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:37:55.073 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:37:55.074 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-10-01 18:37:55.077 +00:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-10-01 18:37:55.079 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-10-01 18:37:55.096 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' ...
2025-10-01 18:37:55.099 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' using the name '' in request data ...
2025-10-01 18:37:55.100 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 18:37:55.122 +00:00 [DBG] Connection id "0HNG136E4JFM4", Request id "0HNG136E4JFM4:00000005": started reading request body.
2025-10-01 18:37:55.123 +00:00 [DBG] Connection id "0HNG136E4JFM4", Request id "0HNG136E4JFM4:00000005": done reading request body.
2025-10-01 18:37:55.138 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'
2025-10-01 18:37:55.139 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-10-01 18:37:55.140 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-10-01 18:37:55.140 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' ...
2025-10-01 18:37:55.153 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-10-01 18:37:55.156 +00:00 [INF] Получен запрос на создание нового заказа
2025-10-01 18:37:55.270 +00:00 [INF] Начало обработки команды CreateOrderCommand
2025-10-01 18:37:55.287 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:37:55.381 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .AsNoTracking()
    .FirstOrDefault(r => r.Key == __key_0)'
2025-10-01 18:37:55.770 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdempotencyRequest>(
    asyncEnumerable: new SingleQueryingEnumerable<IdempotencyRequest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdempotencyRequest.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdempotencyRequest.CreatedAt (DateTime) Required, 1], [Property: IdempotencyRequest.Key (string) Required MaxLength(100), 2], [Property: IdempotencyRequest.ResourceId (Guid?), 3], [Property: IdempotencyRequest.ResourceType (string) Required MaxLength(50), 4], [Property: IdempotencyRequest.Responsejson (string), 5], [Property: IdempotencyRequest.Status (string) Required MaxLength(50), 6] }
            SELECT TOP(1) i.Id, i.CreatedAt, i.Key, i.ResourceId, i.ResourceType, i.Responsejson, i.Status
            FROM IdempotencyRequests AS i
            WHERE i.Key == @__key_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdempotencyRequest>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:37:55.812 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:37:55.813 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:37:55.814 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:55.814 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:55.815 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:37:55.815 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:37:55.824 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-10-01 18:37:55.830 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:37:55.846 +00:00 [INF] Executed DbCommand (21ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:37:55.896 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:55.897 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 49ms reading results.
2025-10-01 18:37:55.897 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:55.897 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:37:55.902 +00:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Include(o => o.OrderItems)
    .ThenInclude(oi => oi.CarModel)
    .FirstOrDefault(o => o.OrderId == __orderId_0)'
2025-10-01 18:37:55.908 +00:00 [DBG] Including navigation: 'Order.OrderItems'.
2025-10-01 18:37:55.913 +00:00 [DBG] Including navigation: 'OrderItem.CarModel'.
2025-10-01 18:37:55.970 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Order>(
    asyncEnumerable: new SingleQueryingEnumerable<Order>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Order.OrderId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.BuyerId (Guid) Required FK Index, 1], [Property: Order.EmployeeId (Guid) Required FK Index, 2], [Property: Order.OrderAddress (OrderAddress) Required, 3], [Property: Order.OrderCompletionDate (DateTime?), 4], [Property: Order.OrderCreateDate (DateTime) Required, 5], [Property: Order.OrderPrice (decimal) Required, 6] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: OrderItem.OrderItemId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: OrderItem.CarModelId (Guid) Required FK Index, 8], [Property: OrderItem.OrderId (Guid) Required FK Index, 9], [Property: OrderItem.OrderItemComments (string), 10], [Property: OrderItem.OrderQuantity (long) Required, 11], [Property: OrderItem.UnitPrice (decimal) Required, 12] }
                3 -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: CarModel.CarColor (string) Required, 14], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 15], [Property: CarModel.CarCountry (string) Required, 16], [Property: CarModel.CarEngine (Engine), 17], [Property: CarModel.CarManufacturer (string) Required Index, 18], [Property: CarModel.CarModelName (string) Required Index, 19], [Property: CarModel.CarPrice (decimal) Required, 20], [Property: CarModel.ProductionDateTime (DateTime) Required, 21] }
                4 -> 7
                5 -> 13
            SELECT t.order_id, t.BuyerId, t.EmployeeId, t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, t0.orderitem_id, t0.CarModelId, t0.OrderId, t0.comments, t0.order_quantity, t0.unit_price, t0.car_id, t0.car_color, t0.car_configuration, t0.car_country, t0.car_engine, t0.car_manufacturer, t0.car_model, t0.car_price, t0.car_productionDateTime
            FROM 
            (
                SELECT TOP(1) o.order_id, o.BuyerId, o.EmployeeId, o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
                FROM Orders AS o
                WHERE o.order_id == @__orderId_0
            ) AS t
            LEFT JOIN 
            (
                SELECT o0.orderitem_id, o0.CarModelId, o0.OrderId, o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
                FROM OrderItems AS o0
                INNER JOIN CarModels AS c ON o0.CarModelId == c.car_id
            ) AS t0 ON t.order_id == t0.OrderId
            ORDER BY t.order_id ASC, t0.orderitem_id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Order>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:37:55.973 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:55.974 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:55.975 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:37:55.976 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-10-01 18:37:55.976 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-01 18:37:55.977 +00:00 [DBG] Executing DbCommand [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, t0.orderitem_id, t0."CarModelId", t0."OrderId", t0.comments, t0.order_quantity, t0.unit_price, t0.car_id, t0.car_color, t0.car_configuration, t0.car_country, t0.car_engine, t0.car_manufacturer, t0.car_model, t0.car_price, t0."car_productionDateTime"
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t0 ON t.order_id = t0."OrderId"
ORDER BY t.order_id, t0.orderitem_id
2025-10-01 18:37:55.983 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, t0.orderitem_id, t0."CarModelId", t0."OrderId", t0.comments, t0.order_quantity, t0.unit_price, t0.car_id, t0.car_color, t0.car_configuration, t0.car_country, t0.car_engine, t0.car_manufacturer, t0.car_model, t0.car_price, t0."car_productionDateTime"
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t0 ON t.order_id = t0."OrderId"
ORDER BY t.order_id, t0.orderitem_id
2025-10-01 18:37:56.015 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:37:56.050 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:37:56.072 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:37:56.074 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:37:56.083 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:56.084 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 100ms reading results.
2025-10-01 18:37:56.084 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:56.084 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:37:56.096 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:37:56.098 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:37:56.099 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:37:56.100 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:37:56.100 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:37:56.101 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:37:56.102 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto'.
2025-10-01 18:37:56.120 +00:00 [INF] Executed action CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI) in 1046.3001ms
2025-10-01 18:37:56.121 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)'
2025-10-01 18:37:56.122 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:37:56.124 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:37:56.125 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 18:37:56.126 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Orders/CreateOrder - 200 null application/json; charset=utf-8 1104.8934ms
2025-10-01 18:38:22.967 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarInventory/GetCarInventory/All - null null
2025-10-01 18:38:23.020 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarInventory/GetCarInventory/All'
2025-10-01 18:38:23.021 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)' with route pattern 'api/CarInventory/GetCarInventory/All' is valid for the request path '/api/CarInventory/GetCarInventory/All'
2025-10-01 18:38:23.021 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-10-01 18:38:23.022 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:38:23.022 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:38:23.023 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-10-01 18:38:23.027 +00:00 [INF] Route matched with {action = "GetAllCarInventories", controller = "CarInventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto]]] GetAllCarInventories() on controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI).
2025-10-01 18:38:23.027 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:38:23.028 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:38:23.028 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:38:23.028 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:38:23.028 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:38:23.029 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-10-01 18:38:23.030 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-10-01 18:38:23.031 +00:00 [INF] Получен запрос на получение всех CarInventory
2025-10-01 18:38:23.034 +00:00 [INF] Начало обработки команды GetCarInventoryQuery
2025-10-01 18:38:23.297 +00:00 [INF] Этап получения всех объектов CarInventory в репозитории
2025-10-01 18:38:23.330 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:38:23.332 +00:00 [DBG] Compiling query expression: 
'DbSet<CarInventory>()'
2025-10-01 18:38:23.336 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CarInventory>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarInventory.InventoryId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarInventory.CarModelId (Guid) Required FK Index, 1], [Property: CarInventory.LastUpdated (DateTime) Required, 2], [Property: CarInventory.Quantity (uint) Required, 3] }
        SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
        FROM CarInventories AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarInventory>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-10-01 18:38:23.338 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:38:23.338 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:38:23.338 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:23.339 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:23.339 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:38:23.340 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:38:23.340 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:38:23.340 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
2025-10-01 18:38:23.365 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
2025-10-01 18:38:23.367 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:38:23.372 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:23.372 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 7ms reading results.
2025-10-01 18:38:23.373 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:23.373 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:38:23.373 +00:00 [INF] Все объекты CarInventory успешно получены
2025-10-01 18:38:23.379 +00:00 [INF] Этап получения CarModel с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" в репозитории
2025-10-01 18:38:23.381 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .FirstOrDefault(id => id.CarModelId == __CarModelId_0)'
2025-10-01 18:38:23.385 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CarModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
            SELECT TOP(1) c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
            FROM CarModels AS c
            WHERE c.car_id == @__CarModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:38:23.386 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:23.386 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:23.386 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:38:23.387 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:38:23.388 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-01 18:38:23.388 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 18:38:23.412 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 18:38:23.415 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:38:23.416 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:38:23.417 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:23.417 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 4ms reading results.
2025-10-01 18:38:23.417 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:23.418 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:38:23.418 +00:00 [INF] Модель машины с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" успешно получена
2025-10-01 18:38:23.435 +00:00 [INF] Успешное получение списка CarInventory, количество элементов: 1
2025-10-01 18:38:23.436 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:38:23.436 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:38:23.437 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:38:23.437 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:38:23.438 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:38:23.438 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:38:23.438 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 18:38:23.441 +00:00 [INF] Executed action CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI) in 412.5409ms
2025-10-01 18:38:23.442 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-10-01 18:38:23.442 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:38:23.442 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:23.443 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:38:23.464 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarInventory/GetCarInventory/All - 200 null application/json; charset=utf-8 501.8821ms
2025-10-01 18:38:57.758 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - null null
2025-10-01 18:38:57.759 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 18:38:57.772 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/GetCarModels/All' is valid for the request path '/api/CarModel/GetCarModels/All'
2025-10-01 18:38:57.772 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 18:38:57.773 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:38:57.774 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:38:57.774 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 18:38:57.777 +00:00 [INF] Route matched with {action = "GetCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto]]] GetCarModel() on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-10-01 18:38:57.778 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:38:57.778 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:38:57.778 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:38:57.779 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:38:57.779 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:38:57.779 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 18:38:57.780 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-10-01 18:38:57.781 +00:00 [INF] Начало обработки запроса GetCarModel для получения всех моделей
2025-10-01 18:38:57.784 +00:00 [INF] Начало обработки команды GetCarModelQuery
2025-10-01 18:38:57.790 +00:00 [INF] Этап получения всех CarModels в репозитории
2025-10-01 18:38:57.791 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:38:57.792 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()'
2025-10-01 18:38:57.795 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CarModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
        SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
        FROM CarModels AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-10-01 18:38:57.795 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:38:57.795 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:38:57.796 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:57.796 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:57.796 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:38:57.796 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:38:57.797 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:38:57.797 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 18:38:57.798 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-10-01 18:38:57.799 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:38:57.800 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:38:57.800 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:38:57.800 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:57.801 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-10-01 18:38:57.801 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:57.801 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:38:57.802 +00:00 [INF] Все модели машин успешно получены
2025-10-01 18:38:57.806 +00:00 [INF] Успешное получение 3 моделей автомобилей
2025-10-01 18:38:57.806 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:38:57.807 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:38:57.807 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:38:57.807 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:38:57.808 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:38:57.808 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:38:57.809 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 18:38:57.810 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI) in 30.3744ms
2025-10-01 18:38:57.810 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-10-01 18:38:57.810 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:38:57.811 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:38:57.811 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:38:57.811 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarModel/GetCarModels/All - 200 null application/json; charset=utf-8 53.9522ms
2025-10-01 18:39:45.382 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/CarInventory/CreateCarInventory - application/json 110
2025-10-01 18:39:45.418 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarInventory/CreateCarInventory'
2025-10-01 18:39:45.418 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.CreateCarInventory (CarsTradeAPI)' with route pattern 'api/CarInventory/CreateCarInventory' is valid for the request path '/api/CarInventory/CreateCarInventory'
2025-10-01 18:39:45.419 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.CreateCarInventory (CarsTradeAPI)'
2025-10-01 18:39:45.419 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:39:45.419 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:39:45.420 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.CreateCarInventory (CarsTradeAPI)'
2025-10-01 18:39:45.424 +00:00 [INF] Route matched with {action = "CreateCarInventory", controller = "CarInventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto]] CreateCarInventory(CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand) on controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI).
2025-10-01 18:39:45.424 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:39:45.424 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:39:45.425 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:39:45.426 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:39:45.426 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:39:45.426 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-10-01 18:39:45.427 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-10-01 18:39:45.427 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand' ...
2025-10-01 18:39:45.428 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand' using the name '' in request data ...
2025-10-01 18:39:45.428 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 18:39:45.430 +00:00 [DBG] Connection id "0HNG136E4JFM4", Request id "0HNG136E4JFM4:0000000B": started reading request body.
2025-10-01 18:39:45.430 +00:00 [DBG] Connection id "0HNG136E4JFM4", Request id "0HNG136E4JFM4:0000000B": done reading request body.
2025-10-01 18:39:45.431 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand'
2025-10-01 18:39:45.431 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand'.
2025-10-01 18:39:45.431 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand'.
2025-10-01 18:39:45.432 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand' ...
2025-10-01 18:39:45.433 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.CarInventoryOperation.CreateCarInventory.CreateCarInventoryCommand'.
2025-10-01 18:39:45.434 +00:00 [INF] Получен запрос на создание нового CarInventory
2025-10-01 18:39:45.445 +00:00 [INF] Начало обработки команды CreateCarInventoryCommand
2025-10-01 18:39:45.446 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:39:45.449 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:39:45.449 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:39:45.449 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.450 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.450 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:39:45.450 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:39:45.451 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:39:45.451 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:39:45.454 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:39:45.507 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.508 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 8ms reading results.
2025-10-01 18:39:45.509 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.511 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 18:39:45.512 +00:00 [INF] Этап получения CarModel с ID: "764c23a4-4add-44ca-968b-ab1813dccc49" в репозитории
2025-10-01 18:39:45.513 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.513 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.513 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:39:45.513 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:39:45.513 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:39:45.514 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 18:39:45.517 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 18:39:45.538 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:39:45.539 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.539 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:39:45.539 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.539 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:39:45.540 +00:00 [INF] Модель машины с ID: "764c23a4-4add-44ca-968b-ab1813dccc49" успешно получена
2025-10-01 18:39:45.542 +00:00 [INF] Этап создания CarInventory с ID: "549fa6f6-34d3-472e-b167-e48f9ffbc8bf" в репозитории
2025-10-01 18:39:45.544 +00:00 [DBG] Compiling query expression: 
'DbSet<CarInventory>()
    .FirstOrDefault(c => c.InventoryId == __inventory_InventoryId_0)'
2025-10-01 18:39:45.547 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarInventory>(
    asyncEnumerable: new SingleQueryingEnumerable<CarInventory>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarInventory.InventoryId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarInventory.CarModelId (Guid) Required FK Index, 1], [Property: CarInventory.LastUpdated (DateTime) Required, 2], [Property: CarInventory.Quantity (uint) Required, 3] }
            SELECT TOP(1) c.inventory_id, c.car_model_id, c.last_updated, c.quantity
            FROM CarInventories AS c
            WHERE c.inventory_id == @__inventory_InventoryId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarInventory>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:39:45.547 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.548 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.548 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:39:45.548 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:39:45.549 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:39:45.549 +00:00 [DBG] Executing DbCommand [Parameters=[@__inventory_InventoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.inventory_id = @__inventory_InventoryId_0
LIMIT 1
2025-10-01 18:39:45.552 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__inventory_InventoryId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.inventory_id = @__inventory_InventoryId_0
LIMIT 1
2025-10-01 18:39:45.553 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.553 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:39:45.553 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.554 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:39:45.569 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:39:45.571 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:39:45.574 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:39:45.577 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:39:45.594 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:39:45.633 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.633 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.634 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:39:45.635 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:39:45.637 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-10-01 18:39:45.637 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CarInventories" (inventory_id, car_model_id, last_updated, quantity)
VALUES (@p0, @p1, @p2, @p3);
2025-10-01 18:39:45.644 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "CarInventories" (inventory_id, car_model_id, last_updated, quantity)
VALUES (@p0, @p1, @p2, @p3);
2025-10-01 18:39:45.647 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.647 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-10-01 18:39:45.648 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.648 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:39:45.654 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:39:45.656 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:39:45.656 +00:00 [INF] Объект CarInventory успешно создан с ID: "549fa6f6-34d3-472e-b167-e48f9ffbc8bf"
2025-10-01 18:39:45.656 +00:00 [INF] Объект CarInventory успешно создан с ID: "549fa6f6-34d3-472e-b167-e48f9ffbc8bf"
2025-10-01 18:39:45.661 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .Any(r => r.Key == __key_0)'
2025-10-01 18:39:45.665 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM IdempotencyRequests AS i
                WHERE i.Key == @__key_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:39:45.669 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.669 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.669 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:39:45.670 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:39:45.670 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:39:45.670 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:39:45.672 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:39:45.676 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.677 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 3ms reading results.
2025-10-01 18:39:45.677 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.677 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:39:45.689 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:39:45.689 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:39:45.690 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:39:45.694 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:39:45.696 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.696 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.696 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:39:45.696 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:39:45.697 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:39:45.697 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:39:45.701 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:39:45.701 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.702 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:39:45.702 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.702 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:39:45.704 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:39:45.704 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:39:45.708 +00:00 [INF] Объект CarInventory с ID: "549fa6f6-34d3-472e-b167-e48f9ffbc8bf" успешно создан
2025-10-01 18:39:45.708 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:39:45.708 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:39:45.709 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:39:45.709 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:39:45.709 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:39:45.710 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:39:45.710 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto'.
2025-10-01 18:39:45.711 +00:00 [INF] Executed action CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.CreateCarInventory (CarsTradeAPI) in 284.4475ms
2025-10-01 18:39:45.711 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.CreateCarInventory (CarsTradeAPI)'
2025-10-01 18:39:45.711 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:39:45.712 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:39:45.712 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:39:45.712 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/CarInventory/CreateCarInventory - 200 null application/json; charset=utf-8 337.5914ms
2025-10-01 18:42:32.205 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/OrderItems/AddOrderItem - application/json 201
2025-10-01 18:42:32.256 +00:00 [DBG] 1 candidate(s) found for the request path '/api/OrderItems/AddOrderItem'
2025-10-01 18:42:32.257 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.AddOrderItems (CarsTradeAPI)' with route pattern 'api/OrderItems/AddOrderItem' is valid for the request path '/api/OrderItems/AddOrderItem'
2025-10-01 18:42:32.257 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.AddOrderItems (CarsTradeAPI)'
2025-10-01 18:42:32.257 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:42:32.258 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:42:32.258 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.AddOrderItems (CarsTradeAPI)'
2025-10-01 18:42:32.261 +00:00 [INF] Route matched with {action = "AddOrderItems", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto]] AddOrderItems(CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand) on controller CarsTradeAPI.Features.OrdersOperation.OrderItemsController (CarsTradeAPI).
2025-10-01 18:42:32.262 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:42:32.262 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:42:32.262 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:42:32.262 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:42:32.263 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:42:32.263 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrderItemsController (CarsTradeAPI)
2025-10-01 18:42:32.263 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrderItemsController (CarsTradeAPI)
2025-10-01 18:42:32.264 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand' ...
2025-10-01 18:42:32.264 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand' using the name '' in request data ...
2025-10-01 18:42:32.264 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 18:42:32.265 +00:00 [DBG] Connection id "0HNG136E4JFM4", Request id "0HNG136E4JFM4:0000000D": started reading request body.
2025-10-01 18:42:32.266 +00:00 [DBG] Connection id "0HNG136E4JFM4", Request id "0HNG136E4JFM4:0000000D": done reading request body.
2025-10-01 18:42:32.267 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand'
2025-10-01 18:42:32.267 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand'.
2025-10-01 18:42:32.267 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand'.
2025-10-01 18:42:32.268 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand' ...
2025-10-01 18:42:32.269 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand'.
2025-10-01 18:42:32.269 +00:00 [INF] Получение запроса на добавление нового элемента заказа в заказ с ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
2025-10-01 18:42:32.276 +00:00 [INF] Начало обработки команды CreateOrderItemCommand
2025-10-01 18:42:32.277 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:42:32.278 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:42:32.278 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:42:32.278 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:42:32.279 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:42:32.279 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:42:32.279 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:42:32.279 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:42:32.280 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:42:32.282 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:42:32.304 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:42:32.304 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:42:32.305 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:42:32.306 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:42:32.309 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:42:32.310 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:42:32.310 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:42:32.310 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:42:32.311 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:42:32.311 +00:00 [DBG] Executing DbCommand [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, t0.orderitem_id, t0."CarModelId", t0."OrderId", t0.comments, t0.order_quantity, t0.unit_price, t0.car_id, t0.car_color, t0.car_configuration, t0.car_country, t0.car_engine, t0.car_manufacturer, t0.car_model, t0.car_price, t0."car_productionDateTime"
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t0 ON t.order_id = t0."OrderId"
ORDER BY t.order_id, t0.orderitem_id
2025-10-01 18:42:32.338 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, t0.orderitem_id, t0."CarModelId", t0."OrderId", t0.comments, t0.order_quantity, t0.unit_price, t0.car_id, t0.car_color, t0.car_configuration, t0.car_country, t0.car_engine, t0.car_manufacturer, t0.car_model, t0.car_price, t0."car_productionDateTime"
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t0 ON t.order_id = t0."OrderId"
ORDER BY t.order_id, t0.orderitem_id
2025-10-01 18:42:32.387 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:42:32.387 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:42:32.387 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:42:32.388 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:42:32.388 +00:00 [WRN] Попытка создать элемент заказа, в заказе с ID: "3fa85f64-5717-4562-b3fc-2c963f66afa6" которого не существует
2025-10-01 18:42:32.391 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:42:32.391 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:42:32.391 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:42:32.392 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:42:32.392 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:42:32.392 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:42:32.392 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 18:42:32.399 +00:00 [INF] Executed action CarsTradeAPI.Features.OrdersOperation.OrderItemsController.AddOrderItems (CarsTradeAPI) in 135.8736ms
2025-10-01 18:42:32.399 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.AddOrderItems (CarsTradeAPI)'
2025-10-01 18:42:32.399 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:42:32.400 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:42:32.400 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:42:32.400 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/OrderItems/AddOrderItem - 400 null application/json; charset=utf-8 195.8771ms
2025-10-01 18:43:09.815 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/OrderItems/AddOrderItem - application/json 201
2025-10-01 18:43:09.816 +00:00 [DBG] 1 candidate(s) found for the request path '/api/OrderItems/AddOrderItem'
2025-10-01 18:43:09.816 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.AddOrderItems (CarsTradeAPI)' with route pattern 'api/OrderItems/AddOrderItem' is valid for the request path '/api/OrderItems/AddOrderItem'
2025-10-01 18:43:09.817 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.AddOrderItems (CarsTradeAPI)'
2025-10-01 18:43:09.817 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:43:09.817 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:43:09.818 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.AddOrderItems (CarsTradeAPI)'
2025-10-01 18:43:09.819 +00:00 [INF] Route matched with {action = "AddOrderItems", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto]] AddOrderItems(CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand) on controller CarsTradeAPI.Features.OrdersOperation.OrderItemsController (CarsTradeAPI).
2025-10-01 18:43:09.819 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:43:09.819 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:43:09.819 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:43:09.820 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:43:09.820 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:43:09.820 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrderItemsController (CarsTradeAPI)
2025-10-01 18:43:09.821 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrderItemsController (CarsTradeAPI)
2025-10-01 18:43:09.821 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand' ...
2025-10-01 18:43:09.821 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand' using the name '' in request data ...
2025-10-01 18:43:09.822 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 18:43:09.822 +00:00 [DBG] Connection id "0HNG136E4JFM4", Request id "0HNG136E4JFM4:0000000F": started reading request body.
2025-10-01 18:43:09.822 +00:00 [DBG] Connection id "0HNG136E4JFM4", Request id "0HNG136E4JFM4:0000000F": done reading request body.
2025-10-01 18:43:09.823 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand'
2025-10-01 18:43:09.823 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand'.
2025-10-01 18:43:09.823 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand'.
2025-10-01 18:43:09.823 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand' ...
2025-10-01 18:43:09.824 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.AddOrderItem.CreateOrderItemCommand'.
2025-10-01 18:43:09.825 +00:00 [INF] Получение запроса на добавление нового элемента заказа в заказ с ID: "c77f7859-377c-4f0d-ae2b-96d2fa7915de"
2025-10-01 18:43:09.826 +00:00 [INF] Начало обработки команды CreateOrderItemCommand
2025-10-01 18:43:09.827 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:43:09.827 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:43:09.828 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:43:09.828 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.926 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.927 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:43:09.927 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.927 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.928 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:43:09.930 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 18:43:09.931 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.931 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:43:09.931 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.931 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:43:09.932 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.932 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.932 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:43:09.933 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.933 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.933 +00:00 [DBG] Executing DbCommand [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, t0.orderitem_id, t0."CarModelId", t0."OrderId", t0.comments, t0.order_quantity, t0.unit_price, t0.car_id, t0.car_color, t0.car_configuration, t0.car_country, t0.car_engine, t0.car_manufacturer, t0.car_model, t0.car_price, t0."car_productionDateTime"
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t0 ON t.order_id = t0."OrderId"
ORDER BY t.order_id, t0.orderitem_id
2025-10-01 18:43:09.937 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, t0.orderitem_id, t0."CarModelId", t0."OrderId", t0.comments, t0.order_quantity, t0.unit_price, t0.car_id, t0.car_color, t0.car_configuration, t0.car_country, t0.car_engine, t0.car_manufacturer, t0.car_model, t0.car_price, t0."car_productionDateTime"
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t0 ON t.order_id = t0."OrderId"
ORDER BY t.order_id, t0.orderitem_id
2025-10-01 18:43:09.938 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:09.939 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:09.939 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:09.939 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:09.940 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.940 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-10-01 18:43:09.940 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.941 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:43:09.942 +00:00 [DBG] Compiling query expression: 
'DbSet<CarInventory>()
    .FirstOrDefault(ci => ci.CarModelId == __carModelId_0)'
2025-10-01 18:43:09.945 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarInventory>(
    asyncEnumerable: new SingleQueryingEnumerable<CarInventory>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarInventory.InventoryId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarInventory.CarModelId (Guid) Required FK Index, 1], [Property: CarInventory.LastUpdated (DateTime) Required, 2], [Property: CarInventory.Quantity (uint) Required, 3] }
            SELECT TOP(1) c.inventory_id, c.car_model_id, c.last_updated, c.quantity
            FROM CarInventories AS c
            WHERE c.car_model_id == @__carModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarInventory>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:43:09.945 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.946 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.946 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:43:09.946 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.947 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.947 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-10-01 18:43:09.950 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-10-01 18:43:09.951 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:09.951 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.951 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:43:09.952 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.952 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:43:09.955 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .FirstOrDefault(cm => (Guid?)cm.CarModelId == __carModelId_0)'
2025-10-01 18:43:09.958 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CarModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
            SELECT TOP(1) c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
            FROM CarModels AS c
            WHERE c.car_id == @__carModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:43:09.958 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.959 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.959 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:43:09.959 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.960 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.960 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__carModelId_0
LIMIT 1
2025-10-01 18:43:09.963 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__carModelId_0
LIMIT 1
2025-10-01 18:43:09.964 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:09.965 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:09.965 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.965 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 18:43:09.965 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.966 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:43:09.968 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.969 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.969 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:43:09.969 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.970 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.970 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-10-01 18:43:09.973 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-10-01 18:43:09.974 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.974 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:43:09.974 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.974 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:43:09.975 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:09.975 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:43:09.976 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:43:09.986 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:43:09.990 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.991 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.991 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:43:09.991 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.992 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:09.992 +00:00 [DBG] Executing DbCommand [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CarInventories" SET car_model_id = @p0, last_updated = @p1, quantity = @p2
WHERE inventory_id = @p3;
2025-10-01 18:43:09.995 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CarInventories" SET car_model_id = @p0, last_updated = @p1, quantity = @p2
WHERE inventory_id = @p3;
2025-10-01 18:43:09.996 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.996 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:43:09.997 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:09.997 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:43:09.997 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:09.997 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:43:10.000 +00:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Include(o => o.OrderItems)
    .FirstOrDefault(o => o.OrderId == __orderId_0)'
2025-10-01 18:43:10.000 +00:00 [DBG] Including navigation: 'Order.OrderItems'.
2025-10-01 18:43:10.007 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Order>(
    asyncEnumerable: new SingleQueryingEnumerable<Order>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Order.OrderId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.BuyerId (Guid) Required FK Index, 1], [Property: Order.EmployeeId (Guid) Required FK Index, 2], [Property: Order.OrderAddress (OrderAddress) Required, 3], [Property: Order.OrderCompletionDate (DateTime?), 4], [Property: Order.OrderCreateDate (DateTime) Required, 5], [Property: Order.OrderPrice (decimal) Required, 6] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: OrderItem.OrderItemId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: OrderItem.CarModelId (Guid) Required FK Index, 8], [Property: OrderItem.OrderId (Guid) Required FK Index, 9], [Property: OrderItem.OrderItemComments (string), 10], [Property: OrderItem.OrderQuantity (long) Required, 11], [Property: OrderItem.UnitPrice (decimal) Required, 12] }
                3 -> 7
            SELECT t.order_id, t.BuyerId, t.EmployeeId, t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, o0.orderitem_id, o0.CarModelId, o0.OrderId, o0.comments, o0.order_quantity, o0.unit_price
            FROM 
            (
                SELECT TOP(1) o.order_id, o.BuyerId, o.EmployeeId, o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
                FROM Orders AS o
                WHERE o.order_id == @__orderId_0
            ) AS t
            LEFT JOIN OrderItems AS o0 ON t.order_id == o0.OrderId
            ORDER BY t.order_id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Order>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-10-01 18:43:10.008 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.008 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.008 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:43:10.009 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:10.009 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:10.009 +00:00 [DBG] Executing DbCommand [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN "OrderItems" AS o0 ON t.order_id = o0."OrderId"
ORDER BY t.order_id
2025-10-01 18:43:10.037 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN "OrderItems" AS o0 ON t.order_id = o0."OrderId"
ORDER BY t.order_id
2025-10-01 18:43:10.085 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.085 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:43:10.085 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.086 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:43:10.088 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:43:10.088 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:43:10.090 +00:00 [DBG] The unchanged property 'Order.OrderPrice' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-10-01 18:43:10.090 +00:00 [DBG] An entity of type 'Order' tracked by 'CarsTradeDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:10.094 +00:00 [DBG] 1 entities were added and 0 entities were removed from navigation 'Order.OrderItems'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:10.101 +00:00 [DBG] 'CarsTradeDbContext' generated a value for the property 'OrderItem.OrderItemId'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:10.103 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:10.104 +00:00 [DBG] The navigation 'OrderItem.Order' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:10.105 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:10.105 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:43:10.109 +00:00 [DBG] Executing 2 update commands as a batch.
2025-10-01 18:43:10.110 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.111 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.112 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-01 18:43:10.116 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-10-01 18:43:10.117 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:43:10.118 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:10.118 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-01 18:43:10.119 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?', @p4='?' (DbType = Int64), @p5='?' (DbType = Decimal), @p7='?' (DbType = Guid), @p6='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OrderItems" (orderitem_id, "CarModelId", "OrderId", comments, order_quantity, unit_price)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE "Orders" SET order_price = @p6
WHERE order_id = @p7;
2025-10-01 18:43:10.124 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?', @p4='?' (DbType = Int64), @p5='?' (DbType = Decimal), @p7='?' (DbType = Guid), @p6='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "OrderItems" (orderitem_id, "CarModelId", "OrderId", comments, order_quantity, unit_price)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
UPDATE "Orders" SET order_price = @p6
WHERE order_id = @p7;
2025-10-01 18:43:10.125 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.125 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:43:10.127 +00:00 [DBG] Committing transaction.
2025-10-01 18:43:10.132 +00:00 [DBG] Committed transaction.
2025-10-01 18:43:10.135 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.135 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:43:10.138 +00:00 [DBG] Disposing transaction.
2025-10-01 18:43:10.139 +00:00 [DBG] An entity of type 'OrderItem' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:10.140 +00:00 [DBG] An entity of type 'Order' tracked by 'CarsTradeDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:10.141 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 2 entities written to the database.
2025-10-01 18:43:10.143 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.143 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.144 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:43:10.144 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:10.144 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:10.145 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:43:10.167 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 18:43:10.190 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.190 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 18:43:10.191 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.192 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 18:43:10.193 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:10.194 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:43:10.194 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 18:43:10.194 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 18:43:10.195 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.195 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.196 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:43:10.196 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:10.196 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:43:10.196 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:43:10.201 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 18:43:10.201 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.202 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 18:43:10.202 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.202 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:43:10.203 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:43:10.203 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 18:43:10.203 +00:00 [INF] Элемент заказа в заказ с ID: "c77f7859-377c-4f0d-ae2b-96d2fa7915de" успешно добавлен
2025-10-01 18:43:10.204 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:43:10.205 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:43:10.206 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:43:10.206 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:43:10.206 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:43:10.207 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:43:10.207 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto'.
2025-10-01 18:43:10.208 +00:00 [INF] Executed action CarsTradeAPI.Features.OrdersOperation.OrderItemsController.AddOrderItems (CarsTradeAPI) in 387.1392ms
2025-10-01 18:43:10.208 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.AddOrderItems (CarsTradeAPI)'
2025-10-01 18:43:10.208 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:43:10.208 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:43:10.210 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-10-01 18:43:10.211 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/OrderItems/AddOrderItem - 200 null application/json; charset=utf-8 396.1935ms
2025-10-01 18:45:36.483 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarInventory/GetCarInventory/All - null null
2025-10-01 18:45:36.508 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarInventory/GetCarInventory/All'
2025-10-01 18:45:36.514 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)' with route pattern 'api/CarInventory/GetCarInventory/All' is valid for the request path '/api/CarInventory/GetCarInventory/All'
2025-10-01 18:45:36.514 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-10-01 18:45:36.514 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:45:36.515 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:45:36.515 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-10-01 18:45:36.515 +00:00 [INF] Route matched with {action = "GetAllCarInventories", controller = "CarInventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto]]] GetAllCarInventories() on controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI).
2025-10-01 18:45:36.516 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:45:36.516 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:45:36.516 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:45:36.516 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:45:36.517 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:45:36.517 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-10-01 18:45:36.517 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-10-01 18:45:36.518 +00:00 [INF] Получен запрос на получение всех CarInventory
2025-10-01 18:45:36.519 +00:00 [INF] Начало обработки команды GetCarInventoryQuery
2025-10-01 18:45:36.541 +00:00 [INF] Этап получения всех объектов CarInventory в репозитории
2025-10-01 18:45:36.586 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:45:36.587 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:45:36.587 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:45:36.587 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.587 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.588 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:45:36.588 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:45:36.588 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:45:36.588 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
2025-10-01 18:45:36.591 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
2025-10-01 18:45:36.612 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:45:36.613 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:45:36.613 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.613 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 21ms reading results.
2025-10-01 18:45:36.613 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.614 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:45:36.614 +00:00 [INF] Все объекты CarInventory успешно получены
2025-10-01 18:45:36.614 +00:00 [INF] Этап получения CarModel с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" в репозитории
2025-10-01 18:45:36.615 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.615 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.615 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:45:36.616 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:45:36.616 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:45:36.616 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 18:45:36.619 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 18:45:36.640 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:45:36.641 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:45:36.641 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.641 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 21ms reading results.
2025-10-01 18:45:36.642 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.642 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:45:36.642 +00:00 [INF] Модель машины с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" успешно получена
2025-10-01 18:45:36.642 +00:00 [INF] Этап получения CarModel с ID: "764c23a4-4add-44ca-968b-ab1813dccc49" в репозитории
2025-10-01 18:45:36.643 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.643 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.643 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:45:36.644 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:45:36.644 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:45:36.644 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 18:45:36.647 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 18:45:36.648 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:45:36.648 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:45:36.648 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.649 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 18:45:36.649 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.649 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:45:36.649 +00:00 [INF] Модель машины с ID: "764c23a4-4add-44ca-968b-ab1813dccc49" успешно получена
2025-10-01 18:45:36.651 +00:00 [INF] Успешное получение списка CarInventory, количество элементов: 2
2025-10-01 18:45:36.651 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:45:36.652 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:45:36.652 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:45:36.652 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:45:36.652 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:45:36.653 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:45:36.653 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 18:45:36.653 +00:00 [INF] Executed action CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI) in 136.6814ms
2025-10-01 18:45:36.654 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-10-01 18:45:36.654 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:45:36.654 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:45:36.655 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:45:36.655 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarInventory/GetCarInventory/All - 200 null application/json; charset=utf-8 172.0075ms
2025-10-01 18:51:12.946 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Orders/GetAllOrders/All - null null
2025-10-01 18:51:12.954 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Orders/GetAllOrders/All'
2025-10-01 18:51:12.955 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetAllOrders (CarsTradeAPI)' with route pattern 'api/Orders/GetAllOrders/All' is valid for the request path '/api/Orders/GetAllOrders/All'
2025-10-01 18:51:12.955 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetAllOrders (CarsTradeAPI)'
2025-10-01 18:51:12.956 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 18:51:12.956 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 18:51:12.956 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetAllOrders (CarsTradeAPI)'
2025-10-01 18:51:12.960 +00:00 [INF] Route matched with {action = "GetAllOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto]]] GetAllOrders() on controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI).
2025-10-01 18:51:12.960 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 18:51:12.961 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 18:51:12.961 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 18:51:12.961 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 18:51:12.962 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 18:51:12.962 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-10-01 18:51:12.963 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-10-01 18:51:12.964 +00:00 [INF] Получение запроса на выдачу всех заказов
2025-10-01 18:51:12.967 +00:00 [INF] Начало обработки команды GetAllOrdersQuery
2025-10-01 18:51:13.043 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 18:51:13.044 +00:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Include(o => o.OrderItems)
    .ThenInclude(oi => oi.CarModel)'
2025-10-01 18:51:13.045 +00:00 [DBG] Including navigation: 'Order.OrderItems'.
2025-10-01 18:51:13.046 +00:00 [DBG] Including navigation: 'OrderItem.CarModel'.
2025-10-01 18:51:13.053 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Order>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Order.OrderId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.BuyerId (Guid) Required FK Index, 1], [Property: Order.EmployeeId (Guid) Required FK Index, 2], [Property: Order.OrderAddress (OrderAddress) Required, 3], [Property: Order.OrderCompletionDate (DateTime?), 4], [Property: Order.OrderCreateDate (DateTime) Required, 5], [Property: Order.OrderPrice (decimal) Required, 6] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: OrderItem.OrderItemId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: OrderItem.CarModelId (Guid) Required FK Index, 8], [Property: OrderItem.OrderId (Guid) Required FK Index, 9], [Property: OrderItem.OrderItemComments (string), 10], [Property: OrderItem.OrderQuantity (long) Required, 11], [Property: OrderItem.UnitPrice (decimal) Required, 12] }
            3 -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: CarModel.CarColor (string) Required, 14], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 15], [Property: CarModel.CarCountry (string) Required, 16], [Property: CarModel.CarEngine (Engine), 17], [Property: CarModel.CarManufacturer (string) Required Index, 18], [Property: CarModel.CarModelName (string) Required Index, 19], [Property: CarModel.CarPrice (decimal) Required, 20], [Property: CarModel.ProductionDateTime (DateTime) Required, 21] }
            4 -> 7
            5 -> 13
        SELECT o.order_id, o.BuyerId, o.EmployeeId, o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price, t.orderitem_id, t.CarModelId, t.OrderId, t.comments, t.order_quantity, t.unit_price, t.car_id, t.car_color, t.car_configuration, t.car_country, t.car_engine, t.car_manufacturer, t.car_model, t.car_price, t.car_productionDateTime
        FROM Orders AS o
        LEFT JOIN 
        (
            SELECT o0.orderitem_id, o0.CarModelId, o0.OrderId, o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
            FROM OrderItems AS o0
            INNER JOIN CarModels AS c ON o0.CarModelId == c.car_id
        ) AS t ON o.order_id == t.OrderId
        ORDER BY o.order_id ASC, t.orderitem_id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Order>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-10-01 18:51:13.054 +00:00 [DBG] Creating DbConnection.
2025-10-01 18:51:13.055 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 18:51:13.055 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:51:13.080 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:51:13.080 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 18:51:13.081 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:51:13.081 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 18:51:13.081 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price, t.orderitem_id, t."CarModelId", t."OrderId", t.comments, t.order_quantity, t.unit_price, t.car_id, t.car_color, t.car_configuration, t.car_country, t.car_engine, t.car_manufacturer, t.car_model, t.car_price, t."car_productionDateTime"
FROM "Orders" AS o
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t ON o.order_id = t."OrderId"
ORDER BY o.order_id, t.orderitem_id
2025-10-01 18:51:13.085 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price, t.orderitem_id, t."CarModelId", t."OrderId", t.comments, t.order_quantity, t.unit_price, t.car_id, t.car_color, t.car_configuration, t.car_country, t.car_engine, t.car_manufacturer, t.car_model, t.car_price, t."car_productionDateTime"
FROM "Orders" AS o
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t ON o.order_id = t."OrderId"
ORDER BY o.order_id, t.orderitem_id
2025-10-01 18:51:13.085 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:51:13.086 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:51:13.086 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:51:13.086 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:51:13.087 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:51:13.087 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:51:13.087 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 18:51:13.089 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:51:13.089 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 3ms reading results.
2025-10-01 18:51:13.089 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:51:13.090 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:51:13.097 +00:00 [INF] Успешное получение 1 заказов
2025-10-01 18:51:13.102 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 18:51:13.102 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 18:51:13.103 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 18:51:13.103 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 18:51:13.103 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 18:51:13.104 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 18:51:13.104 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 18:51:13.105 +00:00 [INF] Executed action CarsTradeAPI.Features.OrdersOperation.OrdersController.GetAllOrders (CarsTradeAPI) in 142.6716ms
2025-10-01 18:51:13.105 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetAllOrders (CarsTradeAPI)'
2025-10-01 18:51:13.105 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 18:51:13.106 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 18:51:13.106 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 18:51:13.106 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Orders/GetAllOrders/All - 200 null application/json; charset=utf-8 160.3766ms
2025-10-01 19:41:57.114 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Orders/GetOrderById/c77f7859-377c-4f0d-ae2b-96d2fa7915de - null null
2025-10-01 19:41:57.138 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Orders/GetOrderById/c77f7859-377c-4f0d-ae2b-96d2fa7915de'
2025-10-01 19:41:57.140 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetOrderById (CarsTradeAPI)' with route pattern 'api/Orders/GetOrderById/{orderId:Guid}' is valid for the request path '/api/Orders/GetOrderById/c77f7859-377c-4f0d-ae2b-96d2fa7915de'
2025-10-01 19:41:57.141 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetOrderById (CarsTradeAPI)'
2025-10-01 19:41:57.142 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 19:41:57.143 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 19:41:57.143 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetOrderById (CarsTradeAPI)'
2025-10-01 19:41:57.152 +00:00 [INF] Route matched with {action = "GetOrderById", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto]] GetOrderById(System.Guid) on controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI).
2025-10-01 19:41:57.153 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 19:41:57.153 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 19:41:57.153 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 19:41:57.154 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 19:41:57.154 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 19:41:57.154 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-10-01 19:41:57.155 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-10-01 19:41:57.155 +00:00 [DBG] Attempting to bind parameter 'orderId' of type 'System.Guid' ...
2025-10-01 19:41:57.157 +00:00 [DBG] Attempting to bind parameter 'orderId' of type 'System.Guid' using the name 'orderId' in request data ...
2025-10-01 19:41:57.160 +00:00 [DBG] Done attempting to bind parameter 'orderId' of type 'System.Guid'.
2025-10-01 19:41:57.160 +00:00 [DBG] Done attempting to bind parameter 'orderId' of type 'System.Guid'.
2025-10-01 19:41:57.160 +00:00 [DBG] Attempting to validate the bound parameter 'orderId' of type 'System.Guid' ...
2025-10-01 19:41:57.161 +00:00 [DBG] Done attempting to validate the bound parameter 'orderId' of type 'System.Guid'.
2025-10-01 19:41:57.163 +00:00 [INF] Получение запроса на выдачу заказа по ID: "c77f7859-377c-4f0d-ae2b-96d2fa7915de"
2025-10-01 19:41:57.170 +00:00 [INF] Начало обработки команды GetOrderByIdQuery
2025-10-01 19:41:57.340 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 19:41:57.342 +00:00 [DBG] Creating DbConnection.
2025-10-01 19:41:57.343 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 19:41:57.343 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:41:57.409 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:41:57.410 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 19:41:57.410 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:41:57.411 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-10-01 19:41:57.411 +00:00 [DBG] Executing DbCommand [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, t0.orderitem_id, t0."CarModelId", t0."OrderId", t0.comments, t0.order_quantity, t0.unit_price, t0.car_id, t0.car_color, t0.car_configuration, t0.car_country, t0.car_engine, t0.car_manufacturer, t0.car_model, t0.car_price, t0."car_productionDateTime"
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t0 ON t.order_id = t0."OrderId"
ORDER BY t.order_id, t0.orderitem_id
2025-10-01 19:41:57.417 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, t0.orderitem_id, t0."CarModelId", t0."OrderId", t0.comments, t0.order_quantity, t0.unit_price, t0.car_id, t0.car_color, t0.car_configuration, t0.car_country, t0.car_engine, t0.car_manufacturer, t0.car_model, t0.car_price, t0."car_productionDateTime"
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t0 ON t.order_id = t0."OrderId"
ORDER BY t.order_id, t0.orderitem_id
2025-10-01 19:41:57.420 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:41:57.421 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:41:57.422 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:41:57.422 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:41:57.423 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:41:57.423 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:41:57.423 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:41:57.424 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:41:57.424 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 6ms reading results.
2025-10-01 19:41:57.425 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:41:57.425 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:41:57.427 +00:00 [INF] Заказ с ID: "c77f7859-377c-4f0d-ae2b-96d2fa7915de" успешно получен
2025-10-01 19:41:57.428 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 19:41:57.429 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 19:41:57.429 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 19:41:57.429 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 19:41:57.430 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 19:41:57.430 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 19:41:57.430 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto'.
2025-10-01 19:41:57.431 +00:00 [INF] Executed action CarsTradeAPI.Features.OrdersOperation.OrdersController.GetOrderById (CarsTradeAPI) in 277.1346ms
2025-10-01 19:41:57.431 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetOrderById (CarsTradeAPI)'
2025-10-01 19:41:57.432 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 19:41:57.432 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:41:57.432 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:41:57.433 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Orders/GetOrderById/c77f7859-377c-4f0d-ae2b-96d2fa7915de - 200 null application/json; charset=utf-8 339.7935ms
2025-10-01 19:42:02.217 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Orders/GetOrderById/c77f7859-377c-4f0d-ae2b-96d2fa7915de - null null
2025-10-01 19:42:02.217 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Orders/GetOrderById/c77f7859-377c-4f0d-ae2b-96d2fa7915de'
2025-10-01 19:42:02.217 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetOrderById (CarsTradeAPI)' with route pattern 'api/Orders/GetOrderById/{orderId:Guid}' is valid for the request path '/api/Orders/GetOrderById/c77f7859-377c-4f0d-ae2b-96d2fa7915de'
2025-10-01 19:42:02.218 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetOrderById (CarsTradeAPI)'
2025-10-01 19:42:02.218 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 19:42:02.218 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 19:42:02.219 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetOrderById (CarsTradeAPI)'
2025-10-01 19:42:02.219 +00:00 [INF] Route matched with {action = "GetOrderById", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto]] GetOrderById(System.Guid) on controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI).
2025-10-01 19:42:02.219 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 19:42:02.220 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 19:42:02.220 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 19:42:02.220 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 19:42:02.220 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 19:42:02.221 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-10-01 19:42:02.221 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-10-01 19:42:02.221 +00:00 [DBG] Attempting to bind parameter 'orderId' of type 'System.Guid' ...
2025-10-01 19:42:02.222 +00:00 [DBG] Attempting to bind parameter 'orderId' of type 'System.Guid' using the name 'orderId' in request data ...
2025-10-01 19:42:02.222 +00:00 [DBG] Done attempting to bind parameter 'orderId' of type 'System.Guid'.
2025-10-01 19:42:02.222 +00:00 [DBG] Done attempting to bind parameter 'orderId' of type 'System.Guid'.
2025-10-01 19:42:02.223 +00:00 [DBG] Attempting to validate the bound parameter 'orderId' of type 'System.Guid' ...
2025-10-01 19:42:02.223 +00:00 [DBG] Done attempting to validate the bound parameter 'orderId' of type 'System.Guid'.
2025-10-01 19:42:02.223 +00:00 [INF] Получение запроса на выдачу заказа по ID: "c77f7859-377c-4f0d-ae2b-96d2fa7915de"
2025-10-01 19:42:02.225 +00:00 [INF] Начало обработки команды GetOrderByIdQuery
2025-10-01 19:42:02.254 +00:00 [INF] Получение заказа с ID "c77f7859-377c-4f0d-ae2b-96d2fa7915de" из кэша
2025-10-01 19:42:02.255 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 19:42:02.255 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 19:42:02.255 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 19:42:02.256 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 19:42:02.256 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 19:42:02.256 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 19:42:02.257 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto'.
2025-10-01 19:42:02.257 +00:00 [INF] Executed action CarsTradeAPI.Features.OrdersOperation.OrdersController.GetOrderById (CarsTradeAPI) in 36.4828ms
2025-10-01 19:42:02.257 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetOrderById (CarsTradeAPI)'
2025-10-01 19:42:02.258 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Orders/GetOrderById/c77f7859-377c-4f0d-ae2b-96d2fa7915de - 200 null application/json; charset=utf-8 41.062ms
2025-10-01 19:49:06.677 +00:00 [INF] Request starting HTTP/2 DELETE https://localhost:8081/api/OrderItems/DeleteOrderItems - application/json 162
2025-10-01 19:49:06.678 +00:00 [DBG] 1 candidate(s) found for the request path '/api/OrderItems/DeleteOrderItems'
2025-10-01 19:49:06.678 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.DeleteOrderItems (CarsTradeAPI)' with route pattern 'api/OrderItems/DeleteOrderItems' is valid for the request path '/api/OrderItems/DeleteOrderItems'
2025-10-01 19:49:06.678 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.DeleteOrderItems (CarsTradeAPI)'
2025-10-01 19:49:06.679 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 19:49:06.679 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 19:49:06.680 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.DeleteOrderItems (CarsTradeAPI)'
2025-10-01 19:49:06.683 +00:00 [INF] Route matched with {action = "DeleteOrderItems", controller = "OrderItems"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto]] DeleteOrderItems(CarsTradeAPI.Features.OrdersOperation.OrderItems.DeleteOrderItems.DeleteOrderItemsCommand) on controller CarsTradeAPI.Features.OrdersOperation.OrderItemsController (CarsTradeAPI).
2025-10-01 19:49:06.683 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 19:49:06.683 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 19:49:06.684 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 19:49:06.684 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 19:49:06.684 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 19:49:06.684 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrderItemsController (CarsTradeAPI)
2025-10-01 19:49:06.685 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrderItemsController (CarsTradeAPI)
2025-10-01 19:49:06.685 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.DeleteOrderItems.DeleteOrderItemsCommand' ...
2025-10-01 19:49:06.685 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.DeleteOrderItems.DeleteOrderItemsCommand' using the name '' in request data ...
2025-10-01 19:49:06.686 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-10-01 19:49:06.689 +00:00 [DBG] Connection id "0HNG136E4JFM4", Request id "0HNG136E4JFM4:00000019": started reading request body.
2025-10-01 19:49:06.689 +00:00 [DBG] Connection id "0HNG136E4JFM4", Request id "0HNG136E4JFM4:00000019": done reading request body.
2025-10-01 19:49:06.692 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.DeleteOrderItems.DeleteOrderItemsCommand'
2025-10-01 19:49:06.693 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.DeleteOrderItems.DeleteOrderItemsCommand'.
2025-10-01 19:49:06.693 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.DeleteOrderItems.DeleteOrderItemsCommand'.
2025-10-01 19:49:06.693 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.DeleteOrderItems.DeleteOrderItemsCommand' ...
2025-10-01 19:49:06.698 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.OrderItems.DeleteOrderItems.DeleteOrderItemsCommand'.
2025-10-01 19:49:06.699 +00:00 [INF] Получение запроса на удаление элемента заказа с ID: ["54424734-15b6-4d5c-853d-4bdd93668e95"] из заказа с ID: "c77f7859-377c-4f0d-ae2b-96d2fa7915de"
2025-10-01 19:49:06.705 +00:00 [INF] Начало обработки запроса DeleteOrderItemsCommand
2025-10-01 19:49:06.706 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 19:49:06.707 +00:00 [DBG] Creating DbConnection.
2025-10-01 19:49:06.708 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 19:49:06.708 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.772 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.772 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 19:49:06.773 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.773 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.773 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 19:49:06.776 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-10-01 19:49:06.776 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.776 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 19:49:06.776 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.777 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:06.778 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.778 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.778 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 19:49:06.778 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.779 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.779 +00:00 [DBG] Executing DbCommand [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, t0.orderitem_id, t0."CarModelId", t0."OrderId", t0.comments, t0.order_quantity, t0.unit_price, t0.car_id, t0.car_color, t0.car_configuration, t0.car_country, t0.car_engine, t0.car_manufacturer, t0.car_model, t0.car_price, t0."car_productionDateTime"
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t0 ON t.order_id = t0."OrderId"
ORDER BY t.order_id, t0.orderitem_id
2025-10-01 19:49:06.783 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__orderId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT t.order_id, t."BuyerId", t."EmployeeId", t.order_delivery_address, t.order_completion_date, t.order_create_date, t.order_price, t0.orderitem_id, t0."CarModelId", t0."OrderId", t0.comments, t0.order_quantity, t0.unit_price, t0.car_id, t0.car_color, t0.car_configuration, t0.car_country, t0.car_engine, t0.car_manufacturer, t0.car_model, t0.car_price, t0."car_productionDateTime"
FROM (
    SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price
    FROM "Orders" AS o
    WHERE o.order_id = @__orderId_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t0 ON t.order_id = t0."OrderId"
ORDER BY t.order_id, t0.orderitem_id
2025-10-01 19:49:06.784 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.785 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.785 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.785 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.786 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.786 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.786 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.787 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.787 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 3ms reading results.
2025-10-01 19:49:06.787 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.788 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:06.792 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.793 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.793 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 19:49:06.793 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.794 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.794 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-10-01 19:49:06.796 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-10-01 19:49:06.798 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.798 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.798 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 19:49:06.798 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.799 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:06.799 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.800 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 19:49:06.800 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 19:49:06.801 +00:00 [DBG] 0 entities were added and 1 entities were removed from navigation 'Order.OrderItems'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.803 +00:00 [DBG] An entity of type 'OrderItem' tracked by 'CarsTradeDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.808 +00:00 [DBG] An entity of type 'OrderItem' changed to '"Deleted"' state due to severed required relationship to its parent entity of type 'Order'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.808 +00:00 [DBG] An entity of type 'OrderItem' tracked by 'CarsTradeDbContext' changed state from '"Modified"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.810 +00:00 [DBG] The navigation 'OrderItem.Order' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.810 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 19:49:06.815 +00:00 [DBG] Executing 2 update commands as a batch.
2025-10-01 19:49:06.815 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.816 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.816 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-10-01 19:49:06.816 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-10-01 19:49:06.817 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 19:49:06.817 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.818 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.818 +00:00 [DBG] Executing DbCommand [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CarInventories" SET car_model_id = @p0, last_updated = @p1, quantity = @p2
WHERE inventory_id = @p3;
DELETE FROM "OrderItems"
WHERE orderitem_id = @p4;
2025-10-01 19:49:06.841 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64), @p4='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CarInventories" SET car_model_id = @p0, last_updated = @p1, quantity = @p2
WHERE inventory_id = @p3;
DELETE FROM "OrderItems"
WHERE orderitem_id = @p4;
2025-10-01 19:49:06.841 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.862 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 19:49:06.863 +00:00 [DBG] Committing transaction.
2025-10-01 19:49:06.864 +00:00 [DBG] Committed transaction.
2025-10-01 19:49:06.865 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.865 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:06.866 +00:00 [DBG] Disposing transaction.
2025-10-01 19:49:06.866 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.870 +00:00 [DBG] An entity of type 'OrderItem' tracked by 'CarsTradeDbContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.870 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 2 entities written to the database.
2025-10-01 19:49:06.872 +00:00 [DBG] An entity of type 'Order' tracked by 'CarsTradeDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.872 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 19:49:06.872 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 19:49:06.872 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 19:49:06.874 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.874 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.875 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 19:49:06.875 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.875 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.875 +00:00 [DBG] Executing DbCommand [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Object), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Orders" SET "BuyerId" = @p0, "EmployeeId" = @p1, order_delivery_address = @p2, order_completion_date = @p3, order_create_date = @p4, order_price = @p5
WHERE order_id = @p6;
2025-10-01 19:49:06.882 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Object), @p3='?' (DbType = DateTime), @p4='?' (DbType = DateTime), @p5='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Orders" SET "BuyerId" = @p0, "EmployeeId" = @p1, order_delivery_address = @p2, order_completion_date = @p3, order_create_date = @p4, order_price = @p5
WHERE order_id = @p6;
2025-10-01 19:49:06.883 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.883 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 19:49:06.883 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.884 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:06.884 +00:00 [DBG] An entity of type 'Order' tracked by 'CarsTradeDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.884 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 19:49:06.885 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.886 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.886 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 19:49:06.886 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.886 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.887 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 19:49:06.889 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-10-01 19:49:06.911 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.911 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 19:49:06.912 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.912 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:06.913 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.913 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-10-01 19:49:06.913 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-10-01 19:49:06.914 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-10-01 19:49:06.914 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.915 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.915 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 19:49:06.915 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.916 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:06.916 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 19:49:06.919 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-10-01 19:49:06.941 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.941 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-10-01 19:49:06.941 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.941 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:06.942 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:06.942 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-10-01 19:49:06.942 +00:00 [INF] Элементы заказа из заказа с ID: "c77f7859-377c-4f0d-ae2b-96d2fa7915de" успешно удалены
2025-10-01 19:49:06.943 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 19:49:06.943 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 19:49:06.943 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 19:49:06.943 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 19:49:06.944 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 19:49:06.944 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 19:49:06.944 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto'.
2025-10-01 19:49:06.945 +00:00 [INF] Executed action CarsTradeAPI.Features.OrdersOperation.OrderItemsController.DeleteOrderItems (CarsTradeAPI) in 260.5067ms
2025-10-01 19:49:06.945 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.OrdersOperation.OrderItemsController.DeleteOrderItems (CarsTradeAPI)'
2025-10-01 19:49:06.946 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 19:49:06.946 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:06.946 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:06.946 +00:00 [INF] Request finished HTTP/2 DELETE https://localhost:8081/api/OrderItems/DeleteOrderItems - 200 null application/json; charset=utf-8 269.2116ms
2025-10-01 19:49:23.209 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarInventory/GetCarInventory/All - null null
2025-10-01 19:49:23.210 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarInventory/GetCarInventory/All'
2025-10-01 19:49:23.210 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)' with route pattern 'api/CarInventory/GetCarInventory/All' is valid for the request path '/api/CarInventory/GetCarInventory/All'
2025-10-01 19:49:23.210 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-10-01 19:49:23.211 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-10-01 19:49:23.212 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-10-01 19:49:23.212 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-10-01 19:49:23.213 +00:00 [INF] Route matched with {action = "GetAllCarInventories", controller = "CarInventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto]]] GetAllCarInventories() on controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI).
2025-10-01 19:49:23.214 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-10-01 19:49:23.214 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-10-01 19:49:23.214 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-10-01 19:49:23.215 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-10-01 19:49:23.215 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-10-01 19:49:23.216 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-10-01 19:49:23.216 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-10-01 19:49:23.217 +00:00 [INF] Получен запрос на получение всех CarInventory
2025-10-01 19:49:23.219 +00:00 [INF] Начало обработки команды GetCarInventoryQuery
2025-10-01 19:49:23.221 +00:00 [INF] Этап получения всех объектов CarInventory в репозитории
2025-10-01 19:49:23.265 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-10-01 19:49:23.266 +00:00 [DBG] Creating DbConnection.
2025-10-01 19:49:23.266 +00:00 [DBG] Created DbConnection. (0ms).
2025-10-01 19:49:23.267 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.267 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.267 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 19:49:23.268 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:23.268 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:23.268 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
2025-10-01 19:49:23.270 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
2025-10-01 19:49:23.271 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:23.271 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:23.272 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.272 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 19:49:23.272 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.273 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:23.273 +00:00 [INF] Все объекты CarInventory успешно получены
2025-10-01 19:49:23.274 +00:00 [INF] Этап получения CarModel с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" в репозитории
2025-10-01 19:49:23.274 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.274 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.275 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 19:49:23.275 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:23.275 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:23.276 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 19:49:23.279 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 19:49:23.280 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:23.280 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:23.281 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.281 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-10-01 19:49:23.282 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.282 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:23.282 +00:00 [INF] Модель машины с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" успешно получена
2025-10-01 19:49:23.283 +00:00 [INF] Этап получения CarModel с ID: "764c23a4-4add-44ca-968b-ab1813dccc49" в репозитории
2025-10-01 19:49:23.283 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.283 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.284 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-10-01 19:49:23.284 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:23.284 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-10-01 19:49:23.284 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 19:49:23.287 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-10-01 19:49:23.308 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:23.309 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-10-01 19:49:23.309 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.309 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 22ms reading results.
2025-10-01 19:49:23.310 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.310 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:23.310 +00:00 [INF] Модель машины с ID: "764c23a4-4add-44ca-968b-ab1813dccc49" успешно получена
2025-10-01 19:49:23.312 +00:00 [INF] Успешное получение списка CarInventory, количество элементов: 2
2025-10-01 19:49:23.313 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-10-01 19:49:23.313 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-10-01 19:49:23.313 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-10-01 19:49:23.314 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-10-01 19:49:23.314 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-10-01 19:49:23.314 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-10-01 19:49:23.315 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-01 19:49:23.315 +00:00 [INF] Executed action CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI) in 99.9233ms
2025-10-01 19:49:23.316 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-10-01 19:49:23.316 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-10-01 19:49:23.317 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-10-01 19:49:23.318 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-10-01 19:49:23.359 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarInventory/GetCarInventory/All - 200 null application/json; charset=utf-8 129.4704ms
2025-10-01 20:32:34.956 +00:00 [DBG] Connection id "0HNG136E4JFM4" received FIN.
2025-10-01 20:32:34.992 +00:00 [DBG] Connection id "0HNG136E4JFM4" is closed. The last processed stream ID was 27.
2025-10-01 20:32:34.993 +00:00 [DBG] The connection queue processing loop for 0HNG136E4JFM4 completed.
2025-10-01 20:32:34.994 +00:00 [DBG] Connection id "0HNG136E4JFM4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-10-01 20:32:35.005 +00:00 [DBG] Connection id "0HNG136E4JFM4" stopped.
