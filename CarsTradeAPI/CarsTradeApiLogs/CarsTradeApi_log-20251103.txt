2025-11-03 18:18:36.897 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-03 18:18:37.627 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 18:18:37.641 +00:00 [DBG] Creating DbConnection.
2025-11-03 18:18:37.644 +00:00 [DBG] Created DbConnection. (2ms).
2025-11-03 18:18:37.657 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:37.703 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 18:18:37.705 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:37.709 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-11-03 18:18:37.779 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-03 18:18:37.855 +00:00 [DBG] Hosting starting
2025-11-03 18:18:37.888 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:37.892 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:37.901 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (9ms).
2025-11-03 18:18:37.909 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-03 18:18:37.910 +00:00 [DBG] Creating DbConnection.
2025-11-03 18:18:37.911 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 18:18:37.917 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (4ms).
2025-11-03 18:18:37.918 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (9ms).
2025-11-03 18:18:37.919 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.038 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.045 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 18:18:38.099 +00:00 [WRN] Using an in-memory repository. Keys will not be persisted to storage.
2025-11-03 18:18:38.100 +00:00 [WRN] Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.
2025-11-03 18:18:38.110 +00:00 [DBG] Starting bus instances: IBus
2025-11-03 18:18:38.116 +00:00 [DBG] Starting bus: "rabbitmq://carstradeapi_rabbitmq/"
2025-11-03 18:18:38.139 +00:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2025-11-03 18:18:38.139 +00:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2025-11-03 18:18:38.165 +00:00 [INF] Creating key {b5d85cd0-d692-421d-bcbb-36925735f0ff} with creation date 2025-11-03 18:18:38Z, activation date 2025-11-03 18:18:38Z, and expiration date 2026-02-01 18:18:38Z.
2025-11-03 18:18:38.167 +00:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 18:18:38.171 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.216 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (44ms).
2025-11-03 18:18:38.218 +00:00 [DBG] Connect: guest@carstradeapi_rabbitmq:5672/
2025-11-03 18:18:38.221 +00:00 [DBG] Descriptor deserializer type for key {b5d85cd0-d692-421d-bcbb-36925735f0ff} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2025-11-03 18:18:38.227 +00:00 [DBG] No key escrow sink found. Not writing key {b5d85cd0-d692-421d-bcbb-36925735f0ff} to escrow.
2025-11-03 18:18:38.228 +00:00 [WRN] No XML encryptor configured. Key {b5d85cd0-d692-421d-bcbb-36925735f0ff} may be persisted to storage in unencrypted form.
2025-11-03 18:18:38.229 +00:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2025-11-03 18:18:38.230 +00:00 [DBG] Found key {b5d85cd0-d692-421d-bcbb-36925735f0ff}.
2025-11-03 18:18:38.251 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.252 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.253 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:18:38.254 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:18:38.254 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-03 18:18:38.255 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-03 18:18:38.264 +00:00 [DBG] Considering key {b5d85cd0-d692-421d-bcbb-36925735f0ff} with expiration date 2026-02-01 18:18:38Z as default key.
2025-11-03 18:18:38.265 +00:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-03 18:18:38.282 +00:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-03 18:18:38.287 +00:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-11-03 18:18:38.287 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.288 +00:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-11-03 18:18:38.290 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 22ms reading results.
2025-11-03 18:18:38.292 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.292 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:18:38.297 +00:00 [DBG] Migrating using database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.297 +00:00 [DBG] Using key {b5d85cd0-d692-421d-bcbb-36925735f0ff} as the default key.
2025-11-03 18:18:38.298 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.300 +00:00 [DBG] Key ring with default key {b5d85cd0-d692-421d-bcbb-36925735f0ff} was loaded during application startup.
2025-11-03 18:18:38.406 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.406 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.407 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:18:38.420 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-03 18:18:38.420 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-11-03 18:18:38.420 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-11-03 18:18:38.421 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.421 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.422 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 18:18:38.447 +00:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 18:18:38.447 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.448 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:18:38.449 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.542 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.543 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.543 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:18:38.544 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-03 18:18:38.544 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-11-03 18:18:38.544 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-11-03 18:18:38.545 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.545 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.546 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 18:18:38.569 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 18:18:38.569 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.570 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:18:38.570 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.571 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.572 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:18:38.584 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (5ms).
2025-11-03 18:18:38.585 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (13ms).
2025-11-03 18:18:38.585 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-03 18:18:38.616 +00:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-03 18:18:38.617 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.617 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 18:18:38.618 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:18:38.618 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:18:38.626 +00:00 [DBG] Connected: guest@carstradeapi_rabbitmq:5672/ (address: amqp://carstradeapi_rabbitmq:5672, local: 53096)
2025-11-03 18:18:38.645 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-11-03 18:18:38.800 +00:00 [DBG] Endpoint Ready: "rabbitmq://carstradeapi_rabbitmq/03a4d82d70bf_CarsTradeAPI_bus_kyyyyy8q3na1hy6pbdxbsbmefs?temporary=true"
2025-11-03 18:18:38.804 +00:00 [INF] Bus started: "rabbitmq://carstradeapi_rabbitmq/"
2025-11-03 18:18:38.869 +00:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 2AE5B9E8B7B0EDFD86FD709A56EA7C92E2569E52)
2025-11-03 18:18:39.139 +00:00 [INF] Now listening on: http://[::]:8080
2025-11-03 18:18:39.139 +00:00 [INF] Now listening on: https://[::]:8081
2025-11-03 18:18:39.139 +00:00 [DBG] Loaded hosting startup assembly CarsTradeAPI
2025-11-03 18:18:39.140 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-03 18:18:39.141 +00:00 [INF] Hosting environment: Development
2025-11-03 18:18:39.141 +00:00 [INF] Content root path: /app
2025-11-03 18:18:39.141 +00:00 [DBG] Hosting started
2025-11-03 18:18:40.267 +00:00 [DBG] Connection id "0HNGR0LL26GP0" accepted.
2025-11-03 18:18:40.269 +00:00 [DBG] Connection id "0HNGR0LL26GP0" started.
2025-11-03 18:18:40.297 +00:00 [DBG] Connection 0HNGR0LL26GP0 established using the following protocol: "Tls13"
2025-11-03 18:18:40.363 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger - null null
2025-11-03 18:18:40.364 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-03 18:18:40.380 +00:00 [DBG] No candidates found for the request path '/swagger'
2025-11-03 18:18:40.381 +00:00 [DBG] Request did not match any endpoints
2025-11-03 18:18:40.431 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger - 301 0 null 68.9835ms
2025-11-03 18:18:40.458 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/index.html - null null
2025-11-03 18:18:40.458 +00:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-03 18:18:40.458 +00:00 [DBG] Request did not match any endpoints
2025-11-03 18:18:40.556 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/index.html - 200 null text/html;charset=utf-8 98.494ms
2025-11-03 18:18:40.593 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/swagger-ui.css - null null
2025-11-03 18:18:40.594 +00:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2025-11-03 18:18:40.595 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/swagger-ui-standalone-preset.js - null null
2025-11-03 18:18:40.595 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/swagger-ui-bundle.js - null null
2025-11-03 18:18:40.595 +00:00 [DBG] Request did not match any endpoints
2025-11-03 18:18:40.596 +00:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2025-11-03 18:18:40.596 +00:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2025-11-03 18:18:40.597 +00:00 [DBG] Request did not match any endpoints
2025-11-03 18:18:40.597 +00:00 [DBG] Request did not match any endpoints
2025-11-03 18:18:40.653 +00:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-11-03 18:18:40.653 +00:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-11-03 18:18:40.654 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 58.7902ms
2025-11-03 18:18:40.654 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/swagger-ui.css - 200 152034 text/css 60.3013ms
2025-11-03 18:18:40.725 +00:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-11-03 18:18:40.726 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 131.1294ms
2025-11-03 18:18:40.828 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - null null
2025-11-03 18:18:40.828 +00:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-03 18:18:40.829 +00:00 [DBG] Request did not match any endpoints
2025-11-03 18:18:41.058 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 230.5847ms
2025-11-03 18:32:21.411 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/EmployeeAuthentication/Authenticate - application/json 53
2025-11-03 18:32:21.470 +00:00 [DBG] 1 candidate(s) found for the request path '/api/EmployeeAuthentication/Authenticate'
2025-11-03 18:32:21.473 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)' with route pattern 'api/EmployeeAuthentication/Authenticate' is valid for the request path '/api/EmployeeAuthentication/Authenticate'
2025-11-03 18:32:21.474 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 18:32:21.476 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 18:32:22.259 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-03 18:32:22.261 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 18:32:22.279 +00:00 [INF] Route matched with {action = "Authenticate", controller = "EmployeeAuthentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.AuthResultDto]] Authenticate(CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand) on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI).
2025-11-03 18:32:22.280 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 18:32:22.280 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 18:32:22.281 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 18:32:22.281 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 18:32:22.282 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 18:32:22.283 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI)
2025-11-03 18:32:22.285 +00:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-03 18:32:22.286 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI)
2025-11-03 18:32:22.304 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' ...
2025-11-03 18:32:22.306 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' using the name '' in request data ...
2025-11-03 18:32:22.307 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-03 18:32:22.329 +00:00 [DBG] Connection id "0HNGR0LL26GP0", Request id "0HNGR0LL26GP0:0000000D": started reading request body.
2025-11-03 18:32:22.329 +00:00 [DBG] Connection id "0HNGR0LL26GP0", Request id "0HNGR0LL26GP0:0000000D": done reading request body.
2025-11-03 18:32:22.337 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'
2025-11-03 18:32:22.338 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 18:32:22.339 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 18:32:22.339 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' ...
2025-11-03 18:32:22.344 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 18:32:22.346 +00:00 [INF] Начало обработки запроса аутентификации сотрудника
2025-11-03 18:32:22.447 +00:00 [INF] Начало обработки команды EmployeeAuthenticationCommand
2025-11-03 18:32:22.448 +00:00 [INF] Этап получения сотрудника по логину Testuser1 в репозитории
2025-11-03 18:32:22.496 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 18:32:22.516 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()
    .FirstOrDefault(x => x.EmployeeLogin == __login_0)'
2025-11-03 18:32:22.636 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Employee>(
    asyncEnumerable: new SingleQueryingEnumerable<Employee>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Employee.EmployeeId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Employee.EmployeeAge (uint) Required, 1], [Property: Employee.EmployeeLogin (string) Required Index, 2], [Property: Employee.EmployeeMiddlename (string) Required, 3], [Property: Employee.EmployeeName (string) Required, 4], [Property: Employee.EmployeePassword (string) Required MaxLength(260), 5], [Property: Employee.EmployeeRole (string) Required, 6], [Property: Employee.EmployeeSellCounter (uint?), 7], [Property: Employee.EmployeeSurname (string) Required, 8] }
            SELECT TOP(1) e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
            FROM Employees AS e
            WHERE e.employee_login == @__login_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Employee>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 18:32:22.655 +00:00 [DBG] Creating DbConnection.
2025-11-03 18:32:22.656 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 18:32:22.656 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:32:22.686 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:32:22.687 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:32:22.687 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:32:22.694 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-11-03 18:32:22.696 +00:00 [DBG] Executing DbCommand [Parameters=[@__login_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_login = @__login_0
LIMIT 1
2025-11-03 18:32:22.711 +00:00 [INF] Executed DbCommand (17ms) [Parameters=[@__login_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_login = @__login_0
LIMIT 1
2025-11-03 18:32:22.714 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:32:22.714 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-11-03 18:32:22.714 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:32:22.715 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:32:22.716 +00:00 [WRN] Попытка получить несуществующего пользователя с логином: Testuser1
2025-11-03 18:32:22.716 +00:00 [WRN] Попытка входа с несуществующим логином: Testuser1
2025-11-03 18:32:22.720 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 18:32:22.723 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 18:32:22.724 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 18:32:22.724 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 18:32:22.724 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 18:32:22.725 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 18:32:22.726 +00:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-03 18:32:22.746 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI) in 460.8144ms
2025-11-03 18:32:22.747 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 18:32:22.749 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 18:32:22.751 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:32:22.752 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-11-03 18:32:22.752 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/EmployeeAuthentication/Authenticate - 404 null application/json; charset=utf-8 1341.246ms
2025-11-03 18:32:34.054 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/EmployeeAuthentication/Authenticate - application/json 53
2025-11-03 18:32:34.076 +00:00 [DBG] 1 candidate(s) found for the request path '/api/EmployeeAuthentication/Authenticate'
2025-11-03 18:32:34.077 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)' with route pattern 'api/EmployeeAuthentication/Authenticate' is valid for the request path '/api/EmployeeAuthentication/Authenticate'
2025-11-03 18:32:34.077 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 18:32:34.077 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 18:32:34.078 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-03 18:32:34.079 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 18:32:34.079 +00:00 [INF] Route matched with {action = "Authenticate", controller = "EmployeeAuthentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.AuthResultDto]] Authenticate(CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand) on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI).
2025-11-03 18:32:34.080 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 18:32:34.080 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 18:32:34.080 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 18:32:34.080 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 18:32:34.081 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 18:32:34.081 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI)
2025-11-03 18:32:34.082 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI)
2025-11-03 18:32:34.082 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' ...
2025-11-03 18:32:34.083 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' using the name '' in request data ...
2025-11-03 18:32:34.083 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-03 18:32:34.084 +00:00 [DBG] Connection id "0HNGR0LL26GP0", Request id "0HNGR0LL26GP0:0000000F": started reading request body.
2025-11-03 18:32:34.084 +00:00 [DBG] Connection id "0HNGR0LL26GP0", Request id "0HNGR0LL26GP0:0000000F": done reading request body.
2025-11-03 18:32:34.084 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'
2025-11-03 18:32:34.085 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 18:32:34.085 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 18:32:34.085 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' ...
2025-11-03 18:32:34.086 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 18:32:34.087 +00:00 [INF] Начало обработки запроса аутентификации сотрудника
2025-11-03 18:32:34.089 +00:00 [INF] Начало обработки команды EmployeeAuthenticationCommand
2025-11-03 18:32:34.089 +00:00 [INF] Этап получения сотрудника по логину TestUser1 в репозитории
2025-11-03 18:32:34.122 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 18:32:34.127 +00:00 [DBG] Creating DbConnection.
2025-11-03 18:32:34.127 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 18:32:34.129 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:32:34.129 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:32:34.129 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:32:34.130 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:32:34.132 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-03 18:32:34.132 +00:00 [DBG] Executing DbCommand [Parameters=[@__login_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_login = @__login_0
LIMIT 1
2025-11-03 18:32:34.155 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__login_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_login = @__login_0
LIMIT 1
2025-11-03 18:32:34.248 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:32:34.275 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:32:34.276 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 99ms reading results.
2025-11-03 18:32:34.276 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:32:34.277 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:32:34.277 +00:00 [INF] Сотрудник успешно получен с логином: TestUser1
2025-11-03 18:32:34.427 +00:00 [INF] Пользователь с логином: TestUser1 успешно аутентифицирован
2025-11-03 18:32:34.428 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 18:32:34.428 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 18:32:34.428 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 18:32:34.428 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 18:32:34.429 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 18:32:34.429 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 18:32:34.429 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.AuthResultDto'.
2025-11-03 18:32:34.435 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI) in 353.7385ms
2025-11-03 18:32:34.435 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 18:32:34.436 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 18:32:34.436 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:32:34.436 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:32:34.437 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/EmployeeAuthentication/Authenticate - 200 null application/json; charset=utf-8 382.3688ms
2025-11-03 18:33:17.359 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Orders/GetAllOrders/All - null null
2025-11-03 18:33:17.387 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Orders/GetAllOrders/All'
2025-11-03 18:33:17.387 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetAllOrders (CarsTradeAPI)' with route pattern 'api/Orders/GetAllOrders/All' is valid for the request path '/api/Orders/GetAllOrders/All'
2025-11-03 18:33:17.388 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetAllOrders (CarsTradeAPI)'
2025-11-03 18:33:17.388 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 18:33:17.415 +00:00 [DBG] Successfully validated the token.
2025-11-03 18:33:17.417 +00:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-03 18:33:17.421 +00:00 [DBG] Authorization was successful.
2025-11-03 18:33:17.422 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetAllOrders (CarsTradeAPI)'
2025-11-03 18:33:17.425 +00:00 [INF] Route matched with {action = "GetAllOrders", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto]]] GetAllOrders() on controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI).
2025-11-03 18:33:17.425 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 18:33:17.426 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 18:33:17.426 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 18:33:17.426 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 18:33:17.426 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 18:33:17.427 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-11-03 18:33:17.428 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-11-03 18:33:17.428 +00:00 [INF] Получение запроса на выдачу всех заказов
2025-11-03 18:33:17.433 +00:00 [INF] Начало обработки команды GetAllOrdersQuery
2025-11-03 18:33:17.767 +00:00 [INF] Этап получения всех заказов в репозитории
2025-11-03 18:33:17.769 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 18:33:17.775 +00:00 [DBG] Compiling query expression: 
'DbSet<Order>()
    .Include(o => o.OrderItems)
    .ThenInclude(oi => oi.CarModel)'
2025-11-03 18:33:17.785 +00:00 [DBG] Including navigation: 'Order.OrderItems'.
2025-11-03 18:33:17.790 +00:00 [DBG] Including navigation: 'OrderItem.CarModel'.
2025-11-03 18:33:17.842 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Order>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: Order.OrderId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Order.BuyerId (Guid) Required FK Index, 1], [Property: Order.EmployeeId (Guid) Required FK Index, 2], [Property: Order.OrderAddress (OrderAddress) Required, 3], [Property: Order.OrderCompletionDate (DateTime?), 4], [Property: Order.OrderCreateDate (DateTime) Required, 5], [Property: Order.OrderPrice (decimal) Required, 6] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: OrderItem.OrderItemId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: OrderItem.CarModelId (Guid) Required FK Index, 8], [Property: OrderItem.OrderId (Guid) Required FK Index, 9], [Property: OrderItem.OrderItemComments (string), 10], [Property: OrderItem.OrderQuantity (long) Required, 11], [Property: OrderItem.UnitPrice (decimal) Required, 12] }
            3 -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 13], [Property: CarModel.CarColor (string) Required, 14], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 15], [Property: CarModel.CarCountry (string) Required, 16], [Property: CarModel.CarEngine (Engine), 17], [Property: CarModel.CarManufacturer (string) Required Index, 18], [Property: CarModel.CarModelName (string) Required Index, 19], [Property: CarModel.CarPrice (decimal) Required, 20], [Property: CarModel.ProductionDateTime (DateTime) Required, 21] }
            4 -> 7
            5 -> 13
        SELECT o.order_id, o.BuyerId, o.EmployeeId, o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price, t.orderitem_id, t.CarModelId, t.OrderId, t.comments, t.order_quantity, t.unit_price, t.car_id, t.car_color, t.car_configuration, t.car_country, t.car_engine, t.car_manufacturer, t.car_model, t.car_price, t.car_productionDateTime
        FROM Orders AS o
        LEFT JOIN 
        (
            SELECT o0.orderitem_id, o0.CarModelId, o0.OrderId, o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
            FROM OrderItems AS o0
            INNER JOIN CarModels AS c ON o0.CarModelId == c.car_id
        ) AS t ON o.order_id == t.OrderId
        ORDER BY o.order_id ASC, t.orderitem_id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Order>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-11-03 18:33:17.845 +00:00 [DBG] Creating DbConnection.
2025-11-03 18:33:17.846 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 18:33:17.846 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:33:17.846 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:33:17.846 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:33:17.847 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:33:17.847 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:33:17.847 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price, t.orderitem_id, t."CarModelId", t."OrderId", t.comments, t.order_quantity, t.unit_price, t.car_id, t.car_color, t.car_configuration, t.car_country, t.car_engine, t.car_manufacturer, t.car_model, t.car_price, t."car_productionDateTime"
FROM "Orders" AS o
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t ON o.order_id = t."OrderId"
ORDER BY o.order_id, t.orderitem_id
2025-11-03 18:33:17.855 +00:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT o.order_id, o."BuyerId", o."EmployeeId", o.order_delivery_address, o.order_completion_date, o.order_create_date, o.order_price, t.orderitem_id, t."CarModelId", t."OrderId", t.comments, t.order_quantity, t.unit_price, t.car_id, t.car_color, t.car_configuration, t.car_country, t.car_engine, t.car_manufacturer, t.car_model, t.car_price, t."car_productionDateTime"
FROM "Orders" AS o
LEFT JOIN (
    SELECT o0.orderitem_id, o0."CarModelId", o0."OrderId", o0.comments, o0.order_quantity, o0.unit_price, c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
    FROM "OrderItems" AS o0
    INNER JOIN "CarModels" AS c ON o0."CarModelId" = c.car_id
) AS t ON o.order_id = t."OrderId"
ORDER BY o.order_id, t.orderitem_id
2025-11-03 18:33:17.875 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:33:17.896 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:33:17.918 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:33:17.919 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:33:17.929 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:33:17.930 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:33:17.930 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:33:17.930 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:33:17.931 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:33:17.931 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 76ms reading results.
2025-11-03 18:33:17.931 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:33:17.932 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:33:17.932 +00:00 [INF] Все заказы успешно получены, количество: 2
2025-11-03 18:33:17.962 +00:00 [INF] Успешное получение 2 заказов
2025-11-03 18:33:17.962 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 18:33:17.963 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 18:33:17.963 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 18:33:17.964 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 18:33:17.964 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 18:33:17.964 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 18:33:17.964 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-03 18:33:17.967 +00:00 [INF] Executed action CarsTradeAPI.Features.OrdersOperation.OrdersController.GetAllOrders (CarsTradeAPI) in 539.8513ms
2025-11-03 18:33:17.967 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.GetAllOrders (CarsTradeAPI)'
2025-11-03 18:33:17.967 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 18:33:17.967 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:33:17.967 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:33:17.968 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Orders/GetAllOrders/All - 200 null application/json; charset=utf-8 616.1161ms
2025-11-03 18:35:02.447 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Buyer/GetAllBuyers - null null
2025-11-03 18:35:02.479 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Buyer/GetAllBuyers'
2025-11-03 18:35:02.479 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)' with route pattern 'api/Buyer/GetAllBuyers' is valid for the request path '/api/Buyer/GetAllBuyers'
2025-11-03 18:35:02.479 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-11-03 18:35:02.480 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 18:35:02.481 +00:00 [DBG] Successfully validated the token.
2025-11-03 18:35:02.481 +00:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-03 18:35:02.483 +00:00 [DBG] Authorization was successful.
2025-11-03 18:35:02.483 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-11-03 18:35:02.486 +00:00 [INF] Route matched with {action = "GetAllBuyers", controller = "Buyer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto]]] GetAllBuyers() on controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI).
2025-11-03 18:35:02.486 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 18:35:02.486 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 18:35:02.487 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 18:35:02.487 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 18:35:02.487 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 18:35:02.488 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-11-03 18:35:02.488 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-11-03 18:35:02.489 +00:00 [INF] Получен запрос на получение всех покупателей
2025-11-03 18:35:02.492 +00:00 [INF] Начало обработки запроса GetBuyersQuery
2025-11-03 18:35:02.518 +00:00 [INF] Этап получения всех покупателей в репозитории
2025-11-03 18:35:02.519 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 18:35:02.520 +00:00 [DBG] Compiling query expression: 
'DbSet<Buyer>()'
2025-11-03 18:35:02.523 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Buyer>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Buyer.BuyerId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Buyer.BuyerAddress (string) Required, 1], [Property: Buyer.BuyerEmail (string) Required, 2], [Property: Buyer.BuyerMiddlename (string) Required, 3], [Property: Buyer.BuyerName (string) Required, 4], [Property: Buyer.BuyerSurname (string) Required, 5], [Property: Buyer.CreatedAt (DateTime) Required, 6], [Property: Buyer.PhoneNumber (string) Required, 7] }
        SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
        FROM Buyers AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Buyer>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-11-03 18:35:02.524 +00:00 [DBG] Creating DbConnection.
2025-11-03 18:35:02.524 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 18:35:02.525 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:02.525 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:02.525 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:35:02.526 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:02.526 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:02.526 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
FROM "Buyers" AS b
2025-11-03 18:35:02.570 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
FROM "Buyers" AS b
2025-11-03 18:35:02.594 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Buyer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:02.601 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Buyer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:02.601 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:02.601 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 30ms reading results.
2025-11-03 18:35:02.602 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:02.602 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:35:02.602 +00:00 [INF] Все покупатели успешно получены. Количество: 2
2025-11-03 18:35:02.603 +00:00 [INF] Успешное получение 2 покупателей
2025-11-03 18:35:02.610 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 18:35:02.610 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 18:35:02.610 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 18:35:02.610 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 18:35:02.611 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 18:35:02.611 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 18:35:02.611 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-03 18:35:02.612 +00:00 [INF] Executed action CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI) in 124.7733ms
2025-11-03 18:35:02.612 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-11-03 18:35:02.613 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 18:35:02.613 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:02.613 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:35:02.614 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Buyer/GetAllBuyers - 200 null application/json; charset=utf-8 167.2703ms
2025-11-03 18:35:18.919 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/Employee/GetAllEmployee/All - null null
2025-11-03 18:35:18.941 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Employee/GetAllEmployee/All'
2025-11-03 18:35:18.941 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)' with route pattern 'api/Employee/GetAllEmployee/All' is valid for the request path '/api/Employee/GetAllEmployee/All'
2025-11-03 18:35:18.941 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-11-03 18:35:18.942 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 18:35:18.942 +00:00 [DBG] Successfully validated the token.
2025-11-03 18:35:18.943 +00:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-03 18:35:18.944 +00:00 [DBG] Authorization was successful.
2025-11-03 18:35:18.945 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-11-03 18:35:18.947 +00:00 [INF] Route matched with {action = "GetAllEmployee", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto]]] GetAllEmployee() on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI).
2025-11-03 18:35:18.947 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 18:35:18.948 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 18:35:18.948 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 18:35:18.948 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 18:35:18.949 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 18:35:18.949 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-11-03 18:35:18.950 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-11-03 18:35:18.951 +00:00 [INF] Начало обработки запроса GetAllEmployee
2025-11-03 18:35:18.953 +00:00 [INF] Начало обработки команды GetAllEmployeeQuery
2025-11-03 18:35:18.958 +00:00 [INF] Этап получения всех сотрудников в репозитории
2025-11-03 18:35:18.959 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 18:35:18.960 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()'
2025-11-03 18:35:18.963 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Employee>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Employee.EmployeeId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Employee.EmployeeAge (uint) Required, 1], [Property: Employee.EmployeeLogin (string) Required Index, 2], [Property: Employee.EmployeeMiddlename (string) Required, 3], [Property: Employee.EmployeeName (string) Required, 4], [Property: Employee.EmployeePassword (string) Required MaxLength(260), 5], [Property: Employee.EmployeeRole (string) Required, 6], [Property: Employee.EmployeeSellCounter (uint?), 7], [Property: Employee.EmployeeSurname (string) Required, 8] }
        SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
        FROM Employees AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Employee>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-11-03 18:35:18.963 +00:00 [DBG] Creating DbConnection.
2025-11-03 18:35:18.963 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 18:35:18.964 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:18.964 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:18.964 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:35:18.965 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:18.965 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:18.965 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
2025-11-03 18:35:18.968 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
2025-11-03 18:35:18.969 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:18.969 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:18.970 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:18.970 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:18.970 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:18.971 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:18.971 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:18.972 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:18.972 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:18.972 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 3ms reading results.
2025-11-03 18:35:18.972 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:18.973 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:35:18.973 +00:00 [INF] Все сотрудники успешно получены. Количество: 8
2025-11-03 18:35:18.979 +00:00 [INF] Успешное получение всех сотрудников. Количество: 8
2025-11-03 18:35:18.980 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 18:35:18.980 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 18:35:18.980 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 18:35:18.980 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 18:35:18.981 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 18:35:18.981 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 18:35:18.981 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-03 18:35:18.983 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI) in 33.791ms
2025-11-03 18:35:18.983 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-11-03 18:35:18.983 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 18:35:18.984 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:18.984 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:35:18.984 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/Employee/GetAllEmployee/All - 200 null application/json; charset=utf-8 64.8258ms
2025-11-03 18:35:48.823 +00:00 [INF] Request starting HTTP/2 GET https://localhost:8081/api/CarInventory/GetCarInventory/All - null null
2025-11-03 18:35:48.824 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarInventory/GetCarInventory/All'
2025-11-03 18:35:48.831 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)' with route pattern 'api/CarInventory/GetCarInventory/All' is valid for the request path '/api/CarInventory/GetCarInventory/All'
2025-11-03 18:35:48.837 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-11-03 18:35:48.838 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 18:35:48.839 +00:00 [DBG] Successfully validated the token.
2025-11-03 18:35:48.839 +00:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-03 18:35:48.840 +00:00 [DBG] Authorization was successful.
2025-11-03 18:35:48.840 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-11-03 18:35:48.842 +00:00 [INF] Route matched with {action = "GetAllCarInventories", controller = "CarInventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto]]] GetAllCarInventories() on controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI).
2025-11-03 18:35:48.843 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 18:35:48.843 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 18:35:48.843 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 18:35:48.844 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 18:35:48.844 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 18:35:48.844 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-11-03 18:35:48.845 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-11-03 18:35:48.846 +00:00 [INF] Получен запрос на получение всех CarInventory
2025-11-03 18:35:48.849 +00:00 [INF] Начало обработки команды GetCarInventoryQuery
2025-11-03 18:35:48.876 +00:00 [INF] Этап получения всех объектов CarInventory в репозитории
2025-11-03 18:35:48.879 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 18:35:48.880 +00:00 [DBG] Compiling query expression: 
'DbSet<CarInventory>()'
2025-11-03 18:35:48.884 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CarInventory>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarInventory.InventoryId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarInventory.CarModelId (Guid) Required FK Index, 1], [Property: CarInventory.LastUpdated (DateTime) Required, 2], [Property: CarInventory.Quantity (uint) Required, 3] }
        SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
        FROM CarInventories AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarInventory>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-11-03 18:35:48.885 +00:00 [DBG] Creating DbConnection.
2025-11-03 18:35:48.885 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 18:35:48.885 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:48.886 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:48.886 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:35:48.886 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:48.886 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:48.887 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
2025-11-03 18:35:48.911 +00:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
2025-11-03 18:35:48.969 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:48.973 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:48.973 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:48.974 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:48.975 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 8ms reading results.
2025-11-03 18:35:48.975 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:48.975 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:35:48.976 +00:00 [INF] Все объекты CarInventory успешно получены. Количество: 3
2025-11-03 18:35:48.986 +00:00 [INF] Этап получения CarModel с ID: "764c23a4-4add-44ca-968b-ab1813dccc49" в репозитории
2025-11-03 18:35:48.987 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .FirstOrDefault(id => id.CarModelId == __CarModelId_0)'
2025-11-03 18:35:48.990 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CarModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
            SELECT TOP(1) c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
            FROM CarModels AS c
            WHERE c.car_id == @__CarModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 18:35:48.991 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:48.996 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:48.997 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:35:48.997 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:48.997 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:48.998 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 18:35:49.007 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 18:35:49.009 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:49.010 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:49.011 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:49.011 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 3ms reading results.
2025-11-03 18:35:49.011 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:49.012 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:35:49.012 +00:00 [INF] Модель машины с ID: "764c23a4-4add-44ca-968b-ab1813dccc49" успешно получена
2025-11-03 18:35:49.015 +00:00 [INF] Этап получения CarModel с ID: "39bbb487-392f-44fe-8b65-ea145763347b" в репозитории
2025-11-03 18:35:49.015 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:49.015 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:49.016 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:35:49.016 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:49.017 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:49.017 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 18:35:49.019 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 18:35:49.021 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:49.021 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:49.022 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:49.022 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-11-03 18:35:49.022 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:49.023 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:35:49.023 +00:00 [INF] Модель машины с ID: "39bbb487-392f-44fe-8b65-ea145763347b" успешно получена
2025-11-03 18:35:49.024 +00:00 [INF] Этап получения CarModel с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" в репозитории
2025-11-03 18:35:49.024 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:49.025 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:49.025 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:35:49.025 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:49.025 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:35:49.026 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 18:35:49.029 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 18:35:49.050 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:49.050 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:35:49.051 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:49.051 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 21ms reading results.
2025-11-03 18:35:49.051 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:49.052 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:35:49.052 +00:00 [INF] Модель машины с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" успешно получена
2025-11-03 18:35:49.064 +00:00 [INF] Успешное получение списка CarInventory, количество элементов: 3
2025-11-03 18:35:49.065 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 18:35:49.066 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 18:35:49.071 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 18:35:49.072 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 18:35:49.072 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 18:35:49.073 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 18:35:49.073 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-03 18:35:49.076 +00:00 [INF] Executed action CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI) in 231.8307ms
2025-11-03 18:35:49.077 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-11-03 18:35:49.077 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 18:35:49.077 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:35:49.078 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:35:49.078 +00:00 [INF] Request finished HTTP/2 GET https://localhost:8081/api/CarInventory/GetCarInventory/All - 200 null application/json; charset=utf-8 255.1619ms
2025-11-03 18:36:09.083 +00:00 [INF] Request starting HTTP/2 POST https://localhost:8081/api/Orders/CreateOrder - application/json 487
2025-11-03 18:36:09.084 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Orders/CreateOrder'
2025-11-03 18:36:09.084 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)' with route pattern 'api/Orders/CreateOrder' is valid for the request path '/api/Orders/CreateOrder'
2025-11-03 18:36:09.084 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)'
2025-11-03 18:36:09.085 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 18:36:09.086 +00:00 [DBG] Successfully validated the token.
2025-11-03 18:36:09.086 +00:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-03 18:36:09.086 +00:00 [DBG] Authorization was successful.
2025-11-03 18:36:09.086 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)'
2025-11-03 18:36:09.090 +00:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto]] CreateOrder(CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand) on controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI).
2025-11-03 18:36:09.090 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 18:36:09.090 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 18:36:09.091 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 18:36:09.091 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 18:36:09.091 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 18:36:09.091 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-11-03 18:36:09.092 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-11-03 18:36:09.092 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' ...
2025-11-03 18:36:09.092 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' using the name '' in request data ...
2025-11-03 18:36:09.093 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-03 18:36:09.095 +00:00 [DBG] Connection id "0HNGR0LL26GP0", Request id "0HNGR0LL26GP0:00000019": started reading request body.
2025-11-03 18:36:09.095 +00:00 [DBG] Connection id "0HNGR0LL26GP0", Request id "0HNGR0LL26GP0:00000019": done reading request body.
2025-11-03 18:36:09.102 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'
2025-11-03 18:36:09.102 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-11-03 18:36:09.103 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-11-03 18:36:09.103 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' ...
2025-11-03 18:36:09.109 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-11-03 18:36:09.110 +00:00 [INF] Получен запрос на создание нового заказа
2025-11-03 18:36:09.196 +00:00 [INF] Начало обработки команды CreateOrderCommand для ключа rwteyertye1233
2025-11-03 18:36:09.197 +00:00 [INF] Checking IdempotencyRequest for key: rwteyertye1233
2025-11-03 18:36:09.198 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 18:36:09.200 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .AsNoTracking()
    .FirstOrDefault(r => r.Key == __key_0)'
2025-11-03 18:36:09.204 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdempotencyRequest>(
    asyncEnumerable: new SingleQueryingEnumerable<IdempotencyRequest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdempotencyRequest.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdempotencyRequest.CreatedAt (DateTime) Required, 1], [Property: IdempotencyRequest.Key (string) Required MaxLength(100), 2], [Property: IdempotencyRequest.ResourceId (Guid?), 3], [Property: IdempotencyRequest.ResourceType (string) Required MaxLength(50), 4], [Property: IdempotencyRequest.Responsejson (string), 5], [Property: IdempotencyRequest.Status (string) Required MaxLength(50), 6] }
            SELECT TOP(1) i.Id, i.CreatedAt, i.Key, i.ResourceId, i.ResourceType, i.Responsejson, i.Status
            FROM IdempotencyRequests AS i
            WHERE i.Key == @__key_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdempotencyRequest>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 18:36:09.205 +00:00 [DBG] Creating DbConnection.
2025-11-03 18:36:09.205 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 18:36:09.206 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.206 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.206 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:36:09.207 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.207 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-03 18:36:09.208 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-11-03 18:36:09.231 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-11-03 18:36:09.232 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.233 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-11-03 18:36:09.233 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.234 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.235 +00:00 [INF] IdempotencyRequest found: false
2025-11-03 18:36:09.240 +00:00 [INF] Этап проверки существования покупателя с ID "445093fb-bd79-49b7-950c-d590467cf883" в репозитории
2025-11-03 18:36:09.241 +00:00 [DBG] Compiling query expression: 
'DbSet<Buyer>()
    .Any(o => o.BuyerId == __buyerId_0)'
2025-11-03 18:36:09.246 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Buyers AS b
                WHERE b.buyer_id == @__buyerId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 18:36:09.250 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.250 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.251 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:36:09.251 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.251 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.252 +00:00 [DBG] Executing DbCommand [Parameters=[@__buyerId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Buyers" AS b
    WHERE b.buyer_id = @__buyerId_0)
2025-11-03 18:36:09.281 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@__buyerId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Buyers" AS b
    WHERE b.buyer_id = @__buyerId_0)
2025-11-03 18:36:09.291 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.292 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 3ms reading results.
2025-11-03 18:36:09.292 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.292 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.293 +00:00 [INF] Проверка существования прошла успешно, результат true
2025-11-03 18:36:09.294 +00:00 [INF] Этап проверки существования работника с ID "0f72bdc9-0033-4acd-a43a-e7410c6deb24" в репозитории
2025-11-03 18:36:09.294 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()
    .Any(o => o.EmployeeId == __employeeId_0)'
2025-11-03 18:36:09.296 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Employees AS e
                WHERE e.employee_id == @__employeeId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 18:36:09.297 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.297 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.297 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:36:09.298 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.298 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.298 +00:00 [DBG] Executing DbCommand [Parameters=[@__employeeId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Employees" AS e
    WHERE e.employee_id = @__employeeId_0)
2025-11-03 18:36:09.301 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__employeeId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Employees" AS e
    WHERE e.employee_id = @__employeeId_0)
2025-11-03 18:36:09.302 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.303 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 18:36:09.303 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.303 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.303 +00:00 [INF] Проверка существования прошла успешно, результат true
2025-11-03 18:36:09.307 +00:00 [INF] Этап проверки существования машины с ID "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" в репозитории
2025-11-03 18:36:09.308 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .Any(cm => (Guid?)cm.CarModelId == __carModelId_0)'
2025-11-03 18:36:09.310 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM CarModels AS c
                WHERE c.car_id == @__carModelId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 18:36:09.311 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.311 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.311 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:36:09.312 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.312 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.312 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CarModels" AS c
    WHERE c.car_id = @__carModelId_0)
2025-11-03 18:36:09.335 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CarModels" AS c
    WHERE c.car_id = @__carModelId_0)
2025-11-03 18:36:09.336 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.336 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 18:36:09.336 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.337 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.337 +00:00 [INF] Проверка существования прошла успешно, результат true
2025-11-03 18:36:09.339 +00:00 [DBG] Compiling query expression: 
'DbSet<CarInventory>()
    .FirstOrDefault(ci => ci.CarModelId == __carModelId_0)'
2025-11-03 18:36:09.341 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarInventory>(
    asyncEnumerable: new SingleQueryingEnumerable<CarInventory>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarInventory.InventoryId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarInventory.CarModelId (Guid) Required FK Index, 1], [Property: CarInventory.LastUpdated (DateTime) Required, 2], [Property: CarInventory.Quantity (uint) Required, 3] }
            SELECT TOP(1) c.inventory_id, c.car_model_id, c.last_updated, c.quantity
            FROM CarInventories AS c
            WHERE c.car_model_id == @__carModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarInventory>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 18:36:09.342 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.342 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.342 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:36:09.343 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.343 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.343 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-11-03 18:36:09.346 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-11-03 18:36:09.347 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.347 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.348 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 18:36:09.348 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.348 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.350 +00:00 [INF] Этап получения цены машины с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" в репозитории
2025-11-03 18:36:09.350 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .FirstOrDefault(cm => (Guid?)cm.CarModelId == __carModelId_0)'
2025-11-03 18:36:09.352 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CarModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
            SELECT TOP(1) c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
            FROM CarModels AS c
            WHERE c.car_id == @__carModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 18:36:09.353 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.353 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.353 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:36:09.354 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.354 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.354 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__carModelId_0
LIMIT 1
2025-11-03 18:36:09.377 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__carModelId_0
LIMIT 1
2025-11-03 18:36:09.378 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.379 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.379 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.380 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-11-03 18:36:09.380 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.380 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.381 +00:00 [INF] Цена машины с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" успешно получена
2025-11-03 18:36:09.383 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.383 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.383 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:36:09.384 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.384 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.384 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-11-03 18:36:09.432 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-11-03 18:36:09.459 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.459 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 18:36:09.459 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.460 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.468 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.471 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-11-03 18:36:09.473 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-11-03 18:36:09.486 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-11-03 18:36:09.525 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.525 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.526 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:36:09.527 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.528 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-03 18:36:09.529 +00:00 [DBG] Executing DbCommand [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CarInventories" SET car_model_id = @p0, last_updated = @p1, quantity = @p2
WHERE inventory_id = @p3;
2025-11-03 18:36:09.537 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CarInventories" SET car_model_id = @p0, last_updated = @p1, quantity = @p2
WHERE inventory_id = @p3;
2025-11-03 18:36:09.539 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.540 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-11-03 18:36:09.540 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.541 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.542 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.544 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-11-03 18:36:09.546 +00:00 [INF] Этап создания заказа в репозитории
2025-11-03 18:36:09.558 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.561 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.562 +00:00 [DBG] The navigation 'OrderItem.Order' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.563 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.563 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-11-03 18:36:09.563 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-11-03 18:36:09.570 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-11-03 18:36:09.578 +00:00 [DBG] Executing 2 update commands as a batch.
2025-11-03 18:36:09.580 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.580 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.581 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-03 18:36:09.585 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-03 18:36:09.586 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:36:09.586 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.587 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.587 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = Object), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?', @p11='?' (DbType = Int64), @p12='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Orders" (order_id, "BuyerId", "EmployeeId", order_delivery_address, order_completion_date, order_create_date, order_price)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO "OrderItems" (orderitem_id, "CarModelId", "OrderId", comments, order_quantity, unit_price)
VALUES (@p7, @p8, @p9, @p10, @p11, @p12);
2025-11-03 18:36:09.614 +00:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = Object), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?', @p11='?' (DbType = Int64), @p12='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Orders" (order_id, "BuyerId", "EmployeeId", order_delivery_address, order_completion_date, order_create_date, order_price)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO "OrderItems" (orderitem_id, "CarModelId", "OrderId", comments, order_quantity, unit_price)
VALUES (@p7, @p8, @p9, @p10, @p11, @p12);
2025-11-03 18:36:09.635 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.636 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 21ms reading results.
2025-11-03 18:36:09.638 +00:00 [DBG] Committing transaction.
2025-11-03 18:36:09.643 +00:00 [DBG] Committed transaction.
2025-11-03 18:36:09.644 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.645 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.646 +00:00 [DBG] Disposing transaction.
2025-11-03 18:36:09.648 +00:00 [DBG] An entity of type 'Order' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.648 +00:00 [DBG] An entity of type 'OrderItem' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.648 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 2 entities written to the database.
2025-11-03 18:36:09.649 +00:00 [INF] Заказ успешно создан с ID: "d8439eca-e63f-4b47-83e0-667112f0d667"
2025-11-03 18:36:09.653 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .Any(r => r.Key == __key_0)'
2025-11-03 18:36:09.655 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM IdempotencyRequests AS i
                WHERE i.Key == @__key_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 18:36:09.655 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.656 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.656 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:36:09.656 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.656 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.656 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-11-03 18:36:09.659 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-11-03 18:36:09.660 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.660 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 18:36:09.660 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.661 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.672 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.672 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-11-03 18:36:09.672 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-11-03 18:36:09.677 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-11-03 18:36:09.678 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.678 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.678 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 18:36:09.678 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.679 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 18:36:09.679 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-03 18:36:09.683 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-03 18:36:09.683 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.683 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 18:36:09.684 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.684 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.685 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 18:36:09.685 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-11-03 18:36:09.685 +00:00 [INF] IdempotencyRequest saved for key: rwteyertye1233
2025-11-03 18:36:09.766 +00:00 [DBG] Declare exchange: name: Contracts.Events:OrderCreated, type: fanout, durable
2025-11-03 18:36:09.840 +00:00 [DBG] SEND "rabbitmq://carstradeapi_rabbitmq/Contracts.Events:OrderCreated" "50000000-eec8-b12e-0e79-08de1b07dbac" Contracts.Events.OrderCreated
2025-11-03 18:36:09.844 +00:00 [INF] Заказ успешно создан с ID: "d8439eca-e63f-4b47-83e0-667112f0d667"
2025-11-03 18:36:09.845 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 18:36:09.845 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 18:36:09.845 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 18:36:09.845 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 18:36:09.846 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 18:36:09.846 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 18:36:09.846 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto'.
2025-11-03 18:36:09.847 +00:00 [INF] Executed action CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI) in 755.1643ms
2025-11-03 18:36:09.847 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)'
2025-11-03 18:36:09.847 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 18:36:09.847 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 18:36:09.847 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 18:36:09.848 +00:00 [INF] Request finished HTTP/2 POST https://localhost:8081/api/Orders/CreateOrder - 200 null application/json; charset=utf-8 765.3911ms
2025-11-03 19:12:04.156 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-11-03 19:12:04.725 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 19:12:04.736 +00:00 [DBG] Creating DbConnection.
2025-11-03 19:12:04.739 +00:00 [DBG] Created DbConnection. (2ms).
2025-11-03 19:12:04.749 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:04.785 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 19:12:04.787 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:04.790 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:12:04.839 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-11-03 19:12:04.915 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:04.921 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:04.929 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (7ms).
2025-11-03 19:12:04.934 +00:00 [DBG] Hosting starting
2025-11-03 19:12:04.934 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-03 19:12:04.935 +00:00 [DBG] Creating DbConnection.
2025-11-03 19:12:04.935 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 19:12:04.940 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (3ms).
2025-11-03 19:12:04.941 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (7ms).
2025-11-03 19:12:04.942 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.030 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.036 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 19:12:05.085 +00:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 19:12:05.086 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.088 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-11-03 19:12:05.127 +00:00 [WRN] Using an in-memory repository. Keys will not be persisted to storage.
2025-11-03 19:12:05.127 +00:00 [WRN] Neither user profile nor HKLM registry available. Using an ephemeral key repository. Protected data will be unavailable when application exits.
2025-11-03 19:12:05.130 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.130 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.130 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:12:05.131 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:12:05.131 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:12:05.132 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-03 19:12:05.137 +00:00 [DBG] Starting bus instances: IBus
2025-11-03 19:12:05.138 +00:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-03 19:12:05.141 +00:00 [DBG] Starting bus: "rabbitmq://carstradeapi_rabbitmq/"
2025-11-03 19:12:05.144 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.145 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 6ms reading results.
2025-11-03 19:12:05.145 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.146 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:12:05.148 +00:00 [DBG] Migrating using database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.149 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.229 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.229 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.230 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:12:05.230 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-03 19:12:05.231 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-11-03 19:12:05.234 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (3ms).
2025-11-03 19:12:05.234 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.235 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.235 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 19:12:05.278 +00:00 [DBG] Repository contains no viable default key. Caller should generate a key with immediate activation.
2025-11-03 19:12:05.279 +00:00 [DBG] Policy resolution states that a new key should be added to the key ring.
2025-11-03 19:12:05.279 +00:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 19:12:05.279 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.280 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:12:05.280 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.318 +00:00 [INF] Creating key {517b4f33-2f4f-4b01-81a9-8649dd20d6fa} with creation date 2025-11-03 19:12:05Z, activation date 2025-11-03 19:12:05Z, and expiration date 2026-02-01 19:12:05Z.
2025-11-03 19:12:05.322 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.323 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.323 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:12:05.325 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2025-11-03 19:12:05.326 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2025-11-03 19:12:05.326 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2025-11-03 19:12:05.326 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.327 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.327 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 19:12:05.330 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='public' AND
          c.relname='__EFMigrationsHistory'
)
2025-11-03 19:12:05.330 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.331 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:12:05.331 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.332 +00:00 [DBG] Connect: guest@carstradeapi_rabbitmq:5672/
2025-11-03 19:12:05.333 +00:00 [DBG] Descriptor deserializer type for key {517b4f33-2f4f-4b01-81a9-8649dd20d6fa} is 'Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60'.
2025-11-03 19:12:05.333 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.334 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:12:05.334 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:12:05.334 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:12:05.334 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-03 19:12:05.336 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-11-03 19:12:05.337 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.337 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 19:12:05.337 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:12:05.338 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:12:05.338 +00:00 [DBG] No key escrow sink found. Not writing key {517b4f33-2f4f-4b01-81a9-8649dd20d6fa} to escrow.
2025-11-03 19:12:05.339 +00:00 [WRN] No XML encryptor configured. Key {517b4f33-2f4f-4b01-81a9-8649dd20d6fa} may be persisted to storage in unencrypted form.
2025-11-03 19:12:05.339 +00:00 [DBG] Key cache expiration token triggered by 'CreateNewKey' operation.
2025-11-03 19:12:05.341 +00:00 [DBG] Found key {517b4f33-2f4f-4b01-81a9-8649dd20d6fa}.
2025-11-03 19:12:05.349 +00:00 [INF] No migrations were applied. The database is already up to date.
2025-11-03 19:12:05.352 +00:00 [DBG] Considering key {517b4f33-2f4f-4b01-81a9-8649dd20d6fa} with expiration date 2026-02-01 19:12:05Z as default key.
2025-11-03 19:12:05.357 +00:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-11-03 19:12:05.359 +00:00 [DBG] Using managed symmetric algorithm 'System.Security.Cryptography.Aes'.
2025-11-03 19:12:05.360 +00:00 [DBG] Using managed keyed hash algorithm 'System.Security.Cryptography.HMACSHA256'.
2025-11-03 19:12:05.384 +00:00 [DBG] Using key {517b4f33-2f4f-4b01-81a9-8649dd20d6fa} as the default key.
2025-11-03 19:12:05.385 +00:00 [DBG] Key ring with default key {517b4f33-2f4f-4b01-81a9-8649dd20d6fa} was loaded during application startup.
2025-11-03 19:12:05.359 +00:00 [WRN] Connection Failed: "rabbitmq://carstradeapi_rabbitmq/"
RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> System.AggregateException: One or more errors occurred. (Connection failed, host 172.18.0.3:5672)
 ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed, host 172.18.0.3:5672
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.SocketFactory.ConnectUsingAddressFamilyAsync(IPEndPoint endpoint, Func`2 socketFactory, AddressFamily family, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFactory.ConnectUsingAddressFamilyAsync(IPEndPoint endpoint, Func`2 socketFactory, AddressFamily family, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.SocketFactory.OpenAsync(AmqpTcpEndpoint amqpTcpEndpoint, Func`2 socketFactory, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.SocketFrameHandler.CreateAsync(AmqpTcpEndpoint amqpTcpEndpoint, Func`2 socketFactory, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandlerAsync(AmqpTcpEndpoint endpoint, CancellationToken cancellationToken)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOneAsync[T](IEndpointResolver resolver, Func`3 selector, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOneAsync[T](IEndpointResolver resolver, Func`3 selector, CancellationToken cancellationToken)
   at RabbitMQ.Client.ConnectionFactory.CreateConnectionAsync(IEndpointResolver endpointResolver, String clientProvidedName, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnectionAsync(IEndpointResolver endpointResolver, String clientProvidedName, CancellationToken cancellationToken)
   at MassTransit.RabbitMqTransport.ConnectionContextFactory.CreateConnection(ISupervisor supervisor) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/ConnectionContextFactory.cs:line 101
2025-11-03 19:12:05.462 +00:00 [DBG] Endpoint Faulted: "rabbitmq://carstradeapi_rabbitmq/0c7f57a16c20_CarsTradeAPI_bus_jyyyyyfxqu6o4y6nbdxbsd8ynu?temporary=true"
MassTransit.RabbitMqConnectionException: Broker unreachable: guest@carstradeapi_rabbitmq:5672/
 ---> RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> System.AggregateException: One or more errors occurred. (Connection failed, host 172.18.0.3:5672)
 ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed, host 172.18.0.3:5672
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.SocketFactory.ConnectUsingAddressFamilyAsync(IPEndPoint endpoint, Func`2 socketFactory, AddressFamily family, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFactory.ConnectUsingAddressFamilyAsync(IPEndPoint endpoint, Func`2 socketFactory, AddressFamily family, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.SocketFactory.OpenAsync(AmqpTcpEndpoint amqpTcpEndpoint, Func`2 socketFactory, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.SocketFrameHandler.CreateAsync(AmqpTcpEndpoint amqpTcpEndpoint, Func`2 socketFactory, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandlerAsync(AmqpTcpEndpoint endpoint, CancellationToken cancellationToken)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOneAsync[T](IEndpointResolver resolver, Func`3 selector, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOneAsync[T](IEndpointResolver resolver, Func`3 selector, CancellationToken cancellationToken)
   at RabbitMQ.Client.ConnectionFactory.CreateConnectionAsync(IEndpointResolver endpointResolver, String clientProvidedName, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnectionAsync(IEndpointResolver endpointResolver, String clientProvidedName, CancellationToken cancellationToken)
   at MassTransit.RabbitMqTransport.ConnectionContextFactory.CreateConnection(ISupervisor supervisor) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/ConnectionContextFactory.cs:line 101
   --- End of inner exception stack trace ---
   at MassTransit.RabbitMqTransport.ConnectionContextFactory.CreateConnection(ISupervisor supervisor) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/ConnectionContextFactory.cs:line 128
   at MassTransit.Internals.TaskExtensions.<>c__DisplayClass2_0`1.<<OrCanceled>g__WaitAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MassTransit.Internals.TaskExtensions.<>c__DisplayClass2_0`1.<<OrCanceled>g__WaitAsync|0>d.MoveNext() in /_/src/MassTransit.Abstractions/Internals/Extensions/TaskExtensions.cs:line 72
--- End of stack trace from previous location ---
   at MassTransit.RabbitMqTransport.ConnectionContextFactory.CreateSharedConnection(Task`1 context, CancellationToken cancellationToken) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/ConnectionContextFactory.cs:line 73
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 51
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.SupervisorExtensions.<>c__DisplayClass5_0`2.<<CreateAgent>g__HandleSupervisorTask|0>d.MoveNext() in /_/src/MassTransit/SupervisorExtensions.cs:line 139
--- End of stack trace from previous location ---
   at MassTransit.SupervisorExtensions.CreateAgent[T,TAgent](ISupervisor`1 supervisor, IAsyncPipeContextAgent`1 asyncContext, Func`3 agentFactory, CancellationToken cancellationToken) in /_/src/MassTransit/SupervisorExtensions.cs:line 158
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.TransportStartExtensions.OnTransportStartup[T](ReceiveEndpointContext context, ITransportSupervisor`1 supervisor, CancellationToken cancellationToken) in /_/src/MassTransit/Transports/TransportStartExtensions.cs:line 19
   at MassTransit.Transports.ReceiveTransport`1.ReceiveTransportAgent.RunTransport() in /_/src/MassTransit/Transports/ReceiveTransport.cs:line 200
2025-11-03 19:12:05.528 +00:00 [DBG] Using development certificate: CN=localhost (Thumbprint: 2AE5B9E8B7B0EDFD86FD709A56EA7C92E2569E52)
2025-11-03 19:12:05.669 +00:00 [INF] Now listening on: http://[::]:8080
2025-11-03 19:12:05.670 +00:00 [INF] Now listening on: https://[::]:8081
2025-11-03 19:12:05.670 +00:00 [DBG] Loaded hosting startup assembly CarsTradeAPI
2025-11-03 19:12:05.670 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-03 19:12:05.671 +00:00 [INF] Hosting environment: Development
2025-11-03 19:12:05.671 +00:00 [INF] Content root path: /app
2025-11-03 19:12:05.671 +00:00 [DBG] Hosting started
2025-11-03 19:12:06.365 +00:00 [DBG] Connection id "0HNGR1JGHTSNJ" accepted.
2025-11-03 19:12:06.366 +00:00 [DBG] Connection id "0HNGR1JGHTSNJ" started.
2025-11-03 19:12:06.400 +00:00 [DBG] Connection 0HNGR1JGHTSNJ established using the following protocol: "Tls13"
2025-11-03 19:12:06.474 +00:00 [INF] Request starting HTTP/2 GET https://localhost:49633/swagger - null null
2025-11-03 19:12:06.479 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-11-03 19:12:06.485 +00:00 [INF] Retrying "00:00:07.0900768": Broker unreachable: guest@carstradeapi_rabbitmq:5672/
MassTransit.RabbitMqConnectionException: Broker unreachable: guest@carstradeapi_rabbitmq:5672/
 ---> RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> System.AggregateException: One or more errors occurred. (Connection failed, host 172.18.0.3:5672)
 ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed, host 172.18.0.3:5672
 ---> System.Net.Sockets.SocketException (111): Connection refused
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at System.Net.Sockets.Socket.<ConnectAsync>g__WaitForConnectWithCancellation|285_0(AwaitableSocketAsyncEventArgs saea, ValueTask connectTask, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.SocketFactory.ConnectUsingAddressFamilyAsync(IPEndPoint endpoint, Func`2 socketFactory, AddressFamily family, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFactory.ConnectUsingAddressFamilyAsync(IPEndPoint endpoint, Func`2 socketFactory, AddressFamily family, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.SocketFactory.OpenAsync(AmqpTcpEndpoint amqpTcpEndpoint, Func`2 socketFactory, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   at RabbitMQ.Client.Impl.SocketFrameHandler.CreateAsync(AmqpTcpEndpoint amqpTcpEndpoint, Func`2 socketFactory, TimeSpan connectionTimeout, CancellationToken cancellationToken)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandlerAsync(AmqpTcpEndpoint endpoint, CancellationToken cancellationToken)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOneAsync[T](IEndpointResolver resolver, Func`3 selector, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOneAsync[T](IEndpointResolver resolver, Func`3 selector, CancellationToken cancellationToken)
   at RabbitMQ.Client.ConnectionFactory.CreateConnectionAsync(IEndpointResolver endpointResolver, String clientProvidedName, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnectionAsync(IEndpointResolver endpointResolver, String clientProvidedName, CancellationToken cancellationToken)
   at MassTransit.RabbitMqTransport.ConnectionContextFactory.CreateConnection(ISupervisor supervisor) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/ConnectionContextFactory.cs:line 101
   --- End of inner exception stack trace ---
   at MassTransit.RabbitMqTransport.ConnectionContextFactory.CreateConnection(ISupervisor supervisor) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/ConnectionContextFactory.cs:line 128
   at MassTransit.Internals.TaskExtensions.<>c__DisplayClass2_0`1.<<OrCanceled>g__WaitAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at MassTransit.Internals.TaskExtensions.<>c__DisplayClass2_0`1.<<OrCanceled>g__WaitAsync|0>d.MoveNext() in /_/src/MassTransit.Abstractions/Internals/Extensions/TaskExtensions.cs:line 72
--- End of stack trace from previous location ---
   at MassTransit.RabbitMqTransport.ConnectionContextFactory.CreateSharedConnection(Task`1 context, CancellationToken cancellationToken) in /_/src/Transports/MassTransit.RabbitMqTransport/RabbitMqTransport/ConnectionContextFactory.cs:line 73
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 51
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.SupervisorExtensions.<>c__DisplayClass5_0`2.<<CreateAgent>g__HandleSupervisorTask|0>d.MoveNext() in /_/src/MassTransit/SupervisorExtensions.cs:line 139
--- End of stack trace from previous location ---
   at MassTransit.SupervisorExtensions.CreateAgent[T,TAgent](ISupervisor`1 supervisor, IAsyncPipeContextAgent`1 asyncContext, Func`3 agentFactory, CancellationToken cancellationToken) in /_/src/MassTransit/SupervisorExtensions.cs:line 158
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 61
   at MassTransit.Agents.PipeContextSupervisor`1.Send(IPipe`1 pipe, CancellationToken cancellationToken) in /_/src/MassTransit/Agents/PipeContextSupervisor.cs:line 67
   at MassTransit.Transports.TransportStartExtensions.OnTransportStartup[T](ReceiveEndpointContext context, ITransportSupervisor`1 supervisor, CancellationToken cancellationToken) in /_/src/MassTransit/Transports/TransportStartExtensions.cs:line 19
   at MassTransit.Transports.ReceiveTransport`1.ReceiveTransportAgent.RunTransport() in /_/src/MassTransit/Transports/ReceiveTransport.cs:line 200
   at MassTransit.Transports.ReceiveTransport`1.ReceiveTransportAgent.RunTransport() in /_/src/MassTransit/Transports/ReceiveTransport.cs:line 208
   at MassTransit.Transports.ReceiveTransport`1.ReceiveTransportAgent.Run() in /_/src/MassTransit/Transports/ReceiveTransport.cs:line 145
2025-11-03 19:12:06.505 +00:00 [DBG] No candidates found for the request path '/swagger'
2025-11-03 19:12:06.506 +00:00 [DBG] Request did not match any endpoints
2025-11-03 19:12:06.573 +00:00 [INF] Request finished HTTP/2 GET https://localhost:49633/swagger - 301 0 null 104.1528ms
2025-11-03 19:12:06.597 +00:00 [INF] Request starting HTTP/2 GET https://localhost:49633/swagger/index.html - null null
2025-11-03 19:12:06.597 +00:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-11-03 19:12:06.597 +00:00 [DBG] Request did not match any endpoints
2025-11-03 19:12:06.685 +00:00 [INF] Request finished HTTP/2 GET https://localhost:49633/swagger/index.html - 200 null text/html;charset=utf-8 87.92ms
2025-11-03 19:12:06.724 +00:00 [INF] Request starting HTTP/2 GET https://localhost:49633/swagger/swagger-ui.css - null null
2025-11-03 19:12:06.766 +00:00 [INF] Request starting HTTP/2 GET https://localhost:49633/swagger/swagger-ui-standalone-preset.js - null null
2025-11-03 19:12:06.766 +00:00 [INF] Request starting HTTP/2 GET https://localhost:49633/swagger/swagger-ui-bundle.js - null null
2025-11-03 19:12:06.770 +00:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2025-11-03 19:12:06.771 +00:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-standalone-preset.js'
2025-11-03 19:12:06.772 +00:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2025-11-03 19:12:06.772 +00:00 [DBG] Request did not match any endpoints
2025-11-03 19:12:06.773 +00:00 [DBG] Request did not match any endpoints
2025-11-03 19:12:06.773 +00:00 [DBG] Request did not match any endpoints
2025-11-03 19:12:06.861 +00:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-11-03 19:12:06.883 +00:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-11-03 19:12:06.883 +00:00 [INF] Request finished HTTP/2 GET https://localhost:49633/swagger/swagger-ui.css - 200 152034 text/css 158.8702ms
2025-11-03 19:12:06.884 +00:00 [INF] Request finished HTTP/2 GET https://localhost:49633/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 118.1448ms
2025-11-03 19:12:06.971 +00:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-11-03 19:12:06.972 +00:00 [INF] Request finished HTTP/2 GET https://localhost:49633/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 206.1938ms
2025-11-03 19:12:07.067 +00:00 [INF] Request starting HTTP/2 GET https://localhost:49633/swagger/v1/swagger.json - null null
2025-11-03 19:12:07.068 +00:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-11-03 19:12:07.068 +00:00 [DBG] Request did not match any endpoints
2025-11-03 19:12:07.080 +00:00 [INF] Request starting HTTP/2 GET https://localhost:49633/swagger/favicon-32x32.png - null null
2025-11-03 19:12:07.081 +00:00 [DBG] No candidates found for the request path '/swagger/favicon-32x32.png'
2025-11-03 19:12:07.082 +00:00 [DBG] Request did not match any endpoints
2025-11-03 19:12:07.083 +00:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-11-03 19:12:07.083 +00:00 [INF] Request finished HTTP/2 GET https://localhost:49633/swagger/favicon-32x32.png - 200 628 image/png 2.7023ms
2025-11-03 19:12:07.255 +00:00 [INF] Request finished HTTP/2 GET https://localhost:49633/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 187.4056ms
2025-11-03 19:12:11.326 +00:00 [DBG] Connect: guest@carstradeapi_rabbitmq:5672/
2025-11-03 19:12:11.417 +00:00 [DBG] Connected: guest@carstradeapi_rabbitmq:5672/ (address: amqp://carstradeapi_rabbitmq:5672, local: 53258)
2025-11-03 19:12:11.556 +00:00 [DBG] Endpoint Ready: "rabbitmq://carstradeapi_rabbitmq/0c7f57a16c20_CarsTradeAPI_bus_jyyyyyfxqu6o4y6nbdxbsd8ynu?temporary=true"
2025-11-03 19:12:11.558 +00:00 [INF] Bus started: "rabbitmq://carstradeapi_rabbitmq/"
2025-11-03 19:14:33.631 +00:00 [INF] Request starting HTTP/2 POST https://localhost:49633/api/EmployeeAuthentication/Authenticate - application/json 53
2025-11-03 19:14:33.650 +00:00 [DBG] 1 candidate(s) found for the request path '/api/EmployeeAuthentication/Authenticate'
2025-11-03 19:14:33.653 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)' with route pattern 'api/EmployeeAuthentication/Authenticate' is valid for the request path '/api/EmployeeAuthentication/Authenticate'
2025-11-03 19:14:33.654 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 19:14:33.656 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 19:14:33.764 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-03 19:14:33.767 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 19:14:33.791 +00:00 [INF] Route matched with {action = "Authenticate", controller = "EmployeeAuthentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.AuthResultDto]] Authenticate(CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand) on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI).
2025-11-03 19:14:33.792 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 19:14:33.793 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 19:14:33.794 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 19:14:33.795 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 19:14:33.795 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 19:14:33.797 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI)
2025-11-03 19:14:33.800 +00:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-03 19:14:33.801 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI)
2025-11-03 19:14:33.817 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' ...
2025-11-03 19:14:33.820 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' using the name '' in request data ...
2025-11-03 19:14:33.821 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-03 19:14:33.852 +00:00 [DBG] Connection id "0HNGR1JGHTSNJ", Request id "0HNGR1JGHTSNJ:0000000F": started reading request body.
2025-11-03 19:14:33.852 +00:00 [DBG] Connection id "0HNGR1JGHTSNJ", Request id "0HNGR1JGHTSNJ:0000000F": done reading request body.
2025-11-03 19:14:33.863 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'
2025-11-03 19:14:33.864 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 19:14:33.864 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 19:14:33.865 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' ...
2025-11-03 19:14:33.872 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 19:14:33.876 +00:00 [INF] Начало обработки запроса аутентификации сотрудника
2025-11-03 19:14:33.993 +00:00 [INF] Начало обработки команды EmployeeAuthenticationCommand
2025-11-03 19:14:33.995 +00:00 [INF] Этап получения сотрудника по логину TestUser1 в репозитории
2025-11-03 19:14:34.050 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 19:14:34.075 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()
    .FirstOrDefault(x => x.EmployeeLogin == __login_0)'
2025-11-03 19:14:34.202 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Employee>(
    asyncEnumerable: new SingleQueryingEnumerable<Employee>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Employee.EmployeeId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Employee.EmployeeAge (uint) Required, 1], [Property: Employee.EmployeeLogin (string) Required Index, 2], [Property: Employee.EmployeeMiddlename (string) Required, 3], [Property: Employee.EmployeeName (string) Required, 4], [Property: Employee.EmployeePassword (string) Required MaxLength(260), 5], [Property: Employee.EmployeeRole (string) Required, 6], [Property: Employee.EmployeeSellCounter (uint?), 7], [Property: Employee.EmployeeSurname (string) Required, 8] }
            SELECT TOP(1) e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
            FROM Employees AS e
            WHERE e.employee_login == @__login_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Employee>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 19:14:34.221 +00:00 [DBG] Creating DbConnection.
2025-11-03 19:14:34.221 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 19:14:34.222 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:14:34.222 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:14:34.223 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:14:34.223 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:14:34.227 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-11-03 19:14:34.229 +00:00 [DBG] Executing DbCommand [Parameters=[@__login_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_login = @__login_0
LIMIT 1
2025-11-03 19:14:34.239 +00:00 [INF] Executed DbCommand (11ms) [Parameters=[@__login_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_login = @__login_0
LIMIT 1
2025-11-03 19:14:34.294 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:14:34.314 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:14:34.314 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 74ms reading results.
2025-11-03 19:14:34.314 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:14:34.315 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:14:34.315 +00:00 [INF] Сотрудник успешно получен с логином: TestUser1
2025-11-03 19:14:34.386 +00:00 [WRN] Попытка входа с неверным паролем для логина: TestUser1
2025-11-03 19:14:34.392 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 19:14:34.393 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 19:14:34.394 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 19:14:34.395 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 19:14:34.395 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 19:14:34.396 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 19:14:34.397 +00:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Infrastructure.ValidationBehavior.ErrorDetail, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-03 19:14:34.415 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI) in 616.927ms
2025-11-03 19:14:34.416 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 19:14:34.418 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 19:14:34.420 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:14:34.422 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-11-03 19:14:34.423 +00:00 [INF] Request finished HTTP/2 POST https://localhost:49633/api/EmployeeAuthentication/Authenticate - 400 null application/json; charset=utf-8 792.3036ms
2025-11-03 19:14:40.533 +00:00 [INF] Request starting HTTP/2 POST https://localhost:49633/api/EmployeeAuthentication/Authenticate - application/json 53
2025-11-03 19:14:40.555 +00:00 [DBG] 1 candidate(s) found for the request path '/api/EmployeeAuthentication/Authenticate'
2025-11-03 19:14:40.555 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)' with route pattern 'api/EmployeeAuthentication/Authenticate' is valid for the request path '/api/EmployeeAuthentication/Authenticate'
2025-11-03 19:14:40.556 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 19:14:40.556 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 19:14:40.557 +00:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-11-03 19:14:40.557 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 19:14:40.558 +00:00 [INF] Route matched with {action = "Authenticate", controller = "EmployeeAuthentication"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.AuthResultDto]] Authenticate(CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand) on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI).
2025-11-03 19:14:40.558 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 19:14:40.558 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 19:14:40.559 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 19:14:40.559 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 19:14:40.559 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 19:14:40.559 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI)
2025-11-03 19:14:40.560 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController (CarsTradeAPI)
2025-11-03 19:14:40.561 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' ...
2025-11-03 19:14:40.561 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' using the name '' in request data ...
2025-11-03 19:14:40.562 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-03 19:14:40.562 +00:00 [DBG] Connection id "0HNGR1JGHTSNJ", Request id "0HNGR1JGHTSNJ:00000011": started reading request body.
2025-11-03 19:14:40.562 +00:00 [DBG] Connection id "0HNGR1JGHTSNJ", Request id "0HNGR1JGHTSNJ:00000011": done reading request body.
2025-11-03 19:14:40.563 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'
2025-11-03 19:14:40.563 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 19:14:40.563 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 19:14:40.564 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand' ...
2025-11-03 19:14:40.564 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthentication.EmployeeAuthenticationCommand'.
2025-11-03 19:14:40.564 +00:00 [INF] Начало обработки запроса аутентификации сотрудника
2025-11-03 19:14:40.567 +00:00 [INF] Начало обработки команды EmployeeAuthenticationCommand
2025-11-03 19:14:40.567 +00:00 [INF] Этап получения сотрудника по логину TestUser1 в репозитории
2025-11-03 19:14:40.602 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 19:14:40.606 +00:00 [DBG] Creating DbConnection.
2025-11-03 19:14:40.606 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 19:14:40.606 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:14:40.607 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:14:40.607 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:14:40.608 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:14:40.608 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:14:40.608 +00:00 [DBG] Executing DbCommand [Parameters=[@__login_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_login = @__login_0
LIMIT 1
2025-11-03 19:14:40.633 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__login_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
WHERE e.employee_login = @__login_0
LIMIT 1
2025-11-03 19:14:40.741 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:14:40.742 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:14:40.742 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 107ms reading results.
2025-11-03 19:14:40.743 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:14:40.743 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:14:40.743 +00:00 [INF] Сотрудник успешно получен с логином: TestUser1
2025-11-03 19:14:40.837 +00:00 [INF] Пользователь с логином: TestUser1 успешно аутентифицирован
2025-11-03 19:14:40.838 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 19:14:40.838 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 19:14:40.838 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 19:14:40.839 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 19:14:40.839 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 19:14:40.840 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 19:14:40.840 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.AuthResultDto'.
2025-11-03 19:14:40.845 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI) in 285.8703ms
2025-11-03 19:14:40.846 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeAuthenticationController.Authenticate (CarsTradeAPI)'
2025-11-03 19:14:40.846 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 19:14:40.847 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:14:40.847 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:14:40.847 +00:00 [INF] Request finished HTTP/2 POST https://localhost:49633/api/EmployeeAuthentication/Authenticate - 200 null application/json; charset=utf-8 314.43ms
2025-11-03 19:15:03.802 +00:00 [INF] Request starting HTTP/2 GET https://localhost:49633/api/Buyer/GetAllBuyers - null null
2025-11-03 19:15:03.854 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Buyer/GetAllBuyers'
2025-11-03 19:15:03.854 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)' with route pattern 'api/Buyer/GetAllBuyers' is valid for the request path '/api/Buyer/GetAllBuyers'
2025-11-03 19:15:03.854 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-11-03 19:15:03.855 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 19:15:03.886 +00:00 [DBG] Successfully validated the token.
2025-11-03 19:15:03.887 +00:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-03 19:15:03.892 +00:00 [DBG] Authorization was successful.
2025-11-03 19:15:03.893 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-11-03 19:15:03.898 +00:00 [INF] Route matched with {action = "GetAllBuyers", controller = "Buyer"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto]]] GetAllBuyers() on controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI).
2025-11-03 19:15:03.899 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 19:15:03.899 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 19:15:03.899 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 19:15:03.900 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 19:15:03.900 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 19:15:03.901 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-11-03 19:15:03.902 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.BuyerOperation.BuyerController (CarsTradeAPI)
2025-11-03 19:15:03.903 +00:00 [INF] Получен запрос на получение всех покупателей
2025-11-03 19:15:03.908 +00:00 [INF] Начало обработки запроса GetBuyersQuery
2025-11-03 19:15:04.177 +00:00 [INF] Этап получения всех покупателей в репозитории
2025-11-03 19:15:04.180 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 19:15:04.182 +00:00 [DBG] Compiling query expression: 
'DbSet<Buyer>()'
2025-11-03 19:15:04.187 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Buyer>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Buyer.BuyerId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Buyer.BuyerAddress (string) Required, 1], [Property: Buyer.BuyerEmail (string) Required, 2], [Property: Buyer.BuyerMiddlename (string) Required, 3], [Property: Buyer.BuyerName (string) Required, 4], [Property: Buyer.BuyerSurname (string) Required, 5], [Property: Buyer.CreatedAt (DateTime) Required, 6], [Property: Buyer.PhoneNumber (string) Required, 7] }
        SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
        FROM Buyers AS b), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Buyer>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-11-03 19:15:04.189 +00:00 [DBG] Creating DbConnection.
2025-11-03 19:15:04.189 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 19:15:04.190 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:15:04.190 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:15:04.190 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:15:04.191 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:15:04.191 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:15:04.191 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
FROM "Buyers" AS b
2025-11-03 19:15:04.214 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT b.buyer_id, b.buyer_adress, b.buyer_email, b.buyer_middlename, b.buyer_name, b.buyer_surname, b.buyer_created_date, b.phone_number
FROM "Buyers" AS b
2025-11-03 19:15:04.225 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Buyer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:15:04.236 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Buyer' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:15:04.237 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:15:04.237 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 21ms reading results.
2025-11-03 19:15:04.237 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:15:04.237 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:15:04.238 +00:00 [INF] Все покупатели успешно получены. Количество: 2
2025-11-03 19:15:04.238 +00:00 [INF] Успешное получение 2 покупателей
2025-11-03 19:15:04.261 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 19:15:04.262 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 19:15:04.262 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 19:15:04.262 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 19:15:04.263 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 19:15:04.263 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 19:15:04.264 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.BuyerOperation.BuyerDto.ShowBuyerDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-03 19:15:04.265 +00:00 [INF] Executed action CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI) in 364.341ms
2025-11-03 19:15:04.265 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.BuyerOperation.BuyerController.GetAllBuyers (CarsTradeAPI)'
2025-11-03 19:15:04.265 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 19:15:04.266 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:15:04.266 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:15:04.268 +00:00 [INF] Request finished HTTP/2 GET https://localhost:49633/api/Buyer/GetAllBuyers - 200 null application/json; charset=utf-8 465.7547ms
2025-11-03 19:15:26.747 +00:00 [INF] Request starting HTTP/2 GET https://localhost:49633/api/Employee/GetAllEmployee/All - null null
2025-11-03 19:15:26.748 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Employee/GetAllEmployee/All'
2025-11-03 19:15:26.765 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)' with route pattern 'api/Employee/GetAllEmployee/All' is valid for the request path '/api/Employee/GetAllEmployee/All'
2025-11-03 19:15:26.766 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-11-03 19:15:26.767 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 19:15:26.769 +00:00 [DBG] Successfully validated the token.
2025-11-03 19:15:26.769 +00:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-03 19:15:26.771 +00:00 [DBG] Authorization was successful.
2025-11-03 19:15:26.771 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-11-03 19:15:26.774 +00:00 [INF] Route matched with {action = "GetAllEmployee", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto]]] GetAllEmployee() on controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI).
2025-11-03 19:15:26.775 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 19:15:26.775 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 19:15:26.775 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 19:15:26.775 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 19:15:26.776 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 19:15:26.776 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-11-03 19:15:26.777 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.EmployeeOperation.EmployeeController (CarsTradeAPI)
2025-11-03 19:15:26.778 +00:00 [INF] Начало обработки запроса GetAllEmployee
2025-11-03 19:15:26.781 +00:00 [INF] Начало обработки команды GetAllEmployeeQuery
2025-11-03 19:15:26.870 +00:00 [INF] Этап получения всех сотрудников в репозитории
2025-11-03 19:15:26.873 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 19:15:26.875 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()'
2025-11-03 19:15:26.888 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Employee>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Employee.EmployeeId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Employee.EmployeeAge (uint) Required, 1], [Property: Employee.EmployeeLogin (string) Required Index, 2], [Property: Employee.EmployeeMiddlename (string) Required, 3], [Property: Employee.EmployeeName (string) Required, 4], [Property: Employee.EmployeePassword (string) Required MaxLength(260), 5], [Property: Employee.EmployeeRole (string) Required, 6], [Property: Employee.EmployeeSellCounter (uint?), 7], [Property: Employee.EmployeeSurname (string) Required, 8] }
        SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
        FROM Employees AS e), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Employee>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-11-03 19:15:26.890 +00:00 [DBG] Creating DbConnection.
2025-11-03 19:15:26.891 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 19:15:26.891 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:15:26.891 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:15:26.892 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:15:26.892 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:15:26.893 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:15:26.893 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
2025-11-03 19:15:26.899 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT e.employee_id, e.employee_age, e.employee_login, e.employee_middlename, e.employee_name, e.employee_password, e.employee_role, e.employee_sellcounter, e.employee_surname
FROM "Employees" AS e
2025-11-03 19:15:26.901 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:15:26.902 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:15:26.902 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:15:26.903 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:15:26.903 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:15:26.903 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:15:26.904 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:15:26.904 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Employee' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:15:26.905 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:15:26.905 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 5ms reading results.
2025-11-03 19:15:26.906 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:15:26.907 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-11-03 19:15:26.908 +00:00 [INF] Все сотрудники успешно получены. Количество: 8
2025-11-03 19:15:26.927 +00:00 [INF] Успешное получение всех сотрудников. Количество: 8
2025-11-03 19:15:26.928 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 19:15:26.929 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 19:15:26.929 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 19:15:26.929 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 19:15:26.930 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 19:15:26.930 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 19:15:26.931 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.EmployeeOperation.EmployeeDto.ShowEmployeeDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-03 19:15:26.933 +00:00 [INF] Executed action CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI) in 156.8717ms
2025-11-03 19:15:26.933 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.EmployeeOperation.EmployeeController.GetAllEmployee (CarsTradeAPI)'
2025-11-03 19:15:26.934 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 19:15:26.934 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:15:26.935 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:15:26.935 +00:00 [INF] Request finished HTTP/2 GET https://localhost:49633/api/Employee/GetAllEmployee/All - 200 null application/json; charset=utf-8 188.8763ms
2025-11-03 19:16:23.790 +00:00 [INF] Request starting HTTP/2 GET https://localhost:49633/api/CarModel/GetCarModels/All - null null
2025-11-03 19:16:23.811 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarModel/GetCarModels/All'
2025-11-03 19:16:23.812 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)' with route pattern 'api/CarModel/GetCarModels/All' is valid for the request path '/api/CarModel/GetCarModels/All'
2025-11-03 19:16:23.812 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-11-03 19:16:23.828 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 19:16:23.829 +00:00 [DBG] Successfully validated the token.
2025-11-03 19:16:23.829 +00:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-03 19:16:23.831 +00:00 [DBG] Authorization was successful.
2025-11-03 19:16:23.832 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-11-03 19:16:23.835 +00:00 [INF] Route matched with {action = "GetCarModel", controller = "CarModel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto]]] GetCarModel() on controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI).
2025-11-03 19:16:23.835 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 19:16:23.836 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 19:16:23.836 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 19:16:23.836 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 19:16:23.837 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 19:16:23.837 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-11-03 19:16:23.838 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarModelOperation.CarModelController (CarsTradeAPI)
2025-11-03 19:16:23.839 +00:00 [INF] Начало обработки запроса GetCarModel для получения всех моделей
2025-11-03 19:16:23.843 +00:00 [INF] Начало обработки команды GetCarModelQuery
2025-11-03 19:16:23.953 +00:00 [INF] Этап получения всех CarModels в репозитории
2025-11-03 19:16:23.976 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 19:16:23.977 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()'
2025-11-03 19:16:23.981 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CarModel>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
        SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
        FROM CarModels AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-11-03 19:16:23.983 +00:00 [DBG] Creating DbConnection.
2025-11-03 19:16:23.983 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 19:16:23.983 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:23.983 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:23.984 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:16:23.984 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:16:23.985 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:16:23.985 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-11-03 19:16:23.989 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
2025-11-03 19:16:24.039 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:24.055 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:24.055 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:24.056 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:24.056 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:24.057 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:24.058 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:24.058 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:24.058 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 69ms reading results.
2025-11-03 19:16:24.059 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:24.059 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:16:24.060 +00:00 [INF] Все модели автомобилей успешно получены, количество: 7
2025-11-03 19:16:24.076 +00:00 [INF] Успешное получение 7 моделей автомобилей
2025-11-03 19:16:24.076 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 19:16:24.077 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 19:16:24.077 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 19:16:24.078 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 19:16:24.078 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 19:16:24.078 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 19:16:24.078 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarModelOperation.CarModelDto.ShowCarModelDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-03 19:16:24.081 +00:00 [INF] Executed action CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI) in 243.4892ms
2025-11-03 19:16:24.081 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarModelOperation.CarModelController.GetCarModel (CarsTradeAPI)'
2025-11-03 19:16:24.082 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 19:16:24.082 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:24.083 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:16:24.083 +00:00 [INF] Request finished HTTP/2 GET https://localhost:49633/api/CarModel/GetCarModels/All - 200 null application/json; charset=utf-8 293.6835ms
2025-11-03 19:16:36.711 +00:00 [INF] Request starting HTTP/2 GET https://localhost:49633/api/CarInventory/GetCarInventory/All - null null
2025-11-03 19:16:36.712 +00:00 [DBG] 1 candidate(s) found for the request path '/api/CarInventory/GetCarInventory/All'
2025-11-03 19:16:36.712 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)' with route pattern 'api/CarInventory/GetCarInventory/All' is valid for the request path '/api/CarInventory/GetCarInventory/All'
2025-11-03 19:16:36.713 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-11-03 19:16:36.713 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 19:16:36.715 +00:00 [DBG] Successfully validated the token.
2025-11-03 19:16:36.715 +00:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-03 19:16:36.715 +00:00 [DBG] Authorization was successful.
2025-11-03 19:16:36.716 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-11-03 19:16:36.719 +00:00 [INF] Route matched with {action = "GetAllCarInventories", controller = "CarInventory"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto]]] GetAllCarInventories() on controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI).
2025-11-03 19:16:36.719 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 19:16:36.719 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 19:16:36.720 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 19:16:36.720 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 19:16:36.720 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 19:16:36.721 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-11-03 19:16:36.721 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController (CarsTradeAPI)
2025-11-03 19:16:36.722 +00:00 [INF] Получен запрос на получение всех CarInventory
2025-11-03 19:16:36.725 +00:00 [INF] Начало обработки команды GetCarInventoryQuery
2025-11-03 19:16:36.751 +00:00 [INF] Этап получения всех объектов CarInventory в репозитории
2025-11-03 19:16:36.753 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 19:16:36.754 +00:00 [DBG] Compiling query expression: 
'DbSet<CarInventory>()'
2025-11-03 19:16:36.757 +00:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<CarInventory>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarInventory.InventoryId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarInventory.CarModelId (Guid) Required FK Index, 1], [Property: CarInventory.LastUpdated (DateTime) Required, 2], [Property: CarInventory.Quantity (uint) Required, 3] }
        SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
        FROM CarInventories AS c), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarInventory>, 
    CarsTradeAPI.Data.CarsTradeDbContext, 
    False, 
    False, 
    True
)'
2025-11-03 19:16:36.758 +00:00 [DBG] Creating DbConnection.
2025-11-03 19:16:36.759 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 19:16:36.759 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.759 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.760 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:16:36.760 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:16:36.760 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:16:36.761 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
2025-11-03 19:16:36.783 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
2025-11-03 19:16:36.808 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:36.811 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:36.814 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:36.815 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.815 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 31ms reading results.
2025-11-03 19:16:36.817 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.817 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:16:36.819 +00:00 [INF] Все объекты CarInventory успешно получены. Количество: 3
2025-11-03 19:16:36.825 +00:00 [INF] Этап получения CarModel с ID: "764c23a4-4add-44ca-968b-ab1813dccc49" в репозитории
2025-11-03 19:16:36.827 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .FirstOrDefault(id => id.CarModelId == __CarModelId_0)'
2025-11-03 19:16:36.831 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CarModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
            SELECT TOP(1) c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
            FROM CarModels AS c
            WHERE c.car_id == @__CarModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 19:16:36.832 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.833 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.833 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:16:36.833 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:16:36.834 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:16:36.834 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 19:16:36.860 +00:00 [INF] Executed DbCommand (26ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 19:16:36.876 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:36.887 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:36.888 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.889 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 28ms reading results.
2025-11-03 19:16:36.892 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.893 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-11-03 19:16:36.894 +00:00 [INF] Модель машины с ID: "764c23a4-4add-44ca-968b-ab1813dccc49" успешно получена
2025-11-03 19:16:36.897 +00:00 [INF] Этап получения CarModel с ID: "39bbb487-392f-44fe-8b65-ea145763347b" в репозитории
2025-11-03 19:16:36.898 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.899 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.899 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:16:36.899 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:16:36.900 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:16:36.900 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 19:16:36.926 +00:00 [INF] Executed DbCommand (5ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 19:16:36.927 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:36.928 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:36.928 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.929 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-11-03 19:16:36.931 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.932 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-11-03 19:16:36.933 +00:00 [INF] Модель машины с ID: "39bbb487-392f-44fe-8b65-ea145763347b" успешно получена
2025-11-03 19:16:36.935 +00:00 [INF] Этап получения CarModel с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" в репозитории
2025-11-03 19:16:36.937 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.938 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.939 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:16:36.939 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:16:36.940 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-03 19:16:36.943 +00:00 [DBG] Executing DbCommand [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 19:16:36.947 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__CarModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__CarModelId_0
LIMIT 1
2025-11-03 19:16:36.949 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:36.949 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:16:36.950 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.952 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 3ms reading results.
2025-11-03 19:16:36.952 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.952 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:16:36.953 +00:00 [INF] Модель машины с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" успешно получена
2025-11-03 19:16:36.960 +00:00 [INF] Успешное получение списка CarInventory, количество элементов: 3
2025-11-03 19:16:36.961 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 19:16:36.962 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 19:16:36.962 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 19:16:36.962 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 19:16:36.963 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 19:16:36.963 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 19:16:36.964 +00:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CarsTradeAPI.Features.CarInventoryOperation.CarInventoryDto.ShowCarInventoryDto, CarsTradeAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-03 19:16:36.965 +00:00 [INF] Executed action CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI) in 244.4787ms
2025-11-03 19:16:36.965 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.CarInventoryOperation.CarInventoryController.GetAllCarInventories (CarsTradeAPI)'
2025-11-03 19:16:36.966 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 19:16:36.966 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:16:36.966 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:16:36.968 +00:00 [INF] Request finished HTTP/2 GET https://localhost:49633/api/CarInventory/GetCarInventory/All - 200 null application/json; charset=utf-8 257.7201ms
2025-11-03 19:17:00.257 +00:00 [INF] Request starting HTTP/2 POST https://localhost:49633/api/Orders/CreateOrder - application/json 486
2025-11-03 19:17:00.264 +00:00 [DBG] 1 candidate(s) found for the request path '/api/Orders/CreateOrder'
2025-11-03 19:17:00.271 +00:00 [DBG] Endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)' with route pattern 'api/Orders/CreateOrder' is valid for the request path '/api/Orders/CreateOrder'
2025-11-03 19:17:00.271 +00:00 [DBG] Request matched endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)'
2025-11-03 19:17:00.272 +00:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-11-03 19:17:00.273 +00:00 [DBG] Successfully validated the token.
2025-11-03 19:17:00.273 +00:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-11-03 19:17:00.274 +00:00 [DBG] Authorization was successful.
2025-11-03 19:17:00.274 +00:00 [INF] Executing endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)'
2025-11-03 19:17:00.277 +00:00 [INF] Route matched with {action = "CreateOrder", controller = "Orders"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto]] CreateOrder(CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand) on controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI).
2025-11-03 19:17:00.278 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-11-03 19:17:00.278 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-11-03 19:17:00.278 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-11-03 19:17:00.279 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-11-03 19:17:00.279 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-11-03 19:17:00.280 +00:00 [DBG] Executing controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-11-03 19:17:00.280 +00:00 [DBG] Executed controller factory for controller CarsTradeAPI.Features.OrdersOperation.OrdersController (CarsTradeAPI)
2025-11-03 19:17:00.280 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' ...
2025-11-03 19:17:00.281 +00:00 [DBG] Attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' using the name '' in request data ...
2025-11-03 19:17:00.281 +00:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-11-03 19:17:00.286 +00:00 [DBG] Connection id "0HNGR1JGHTSNJ", Request id "0HNGR1JGHTSNJ:0000001B": started reading request body.
2025-11-03 19:17:00.286 +00:00 [DBG] Connection id "0HNGR1JGHTSNJ", Request id "0HNGR1JGHTSNJ:0000001B": done reading request body.
2025-11-03 19:17:00.293 +00:00 [DBG] JSON input formatter succeeded, deserializing to type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'
2025-11-03 19:17:00.294 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-11-03 19:17:00.294 +00:00 [DBG] Done attempting to bind parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-11-03 19:17:00.294 +00:00 [DBG] Attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand' ...
2025-11-03 19:17:00.300 +00:00 [DBG] Done attempting to validate the bound parameter 'command' of type 'CarsTradeAPI.Features.OrdersOperation.CreateOrder.CreateOrderCommand'.
2025-11-03 19:17:00.302 +00:00 [INF] Получен запрос на создание нового заказа
2025-11-03 19:17:00.356 +00:00 [INF] Начало обработки команды CreateOrderCommand для ключа stryhwsrtjkoiwhjiko645
2025-11-03 19:17:00.358 +00:00 [INF] Checking IdempotencyRequest for key: stryhwsrtjkoiwhjiko645
2025-11-03 19:17:00.359 +00:00 [DBG] Entity Framework Core 8.0.7 initialized 'CarsTradeDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.4+51faf6e9c9c7ef99c3e98d98a96adb8fa8ae4553' with options: None
2025-11-03 19:17:00.365 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .AsNoTracking()
    .FirstOrDefault(r => r.Key == __key_0)'
2025-11-03 19:17:00.370 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<IdempotencyRequest>(
    asyncEnumerable: new SingleQueryingEnumerable<IdempotencyRequest>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: IdempotencyRequest.Id (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: IdempotencyRequest.CreatedAt (DateTime) Required, 1], [Property: IdempotencyRequest.Key (string) Required MaxLength(100), 2], [Property: IdempotencyRequest.ResourceId (Guid?), 3], [Property: IdempotencyRequest.ResourceType (string) Required MaxLength(50), 4], [Property: IdempotencyRequest.Responsejson (string), 5], [Property: IdempotencyRequest.Status (string) Required MaxLength(50), 6] }
            SELECT TOP(1) i.Id, i.CreatedAt, i.Key, i.ResourceId, i.ResourceType, i.Responsejson, i.Status
            FROM IdempotencyRequests AS i
            WHERE i.Key == @__key_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, IdempotencyRequest>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 19:17:00.370 +00:00 [DBG] Creating DbConnection.
2025-11-03 19:17:00.371 +00:00 [DBG] Created DbConnection. (0ms).
2025-11-03 19:17:00.371 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.371 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.372 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:17:00.372 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.372 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.373 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-11-03 19:17:00.377 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."CreatedAt", i."Key", i."ResourceId", i."ResourceType", i."Responsejson", i."Status"
FROM "IdempotencyRequests" AS i
WHERE i."Key" = @__key_0
LIMIT 1
2025-11-03 19:17:00.378 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.378 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 19:17:00.378 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.379 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:17:00.422 +00:00 [INF] IdempotencyRequest found: false
2025-11-03 19:17:00.426 +00:00 [INF] Этап проверки существования покупателя с ID "fff39040-5257-421f-8e13-f2af3fd91055" в репозитории
2025-11-03 19:17:00.427 +00:00 [DBG] Compiling query expression: 
'DbSet<Buyer>()
    .Any(o => o.BuyerId == __buyerId_0)'
2025-11-03 19:17:00.433 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Buyers AS b
                WHERE b.buyer_id == @__buyerId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 19:17:00.438 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.439 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.439 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:17:00.440 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.440 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.440 +00:00 [DBG] Executing DbCommand [Parameters=[@__buyerId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Buyers" AS b
    WHERE b.buyer_id = @__buyerId_0)
2025-11-03 19:17:00.443 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__buyerId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Buyers" AS b
    WHERE b.buyer_id = @__buyerId_0)
2025-11-03 19:17:00.468 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.468 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 25ms reading results.
2025-11-03 19:17:00.469 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.469 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:17:00.470 +00:00 [INF] Проверка существования прошла успешно, результат true
2025-11-03 19:17:00.471 +00:00 [INF] Этап проверки существования работника с ID "7bd84fc5-4710-485f-a05a-9d40a97aaa25" в репозитории
2025-11-03 19:17:00.471 +00:00 [DBG] Compiling query expression: 
'DbSet<Employee>()
    .Any(o => o.EmployeeId == __employeeId_0)'
2025-11-03 19:17:00.473 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM Employees AS e
                WHERE e.employee_id == @__employeeId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 19:17:00.474 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.474 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.474 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:17:00.475 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.475 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.475 +00:00 [DBG] Executing DbCommand [Parameters=[@__employeeId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Employees" AS e
    WHERE e.employee_id = @__employeeId_0)
2025-11-03 19:17:00.478 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__employeeId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Employees" AS e
    WHERE e.employee_id = @__employeeId_0)
2025-11-03 19:17:00.479 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.479 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 19:17:00.480 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.480 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:17:00.481 +00:00 [INF] Проверка существования прошла успешно, результат true
2025-11-03 19:17:00.485 +00:00 [INF] Этап проверки существования машины с ID "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" в репозитории
2025-11-03 19:17:00.485 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .Any(cm => (Guid?)cm.CarModelId == __carModelId_0)'
2025-11-03 19:17:00.487 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM CarModels AS c
                WHERE c.car_id == @__carModelId_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 19:17:00.487 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.488 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.489 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:17:00.489 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.489 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.490 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CarModels" AS c
    WHERE c.car_id = @__carModelId_0)
2025-11-03 19:17:00.512 +00:00 [INF] Executed DbCommand (22ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CarModels" AS c
    WHERE c.car_id = @__carModelId_0)
2025-11-03 19:17:00.513 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.513 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 19:17:00.513 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.514 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:17:00.514 +00:00 [INF] Проверка существования прошла успешно, результат true
2025-11-03 19:17:00.516 +00:00 [DBG] Compiling query expression: 
'DbSet<CarInventory>()
    .FirstOrDefault(ci => ci.CarModelId == __carModelId_0)'
2025-11-03 19:17:00.518 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarInventory>(
    asyncEnumerable: new SingleQueryingEnumerable<CarInventory>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarInventory.InventoryId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarInventory.CarModelId (Guid) Required FK Index, 1], [Property: CarInventory.LastUpdated (DateTime) Required, 2], [Property: CarInventory.Quantity (uint) Required, 3] }
            SELECT TOP(1) c.inventory_id, c.car_model_id, c.last_updated, c.quantity
            FROM CarInventories AS c
            WHERE c.car_model_id == @__carModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarInventory>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 19:17:00.519 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.519 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.520 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:17:00.520 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.520 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.520 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-11-03 19:17:00.523 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-11-03 19:17:00.544 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarInventory' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.545 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.546 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 22ms reading results.
2025-11-03 19:17:00.547 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.547 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:17:00.550 +00:00 [INF] Этап получения цены машины с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" в репозитории
2025-11-03 19:17:00.552 +00:00 [DBG] Compiling query expression: 
'DbSet<CarModel>()
    .FirstOrDefault(cm => (Guid?)cm.CarModelId == __carModelId_0)'
2025-11-03 19:17:00.554 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<CarModel>(
    asyncEnumerable: new SingleQueryingEnumerable<CarModel>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: CarModel.CarModelId (Guid) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: CarModel.CarColor (string) Required, 1], [Property: CarModel.CarConfiguration (CarConfiguration) Required, 2], [Property: CarModel.CarCountry (string) Required, 3], [Property: CarModel.CarEngine (Engine), 4], [Property: CarModel.CarManufacturer (string) Required Index, 5], [Property: CarModel.CarModelName (string) Required Index, 6], [Property: CarModel.CarPrice (decimal) Required, 7], [Property: CarModel.ProductionDateTime (DateTime) Required, 8] }
            SELECT TOP(1) c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c.car_productionDateTime
            FROM CarModels AS c
            WHERE c.car_id == @__carModelId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, CarModel>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 19:17:00.555 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.555 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.555 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:17:00.556 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.556 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.556 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__carModelId_0
LIMIT 1
2025-11-03 19:17:00.572 +00:00 [INF] Executed DbCommand (16ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.car_id, c.car_color, c.car_configuration, c.car_country, c.car_engine, c.car_manufacturer, c.car_model, c.car_price, c."car_productionDateTime"
FROM "CarModels" AS c
WHERE c.car_id = @__carModelId_0
LIMIT 1
2025-11-03 19:17:00.574 +00:00 [DBG] The navigation 'CarInventory.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.574 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'CarModel' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.575 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.575 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 2ms reading results.
2025-11-03 19:17:00.575 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.576 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:17:00.577 +00:00 [INF] Цена машины с ID: "713f7f5b-7ad8-4099-ab09-c3a6de97ad1a" успешно получена
2025-11-03 19:17:00.578 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.578 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.579 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:17:00.579 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.579 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.580 +00:00 [DBG] Executing DbCommand [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-11-03 19:17:00.582 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[@__carModelId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT c.inventory_id, c.car_model_id, c.last_updated, c.quantity
FROM "CarInventories" AS c
WHERE c.car_model_id = @__carModelId_0
LIMIT 1
2025-11-03 19:17:00.583 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.583 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 19:17:00.584 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.584 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:17:00.591 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.593 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-11-03 19:17:00.596 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-11-03 19:17:00.613 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-11-03 19:17:00.654 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.654 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.656 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:17:00.656 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.658 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-03 19:17:00.659 +00:00 [DBG] Executing DbCommand [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CarInventories" SET car_model_id = @p0, last_updated = @p1, quantity = @p2
WHERE inventory_id = @p3;
2025-11-03 19:17:00.663 +00:00 [INF] Executed DbCommand (4ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
UPDATE "CarInventories" SET car_model_id = @p0, last_updated = @p1, quantity = @p2
WHERE inventory_id = @p3;
2025-11-03 19:17:00.667 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.667 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 4ms reading results.
2025-11-03 19:17:00.669 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.669 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:17:00.671 +00:00 [DBG] An entity of type 'CarInventory' tracked by 'CarsTradeDbContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.673 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-11-03 19:17:00.676 +00:00 [INF] Этап создания заказа в репозитории
2025-11-03 19:17:00.713 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'Order' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.726 +00:00 [DBG] The navigation 'OrderItem.CarModel' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.729 +00:00 [DBG] The navigation 'OrderItem.Order' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.733 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'OrderItem' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.735 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-11-03 19:17:00.736 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-11-03 19:17:00.749 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-11-03 19:17:00.759 +00:00 [DBG] Executing 2 update commands as a batch.
2025-11-03 19:17:00.761 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.762 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.763 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2025-11-03 19:17:00.769 +00:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2025-11-03 19:17:00.771 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:17:00.771 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.773 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-11-03 19:17:00.774 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = Object), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?', @p11='?' (DbType = Int64), @p12='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Orders" (order_id, "BuyerId", "EmployeeId", order_delivery_address, order_completion_date, order_create_date, order_price)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO "OrderItems" (orderitem_id, "CarModelId", "OrderId", comments, order_quantity, unit_price)
VALUES (@p7, @p8, @p9, @p10, @p11, @p12);
2025-11-03 19:17:00.794 +00:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?' (DbType = Object), @p4='?' (DbType = DateTime), @p5='?' (DbType = DateTime), @p6='?' (DbType = Decimal), @p7='?' (DbType = Guid), @p8='?' (DbType = Guid), @p9='?' (DbType = Guid), @p10='?', @p11='?' (DbType = Int64), @p12='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Orders" (order_id, "BuyerId", "EmployeeId", order_delivery_address, order_completion_date, order_create_date, order_price)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
INSERT INTO "OrderItems" (orderitem_id, "CarModelId", "OrderId", comments, order_quantity, unit_price)
VALUES (@p7, @p8, @p9, @p10, @p11, @p12);
2025-11-03 19:17:00.794 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.795 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 1ms reading results.
2025-11-03 19:17:00.798 +00:00 [DBG] Committing transaction.
2025-11-03 19:17:00.804 +00:00 [DBG] Committed transaction.
2025-11-03 19:17:00.806 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.807 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (1ms).
2025-11-03 19:17:00.810 +00:00 [DBG] Disposing transaction.
2025-11-03 19:17:00.812 +00:00 [DBG] An entity of type 'Order' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.812 +00:00 [DBG] An entity of type 'OrderItem' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.813 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 2 entities written to the database.
2025-11-03 19:17:00.813 +00:00 [INF] Заказ успешно создан с ID: "578c66a8-2ac7-41a4-991c-66cde8fdcfec"
2025-11-03 19:17:00.824 +00:00 [DBG] Compiling query expression: 
'DbSet<IdempotencyRequest>()
    .Any(r => r.Key == __key_0)'
2025-11-03 19:17:00.826 +00:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<bool>(
    asyncEnumerable: new SingleQueryingEnumerable<bool>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM IdempotencyRequests AS i
                WHERE i.Key == @__key_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
        CarsTradeAPI.Data.CarsTradeDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-11-03 19:17:00.826 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.827 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.827 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:17:00.827 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.828 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.828 +00:00 [DBG] Executing DbCommand [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-11-03 19:17:00.832 +00:00 [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "IdempotencyRequests" AS i
    WHERE i."Key" = @__key_0)
2025-11-03 19:17:00.833 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.833 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 19:17:00.833 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.833 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:17:00.846 +00:00 [DBG] Context 'CarsTradeDbContext' started tracking 'IdempotencyRequest' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.847 +00:00 [DBG] SaveChanges starting for 'CarsTradeDbContext'.
2025-11-03 19:17:00.847 +00:00 [DBG] DetectChanges starting for 'CarsTradeDbContext'.
2025-11-03 19:17:00.853 +00:00 [DBG] DetectChanges completed for 'CarsTradeDbContext'.
2025-11-03 19:17:00.854 +00:00 [DBG] Opening connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.855 +00:00 [DBG] Opened connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.855 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-11-03 19:17:00.855 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-11-03 19:17:00.856 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-11-03 19:17:00.856 +00:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-03 19:17:00.900 +00:00 [INF] Executed DbCommand (23ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?', @p3='?' (DbType = Guid), @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "IdempotencyRequests" ("Id", "CreatedAt", "Key", "ResourceId", "ResourceType", "Responsejson", "Status")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-11-03 19:17:00.922 +00:00 [DBG] Closing data reader to 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.922 +00:00 [DBG] A data reader for 'CarsTrade' on server 'tcp://carstradeapi_database:5432' is being disposed after spending 0ms reading results.
2025-11-03 19:17:00.923 +00:00 [DBG] Closing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:00.923 +00:00 [DBG] Closed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:17:00.925 +00:00 [DBG] An entity of type 'IdempotencyRequest' tracked by 'CarsTradeDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-11-03 19:17:00.925 +00:00 [DBG] SaveChanges completed for 'CarsTradeDbContext' with 1 entities written to the database.
2025-11-03 19:17:00.925 +00:00 [INF] IdempotencyRequest saved for key: stryhwsrtjkoiwhjiko645
2025-11-03 19:17:01.048 +00:00 [DBG] Declare exchange: name: Contracts.Events:OrderCreated, type: fanout, durable
2025-11-03 19:17:01.178 +00:00 [DBG] SEND "rabbitmq://carstradeapi_rabbitmq/Contracts.Events:OrderCreated" "48000000-af74-fd0d-b650-08de1b0d90bc" Contracts.Events.OrderCreated
2025-11-03 19:17:01.180 +00:00 [INF] Заказ успешно создан с ID: "578c66a8-2ac7-41a4-991c-66cde8fdcfec"
2025-11-03 19:17:01.180 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-11-03 19:17:01.181 +00:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2025-11-03 19:17:01.181 +00:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2025-11-03 19:17:01.181 +00:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-11-03 19:17:01.182 +00:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-11-03 19:17:01.182 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-11-03 19:17:01.182 +00:00 [INF] Executing OkObjectResult, writing value of type 'CarsTradeAPI.Features.OrdersOperation.OrdersDto.ShowOrderDto'.
2025-11-03 19:17:01.184 +00:00 [INF] Executed action CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI) in 904.1958ms
2025-11-03 19:17:01.184 +00:00 [INF] Executed endpoint 'CarsTradeAPI.Features.OrdersOperation.OrdersController.CreateOrder (CarsTradeAPI)'
2025-11-03 19:17:01.184 +00:00 [DBG] 'CarsTradeDbContext' disposed.
2025-11-03 19:17:01.185 +00:00 [DBG] Disposing connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432'.
2025-11-03 19:17:01.185 +00:00 [DBG] Disposed connection to database 'CarsTrade' on server 'tcp://carstradeapi_database:5432' (0ms).
2025-11-03 19:17:01.186 +00:00 [INF] Request finished HTTP/2 POST https://localhost:49633/api/Orders/CreateOrder - 200 null application/json; charset=utf-8 928.9356ms
